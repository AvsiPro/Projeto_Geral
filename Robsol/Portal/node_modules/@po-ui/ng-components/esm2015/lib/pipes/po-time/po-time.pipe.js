import { Pipe } from '@angular/core';
import { isTypeof } from '../../utils/util';
/**
 * @docsPrivate
 *
 * @description
 *
 * Pipe responsável por apresentar um horário baseado no formato de entrada definido na API do PO UI.
 */
export class PoTimePipe {
    transform(time, format) {
        const hourRegex = /^(([0-1][0-9])|(2[0-3])):[0-5][0-9]:[0-5][0-9][\.]?([0-9]{1,6})?$/g;
        if (isTypeof(time, 'string') && hourRegex.test(time)) {
            const amountOfF = format ? format.lastIndexOf('f') - format.indexOf('f') + 1 : 0;
            const miliseconds = this.addDotMiliseconds(time.substring(9, 9 + amountOfF), amountOfF);
            const formatMiliseconds = this.getFormatMiliseconds(amountOfF);
            return this.formatValue(time, format, formatMiliseconds, miliseconds);
        }
        return null;
    }
    addDotMiliseconds(miliseconds, amountOfF) {
        if (miliseconds && amountOfF) {
            miliseconds = '.' + miliseconds;
        }
        return miliseconds;
    }
    formatValue(time, format, formatMiliseconds, miliseconds) {
        if (time && format) {
            const hour = time.substring(0, 2);
            const minutes = time.substring(3, 5);
            const seconds = time.substring(6, 8);
            format = format.replace('HH', hour);
            format = format.replace('mm', minutes);
            format = format.replace('ss', seconds);
            format = format.replace(`.${formatMiliseconds}`, miliseconds);
            return format;
        }
        else {
            return time;
        }
    }
    getFormatMiliseconds(amountOfF) {
        let formatMiliseconds = '';
        for (let i = 0; i < amountOfF; i++) {
            formatMiliseconds += 'f';
        }
        return formatMiliseconds;
    }
}
PoTimePipe.decorators = [
    { type: Pipe, args: [{
                name: 'po_time'
            },] }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tdGltZS5waXBlLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvdWkvc3JjL2xpYi9waXBlcy9wby10aW1lL3BvLXRpbWUucGlwZS50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsSUFBSSxFQUFpQixNQUFNLGVBQWUsQ0FBQztBQUVwRCxPQUFPLEVBQUUsUUFBUSxFQUFFLE1BQU0sa0JBQWtCLENBQUM7QUFFNUM7Ozs7OztHQU1HO0FBSUgsTUFBTSxPQUFPLFVBQVU7SUFDckIsU0FBUyxDQUFDLElBQVksRUFBRSxNQUFlO1FBQ3JDLE1BQU0sU0FBUyxHQUFHLG9FQUFvRSxDQUFDO1FBRXZGLElBQUksUUFBUSxDQUFDLElBQUksRUFBRSxRQUFRLENBQUMsSUFBSSxTQUFTLENBQUMsSUFBSSxDQUFDLElBQUksQ0FBQyxFQUFFO1lBQ3BELE1BQU0sU0FBUyxHQUFHLE1BQU0sQ0FBQyxDQUFDLENBQUMsTUFBTSxDQUFDLFdBQVcsQ0FBQyxHQUFHLENBQUMsR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLEdBQUcsQ0FBQyxHQUFHLENBQUMsQ0FBQyxDQUFDLENBQUMsQ0FBQyxDQUFDO1lBRWpGLE1BQU0sV0FBVyxHQUFHLElBQUksQ0FBQyxpQkFBaUIsQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLENBQUMsRUFBRSxDQUFDLEdBQUcsU0FBUyxDQUFDLEVBQUUsU0FBUyxDQUFDLENBQUM7WUFDeEYsTUFBTSxpQkFBaUIsR0FBVyxJQUFJLENBQUMsb0JBQW9CLENBQUMsU0FBUyxDQUFDLENBQUM7WUFFdkUsT0FBTyxJQUFJLENBQUMsV0FBVyxDQUFDLElBQUksRUFBRSxNQUFNLEVBQUUsaUJBQWlCLEVBQUUsV0FBVyxDQUFDLENBQUM7U0FDdkU7UUFDRCxPQUFPLElBQUksQ0FBQztJQUNkLENBQUM7SUFFTyxpQkFBaUIsQ0FBQyxXQUFtQixFQUFFLFNBQWlCO1FBQzlELElBQUksV0FBVyxJQUFJLFNBQVMsRUFBRTtZQUM1QixXQUFXLEdBQUcsR0FBRyxHQUFHLFdBQVcsQ0FBQztTQUNqQztRQUNELE9BQU8sV0FBVyxDQUFDO0lBQ3JCLENBQUM7SUFFTyxXQUFXLENBQUMsSUFBWSxFQUFFLE1BQWMsRUFBRSxpQkFBeUIsRUFBRSxXQUFtQjtRQUM5RixJQUFJLElBQUksSUFBSSxNQUFNLEVBQUU7WUFDbEIsTUFBTSxJQUFJLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDbEMsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFDckMsTUFBTSxPQUFPLEdBQUcsSUFBSSxDQUFDLFNBQVMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxDQUFDLENBQUM7WUFFckMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxFQUFFLElBQUksQ0FBQyxDQUFDO1lBQ3BDLE1BQU0sR0FBRyxNQUFNLENBQUMsT0FBTyxDQUFDLElBQUksRUFBRSxPQUFPLENBQUMsQ0FBQztZQUN2QyxNQUFNLEdBQUcsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLEVBQUUsT0FBTyxDQUFDLENBQUM7WUFDdkMsTUFBTSxHQUFHLE1BQU0sQ0FBQyxPQUFPLENBQUMsSUFBSSxpQkFBaUIsRUFBRSxFQUFFLFdBQVcsQ0FBQyxDQUFDO1lBRTlELE9BQU8sTUFBTSxDQUFDO1NBQ2Y7YUFBTTtZQUNMLE9BQU8sSUFBSSxDQUFDO1NBQ2I7SUFDSCxDQUFDO0lBRU8sb0JBQW9CLENBQUMsU0FBaUI7UUFDNUMsSUFBSSxpQkFBaUIsR0FBVyxFQUFFLENBQUM7UUFFbkMsS0FBSyxJQUFJLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxHQUFHLFNBQVMsRUFBRSxDQUFDLEVBQUUsRUFBRTtZQUNsQyxpQkFBaUIsSUFBSSxHQUFHLENBQUM7U0FDMUI7UUFFRCxPQUFPLGlCQUFpQixDQUFDO0lBQzNCLENBQUM7OztZQWxERixJQUFJLFNBQUM7Z0JBQ0osSUFBSSxFQUFFLFNBQVM7YUFDaEIiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQaXBlLCBQaXBlVHJhbnNmb3JtIH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5pbXBvcnQgeyBpc1R5cGVvZiB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWwnO1xyXG5cclxuLyoqXHJcbiAqIEBkb2NzUHJpdmF0ZVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICogUGlwZSByZXNwb25zw6F2ZWwgcG9yIGFwcmVzZW50YXIgdW0gaG9yw6FyaW8gYmFzZWFkbyBubyBmb3JtYXRvIGRlIGVudHJhZGEgZGVmaW5pZG8gbmEgQVBJIGRvIFBPIFVJLlxyXG4gKi9cclxuQFBpcGUoe1xyXG4gIG5hbWU6ICdwb190aW1lJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgUG9UaW1lUGlwZSBpbXBsZW1lbnRzIFBpcGVUcmFuc2Zvcm0ge1xyXG4gIHRyYW5zZm9ybSh0aW1lOiBzdHJpbmcsIGZvcm1hdD86IHN0cmluZyk6IHN0cmluZyB7XHJcbiAgICBjb25zdCBob3VyUmVnZXggPSAvXigoWzAtMV1bMC05XSl8KDJbMC0zXSkpOlswLTVdWzAtOV06WzAtNV1bMC05XVtcXC5dPyhbMC05XXsxLDZ9KT8kL2c7XHJcblxyXG4gICAgaWYgKGlzVHlwZW9mKHRpbWUsICdzdHJpbmcnKSAmJiBob3VyUmVnZXgudGVzdCh0aW1lKSkge1xyXG4gICAgICBjb25zdCBhbW91bnRPZkYgPSBmb3JtYXQgPyBmb3JtYXQubGFzdEluZGV4T2YoJ2YnKSAtIGZvcm1hdC5pbmRleE9mKCdmJykgKyAxIDogMDtcclxuXHJcbiAgICAgIGNvbnN0IG1pbGlzZWNvbmRzID0gdGhpcy5hZGREb3RNaWxpc2Vjb25kcyh0aW1lLnN1YnN0cmluZyg5LCA5ICsgYW1vdW50T2ZGKSwgYW1vdW50T2ZGKTtcclxuICAgICAgY29uc3QgZm9ybWF0TWlsaXNlY29uZHM6IHN0cmluZyA9IHRoaXMuZ2V0Rm9ybWF0TWlsaXNlY29uZHMoYW1vdW50T2ZGKTtcclxuXHJcbiAgICAgIHJldHVybiB0aGlzLmZvcm1hdFZhbHVlKHRpbWUsIGZvcm1hdCwgZm9ybWF0TWlsaXNlY29uZHMsIG1pbGlzZWNvbmRzKTtcclxuICAgIH1cclxuICAgIHJldHVybiBudWxsO1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBhZGREb3RNaWxpc2Vjb25kcyhtaWxpc2Vjb25kczogc3RyaW5nLCBhbW91bnRPZkY6IG51bWJlcik6IHN0cmluZyB7XHJcbiAgICBpZiAobWlsaXNlY29uZHMgJiYgYW1vdW50T2ZGKSB7XHJcbiAgICAgIG1pbGlzZWNvbmRzID0gJy4nICsgbWlsaXNlY29uZHM7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gbWlsaXNlY29uZHM7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGZvcm1hdFZhbHVlKHRpbWU6IHN0cmluZywgZm9ybWF0OiBzdHJpbmcsIGZvcm1hdE1pbGlzZWNvbmRzOiBzdHJpbmcsIG1pbGlzZWNvbmRzOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgaWYgKHRpbWUgJiYgZm9ybWF0KSB7XHJcbiAgICAgIGNvbnN0IGhvdXIgPSB0aW1lLnN1YnN0cmluZygwLCAyKTtcclxuICAgICAgY29uc3QgbWludXRlcyA9IHRpbWUuc3Vic3RyaW5nKDMsIDUpO1xyXG4gICAgICBjb25zdCBzZWNvbmRzID0gdGltZS5zdWJzdHJpbmcoNiwgOCk7XHJcblxyXG4gICAgICBmb3JtYXQgPSBmb3JtYXQucmVwbGFjZSgnSEgnLCBob3VyKTtcclxuICAgICAgZm9ybWF0ID0gZm9ybWF0LnJlcGxhY2UoJ21tJywgbWludXRlcyk7XHJcbiAgICAgIGZvcm1hdCA9IGZvcm1hdC5yZXBsYWNlKCdzcycsIHNlY29uZHMpO1xyXG4gICAgICBmb3JtYXQgPSBmb3JtYXQucmVwbGFjZShgLiR7Zm9ybWF0TWlsaXNlY29uZHN9YCwgbWlsaXNlY29uZHMpO1xyXG5cclxuICAgICAgcmV0dXJuIGZvcm1hdDtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHJldHVybiB0aW1lO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBnZXRGb3JtYXRNaWxpc2Vjb25kcyhhbW91bnRPZkY6IG51bWJlcik6IHN0cmluZyB7XHJcbiAgICBsZXQgZm9ybWF0TWlsaXNlY29uZHM6IHN0cmluZyA9ICcnO1xyXG5cclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYW1vdW50T2ZGOyBpKyspIHtcclxuICAgICAgZm9ybWF0TWlsaXNlY29uZHMgKz0gJ2YnO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBmb3JtYXRNaWxpc2Vjb25kcztcclxuICB9XHJcbn1cclxuIl19