import { Component } from '@angular/core';
import { PoChartPlotAreaPaddingTop } from '../../../helpers/po-chart-default-values.constant';
import { PoChartBarBaseComponent } from '../po-chart-bar-base.component';
import { PoChartMathsService } from '../../../services/po-chart-maths.service';
export class PoChartColumnComponent extends PoChartBarBaseComponent {
    constructor(mathsService) {
        super(mathsService);
        this.mathsService = mathsService;
        this.tooltipPosition = 'top';
    }
    barCoordinates(seriesIndex, serieItemDataIndex, containerSize, minMaxSeriesValues, serieValue) {
        const { svgWidth, axisXLabelWidth, svgPlottingAreaHeight } = containerSize;
        const { chartBarPlotArea, barWidth, spaceBetweenBars } = this.calculateElementsMeasurements(svgWidth, axisXLabelWidth);
        const { x1, x2 } = this.xCoordinates(seriesIndex, serieItemDataIndex, chartBarPlotArea, barWidth, spaceBetweenBars, axisXLabelWidth);
        const { y1, y2 } = this.yCoordinates(minMaxSeriesValues, svgPlottingAreaHeight, serieValue);
        return ['M', x1, y2, 'L', x2, y2, 'L', x2, y1, 'L', x1, y1, 'z'].join(' ');
    }
    calculateElementsMeasurements(svgWidth, axisXLabelWidth) {
        // Fração das séries em relação à largura da categoria. Incrementa + 2 na extensão das séries pois se trata da área de margem entre as categorias.
        const chartBarPlotArea = svgWidth - axisXLabelWidth;
        const categoryWidth = chartBarPlotArea / this.seriesGreaterLength;
        const columnFraction = categoryWidth / (this.series.length + 2);
        // Área entre as colunas: retorna zero se houver apenas uma série.
        const spaceBetweenBars = this.series.length > 1 ? columnFraction / (this.series.length + 2) : 0;
        // Subtrai a fração das séries pelo espaço entre as colunas.
        const barWidth = columnFraction - (spaceBetweenBars * (this.series.length - 1)) / (this.series.length + 2);
        return { chartBarPlotArea, barWidth, spaceBetweenBars };
    }
    xCoordinates(seriesIndex, serieItemDataIndex, chartBarPlotArea, barWidth, spaceBetweenBars, axisXLabelWidth) {
        // A área lateral entre a coluna e a linha do eixo Y do grid será sempre equivalente à largura da coluna.
        const spaceBetweenAxisAndBars = barWidth;
        const xRatio = serieItemDataIndex / this.seriesGreaterLength;
        const x1 = Math.round(axisXLabelWidth +
            chartBarPlotArea * xRatio +
            spaceBetweenAxisAndBars +
            barWidth * seriesIndex +
            spaceBetweenBars * seriesIndex);
        const x2 = Math.round(x1 + barWidth);
        return { x1, x2 };
    }
    yCoordinates(minMaxSeriesValues, svgPlottingAreaHeight, serieValue) {
        const { minValue } = minMaxSeriesValues;
        const minValuePercentage = this.mathsService.getSeriePercentage(minMaxSeriesValues, minValue < 0 ? 0 : minValue);
        const y1 = Math.round(svgPlottingAreaHeight - svgPlottingAreaHeight * minValuePercentage + PoChartPlotAreaPaddingTop);
        const yRatio = this.mathsService.getSeriePercentage(minMaxSeriesValues, serieValue);
        const y2 = Math.round(svgPlottingAreaHeight - svgPlottingAreaHeight * yRatio + PoChartPlotAreaPaddingTop);
        return { y1, y2 };
    }
}
PoChartColumnComponent.decorators = [
    { type: Component, args: [{
                selector: '[po-chart-column]',
                template: "<svg:g>\r\n  <svg:g *ngFor=\"let item of seriesPathsCoordinates; let i = index; trackBy: trackBy\"\r\n    [class]=\"'po-chart-bar-group-' + i\"\r\n  >\r\n    <!-- SERIES PATHS -->\r\n    <svg:g po-chart-bar-path\r\n      [attr.key]=\"'po-chart-bar-path-' + i\"\r\n      [p-color]=\"item[0]?.color\" \r\n      [p-coordinates]=\"item\"\r\n      [p-tooltip-position]=\"tooltipPosition\"\r\n      (p-bar-click)=\"onSerieBarClick($event)\"\r\n      (p-bar-hover)=\"onSerieBarHover($event)\"\r\n      >\r\n      </svg:g>\r\n  </svg:g>\r\n</svg:g>"
            },] }
];
PoChartColumnComponent.ctorParameters = () => [
    { type: PoChartMathsService }
];
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tY2hhcnQtY29sdW1uLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3VpL3NyYy9saWIvY29tcG9uZW50cy9wby1jaGFydC9wby1jaGFydC1jb250YWluZXIvcG8tY2hhcnQtYmFyL3BvLWNoYXJ0LWNvbHVtbi9wby1jaGFydC1jb2x1bW4uY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFMUMsT0FBTyxFQUFFLHlCQUF5QixFQUFFLE1BQU0sbURBQW1ELENBQUM7QUFFOUYsT0FBTyxFQUFFLHVCQUF1QixFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFDekUsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sMENBQTBDLENBQUM7QUFTL0UsTUFBTSxPQUFPLHNCQUF1QixTQUFRLHVCQUF1QjtJQUdqRSxZQUFzQixZQUFpQztRQUNyRCxLQUFLLENBQUMsWUFBWSxDQUFDLENBQUM7UUFEQSxpQkFBWSxHQUFaLFlBQVksQ0FBcUI7UUFGOUMsb0JBQWUsR0FBRyxLQUFLLENBQUM7SUFJakMsQ0FBQztJQUVTLGNBQWMsQ0FDdEIsV0FBbUIsRUFDbkIsa0JBQTBCLEVBQzFCLGFBQW1DLEVBQ25DLGtCQUF1QyxFQUN2QyxVQUFrQjtRQUVsQixNQUFNLEVBQUUsUUFBUSxFQUFFLGVBQWUsRUFBRSxxQkFBcUIsRUFBRSxHQUFHLGFBQWEsQ0FBQztRQUMzRSxNQUFNLEVBQUUsZ0JBQWdCLEVBQUUsUUFBUSxFQUFFLGdCQUFnQixFQUFFLEdBQUcsSUFBSSxDQUFDLDZCQUE2QixDQUN6RixRQUFRLEVBQ1IsZUFBZSxDQUNoQixDQUFDO1FBRUYsTUFBTSxFQUFFLEVBQUUsRUFBRSxFQUFFLEVBQUUsR0FBRyxJQUFJLENBQUMsWUFBWSxDQUNsQyxXQUFXLEVBQ1gsa0JBQWtCLEVBQ2xCLGdCQUFn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TUFBTSxFQUFFLEdBQUcsSUFBSSxDQUFDLEtBQUssQ0FBQyxxQkFBcUIsR0FBRyxxQkFBcUIsR0FBRyxNQUFNLEdBQUcseUJBQXlCLENBQUMsQ0FBQztRQUUxRyxPQUFPLEVBQUUsRUFBRSxFQUFFLEVBQUUsRUFBRSxDQUFDO0lBQ3BCLENBQUM7OztZQTNGRixTQUFTLFNBQUM7Z0JBQ1QsUUFBUSxFQUFFLG1CQUFtQjtnQkFDN0Isd2lCQUE0QzthQUM3Qzs7O1lBUlEsbUJBQW1CIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5pbXBvcnQgeyBQb0NoYXJ0UGxvdEFyZWFQYWRkaW5nVG9wIH0gZnJvbSAnLi4vLi4vLi4vaGVscGVycy9wby1jaGFydC1kZWZhdWx0LXZhbHVlcy5jb25zdGFudCc7XHJcblxyXG5pbXBvcnQgeyBQb0NoYXJ0QmFyQmFzZUNvbXBvbmVudCB9IGZyb20gJy4uL3BvLWNoYXJ0LWJhci1iYXNlLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFBvQ2hhcnRNYXRoc1NlcnZpY2UgfSBmcm9tICcuLi8uLi8uLi9zZXJ2aWNlcy9wby1jaGFydC1tYXRocy5zZXJ2aWNlJztcclxuXHJcbmltcG9ydCB7IFBvQ2hhcnRDb250YWluZXJTaXplIH0gZnJvbSAnLi4vLi4vLi4vaW50ZXJmYWNlcy9wby1jaGFydC1jb250YWluZXItc2l6ZS5pbnRlcmZhY2UnO1xyXG5pbXBvcnQgeyBQb0NoYXJ0TWluTWF4VmFsdWVzIH0gZnJvbSAnLi4vLi4vLi4vaW50ZXJmYWNlcy9wby1jaGFydC1taW4tbWF4LXZhbHVlcy5pbnRlcmZhY2UnO1xyXG5cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdbcG8tY2hhcnQtY29sdW1uXScsXHJcbiAgdGVtcGxhdGVVcmw6ICcuLi9wby1jaGFydC1iYXIuY29tcG9uZW50LnN2ZydcclxufSlcclxuZXhwb3J0IGNsYXNzIFBvQ2hhcnRDb2x1bW5Db21wb25lbnQgZXh0ZW5kcyBQb0NoYXJ0QmFyQmFzZUNvbXBvbmVudCB7XHJcbiAgcmVhZG9ubHkgdG9vbHRpcFBvc2l0aW9uID0gJ3RvcCc7XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBtYXRoc1NlcnZpY2U6IFBvQ2hhcnRNYXRoc1NlcnZpY2UpIHtcclxuICAgIHN1cGVyKG1hdGhzU2VydmljZSk7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgYmFyQ29vcmRpbmF0ZXMoXHJcbiAgICBzZXJpZXNJbmRleDogbnVtYmVyLFxyXG4gICAgc2VyaWVJdGVtRGF0YUluZGV4OiBudW1iZXIsXHJcbiAgICBjb250YWluZXJTaXplOiBQb0NoYXJ0Q29udGFpbmVyU2l6ZSxcclxuICAgIG1pbk1heFNlcmllc1ZhbHVlczogUG9DaGFydE1pbk1heFZhbHVlcyxcclxuICAgIHNlcmllVmFsdWU6IG51bWJlclxyXG4gICkge1xyXG4gICAgY29uc3QgeyBzdmdXaWR0aCwgYXhpc1hMYWJlbFdpZHRoLCBzdmdQbG90dGluZ0FyZWFIZWlnaHQgfSA9IGNvbnRhaW5lclNpemU7XHJcbiAgICBjb25zdCB7IGNoYXJ0QmFyUGxvdEFyZWEsIGJhcldpZHRoLCBzcGFjZUJldHdlZW5CYXJzIH0gPSB0aGlzLmNhbGN1bGF0ZUVsZW1lbnRzTWVhc3VyZW1lbnRzKFxyXG4gICAgICBzdmdXaWR0aCxcclxuICAgICAgYXhpc1hMYWJlbFdpZHRoXHJcbiAgICApO1xyXG5cclxuICAgIGNvbnN0IHsgeDEsIHgyIH0gPSB0aGlzLnhDb29yZGluYXRlcyhcclxuICAgICAgc2VyaWVzSW5kZXgsXHJcbiAgICAgIHNlcmllSXRlbURhdGFJbmRleCxcclxuICAgICAgY2hhcnRCYXJQbG90QXJlYSxcclxuICAgICAgYmFyV2lkdGgsXHJcbiAgICAgIHNwYWNlQmV0d2VlbkJhcnMsXHJcbiAgICAgIGF4aXNYTGFiZWxXaWR0aFxyXG4gICAgKTtcclxuICAgIGNvbnN0IHsgeTEsIHkyIH0gPSB0aGlzLnlDb29yZGluYXRlcyhtaW5NYXhTZXJpZXNWYWx1ZXMsIHN2Z1Bsb3R0aW5nQXJlYUhlaWdodCwgc2VyaWVWYWx1ZSk7XHJcblxyXG4gICAgcmV0dXJuIFsnTScsIHgxLCB5MiwgJ0wnLCB4MiwgeTIsICdMJywgeDIsIHkxLCAnTCcsIHgxLCB5MSwgJ3onXS5qb2luKCcgJyk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIGNhbGN1bGF0ZUVsZW1lbnRzTWVhc3VyZW1lbnRzKFxyXG4gICAgc3ZnV2lkdGg6IFBvQ2hhcnRDb250YWluZXJTaXplWydzdmdXaWR0aCddLFxyXG4gICAgYXhpc1hMYWJlbFdpZHRoOiBQb0NoYXJ0Q29udGFpbmVyU2l6ZVsnYXhpc1hMYWJlbFdpZHRoJ11cclxuICApIHtcclxuICAgIC8vIEZyYcOnw6NvIGRhcyBzw6lyaWVzIGVtIHJlbGHDp8OjbyDDoCBsYXJndXJhIGRhIGNhdGVnb3JpYS4gSW5jcmVtZW50YSArIDIgbmEgZXh0ZW5zw6NvIGRhcyBzw6lyaWVzIHBvaXMgc2UgdHJhdGEgZGEgw6FyZWEgZGUgbWFyZ2VtIGVudHJlIGFzIGNhdGVnb3JpYXMuXHJcbiAgICBjb25zdCBjaGFydEJhclBsb3RBcmVhID0gc3ZnV2lkdGggLSBheGlzWExhYmVsV2lkdGg7XHJcbiAgICBjb25zdCBjYXRlZ29yeVdpZHRoID0gY2hhcnRCYXJQbG90QXJlYSAvIHRoaXMuc2VyaWVzR3JlYXRlckxlbmd0aDtcclxuICAgIGNvbnN0IGNvbHVtbkZyYWN0aW9uID0gY2F0ZWdvcnlXaWR0aCAvICh0aGlzLnNlcmllcy5sZW5ndGggKyAyKTtcclxuXHJcbiAgICAvLyDDgXJlYSBlbnRyZSBhcyBjb2x1bmFzOiByZXRvcm5hIHplcm8gc2UgaG91dmVyIGFwZW5hcyB1bWEgc8OpcmllLlxyXG4gICAgY29uc3Qgc3BhY2VCZXR3ZWVuQmFycyA9IHRoaXMuc2VyaWVzLmxlbmd0aCA+IDEgPyBjb2x1bW5GcmFjdGlvbiAvICh0aGlzLnNlcmllcy5sZW5ndGggKyAyKSA6IDA7XHJcblxyXG4gICAgLy8gU3VidHJhaSBhIGZyYcOnw6NvIGRhcyBzw6lyaWVzIHBlbG8gZXNwYcOnbyBlbnRyZSBhcyBjb2x1bmFzLlxyXG4gICAgY29uc3QgYmFyV2lkdGggPSBjb2x1bW5GcmFjdGlvbiAtIChzcGFjZUJldHdlZW5CYXJzICogKHRoaXMuc2VyaWVzLmxlbmd0aCAtIDEpKSAvICh0aGlzLnNlcmllcy5sZW5ndGggKyAyKTtcclxuXHJcbiAgICByZXR1cm4geyBjaGFydEJhclBsb3RBcmVhLCBiYXJXaWR0aCwgc3BhY2VCZXR3ZWVuQmFycyB9O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSB4Q29vcmRpbmF0ZXMoXHJcbiAgICBzZXJpZXNJbmRleDogbnVtYmVyLFxyXG4gICAgc2VyaWVJdGVtRGF0YUluZGV4OiBudW1iZXIsXHJcbiAgICBjaGFydEJhclBsb3RBcmVhOiBudW1iZXIsXHJcbiAgICBiYXJXaWR0aDogbnVtYmVyLFxyXG4gICAgc3BhY2VCZXR3ZWVuQmFyczogbnVtYmVyLFxyXG4gICAgYXhpc1hMYWJlbFdpZHRoOiBQb0NoYXJ0Q29udGFpbmVyU2l6ZVsnYXhpc1hMYWJlbFdpZHRoJ11cclxuICApIHtcclxuICAgIC8vIEEgw6FyZWEgbGF0ZXJhbCBlbnRyZSBhIGNvbHVuYSBlIGEgbGluaGEgZG8gZWl4byBZIGRvIGdyaWQgc2Vyw6Egc2VtcHJlIGVxdWl2YWxlbnRlIMOgIGxhcmd1cmEgZGEgY29sdW5hLlxyXG4gICAgY29uc3Qgc3BhY2VCZXR3ZWVuQXhpc0FuZEJhcnMgPSBiYXJXaWR0aDtcclxuICAgIGNvbnN0IHhSYXRpbyA9IHNlcmllSXRlbURhdGFJbmRleCAvIHRoaXMuc2VyaWVzR3JlYXRlckxlbmd0aDtcclxuXHJcbiAgICBjb25zdCB4MSA9IE1hdGgucm91bmQoXHJcbiAgICAgIGF4aXNYTGFiZWxXaWR0aCArXHJcbiAgICAgICAgY2hhcnRCYXJQbG90QXJlYSAqIHhSYXRpbyArXHJcbiAgICAgICAgc3BhY2VCZXR3ZWVuQXhpc0FuZEJhcnMgK1xyXG4gICAgICAgIGJhcldpZHRoICogc2VyaWVzSW5kZXggK1xyXG4gICAgICAgIHNwYWNlQmV0d2VlbkJhcnMgKiBzZXJpZXNJbmRleFxyXG4gICAgKTtcclxuXHJcbiAgICBjb25zdCB4MiA9IE1hdGgucm91bmQoeDEgKyBiYXJXaWR0aCk7XHJcblxyXG4gICAgcmV0dXJuIHsgeDEsIHgyIH07XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHlDb29yZGluYXRlcyhtaW5NYXhTZXJpZXNWYWx1ZXM6IFBvQ2hhcnRNaW5NYXhWYWx1ZXMsIHN2Z1Bsb3R0aW5nQXJlYUhlaWdodDogbnVtYmVyLCBzZXJpZVZhbHVlOiBudW1iZXIpIHtcclxuICAgIGNvbnN0IHsgbWluVmFsdWUgfSA9IG1pbk1heFNlcmllc1ZhbHVlcztcclxuICAgIGNvbnN0IG1pblZhbHVlUGVyY2VudGFnZSA9IHRoaXMubWF0aHNTZXJ2aWNlLmdldFNlcmllUGVyY2VudGFnZShtaW5NYXhTZXJpZXNWYWx1ZXMsIG1pblZhbHVlIDwgMCA/IDAgOiBtaW5WYWx1ZSk7XHJcbiAgICBjb25zdCB5MSA9IE1hdGgucm91bmQoXHJcbiAgICAgIHN2Z1Bsb3R0aW5nQXJlYUhlaWdodCAtIHN2Z1Bsb3R0aW5nQXJlYUhlaWdodCAqIG1pblZhbHVlUGVyY2VudGFnZSArIFBvQ2hhcnRQbG90QXJlYVBhZGRpbmdUb3BcclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgeVJhdGlvID0gdGhpcy5tYXRoc1NlcnZpY2UuZ2V0U2VyaWVQZXJjZW50YWdlKG1pbk1heFNlcmllc1ZhbHVlcywgc2VyaWVWYWx1ZSk7XHJcbiAgICBjb25zdCB5MiA9IE1hdGgucm91bmQoc3ZnUGxvdHRpbmdBcmVhSGVpZ2h0IC0gc3ZnUGxvdHRpbmdBcmVhSGVpZ2h0ICogeVJhdGlvICsgUG9DaGFydFBsb3RBcmVhUGFkZGluZ1RvcCk7XHJcblxyXG4gICAgcmV0dXJuIHsgeTEsIHkyIH07XHJcbiAgfVxyXG59XHJcbiJdfQ==