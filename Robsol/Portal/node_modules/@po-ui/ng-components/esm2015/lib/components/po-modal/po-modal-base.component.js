import { Input, EventEmitter, Directive } from '@angular/core';
import { convertToBoolean } from './../../utils/util';
import { PoLanguageService } from '../../services/po-language/po-language.service';
import { poModalLiterals } from './po-modal.literals';
/**
 * @description
 *
 * O componente `po-modal` é utilizado para incluir conteúdos rápidos e informativos.
 *
 * No cabeçalho do componente é possível definir um título e como também permite ocultar o ícone de fechamento da modal.
 *
 * Em seu corpo é possível definir um conteúdo informativo, podendo utilizar componentes como por exemplo `po-chart`,
 * `po-table` e os demais componentes do PO.
 *
 * No rodapé encontram-se os botões de ação primária e secundária, no qual permitem definir uma ação e um rótulo, bem como
 * definir um estado de carregando e / ou desabilitado e / ou definir o botão com o tipo *danger*. Também é possível utilizar
 * o componente [`PoModalFooter`](/documentation/po-modal-footer).
 *
 * > É possível fechar a modal através da tecla *ESC*, quando a propriedade `p-hide-close` não estiver habilitada.
 */
export class PoModalBaseComponent {
    constructor(poLanguageService) {
        // Controla se a modal fica oculto ou visível, por padrão é oculto
        this.isHidden = true;
        // Event emmiter para quando a modal é fechada pelo 'X'.
        this.onXClosed = new EventEmitter();
        this._hideClose = false;
        this._size = 'md';
        /**
         * Define o fechamento da modal ao clicar fora da mesma.
         * Informe o valor `true` para ativar o fechamento ao clicar fora da modal.
         */
        // eslint-disable-next-line @typescript-eslint/member-ordering
        this.clickOut = false;
        this.language = poLanguageService.getShortLanguage();
        this.literals = Object.assign({}, poModalLiterals[this.language]);
    }
    /**
     * Define o tamanho da modal.
     *
     * Valores válidos:
     *  - `sm` (pequeno)
     *  - `md` (médio)
     *  - `lg` (grande)
     *  - `xl` (extra grande)
     *  - `auto` (automático)
     *
     * > Quando informado `auto` a modal calculará automaticamente seu tamanho baseado em seu conteúdo.
     * Caso não seja informado um valor, a modal terá o tamanho definido como `md`.
     *
     * > Todas as opções de tamanho possuem uma largura máxima de **768px**.
     */
    set size(value) {
        const sizes = ['sm', 'md', 'lg', 'xl', 'auto'];
        this._size = sizes.indexOf(value) > -1 ? value : 'md';
    }
    get size() {
        return this._size;
    }
    set setClickOut(value) {
        this.clickOut = value === '' ? false : convertToBoolean(value);
    }
    /**
     * @optional
     *
     * @description
     *
     * Oculta o ícone de fechar do cabeçalho da modal.
     *
     * > Caso a propriedade estiver habilitada, não será possível fechar a modal através da tecla *ESC*.
     *
     * @default `false`
     */
    set hideClose(value) {
        this._hideClose = convertToBoolean(value);
    }
    get hideClose() {
        return this._hideClose;
    }
    /** Função para fechar a modal. */
    close(xClosed = false) {
        this.isHidden = true;
        if (xClosed) {
            this.onXClosed.emit(xClosed);
        }
    }
    /** Função para abrir a modal. */
    open() {
        this.validPrimaryAction();
        this.isHidden = false;
    }
    validPrimaryAction() {
        if (!this.primaryAction) {
            this.primaryAction = {
                action: () => this.close(),
                label: this.literals.close
            };
        }
        if (!this.primaryAction['action']) {
            this.primaryAction['action'] = () => this.close();
        }
        if (!this.primaryAction['label']) {
            this.primaryAction['label'] = this.literals.close;
        }
    }
}
PoModalBaseComponent.decorators = [
    { type: Directive }
];
PoModalBaseComponent.ctorParameters = () => [
    { type: PoLanguageService }
];
PoModalBaseComponent.propDecorators = {
    title: [{ type: Input, args: ['p-title',] }],
    primaryAction: [{ type: Input, args: ['p-primary-action',] }],
    secondaryAction: [{ type: Input, args: ['p-secondary-action',] }],
    size: [{ type: Input, args: ['p-size',] }],
    setClickOut: [{ type: Input, args: ['p-click-out',] }],
    hideClose: [{ type: Input, args: ['p-hide-close',] }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tbW9kYWwtYmFzZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy91aS9zcmMvbGliL2NvbXBvbmVudHMvcG8tbW9kYWwvcG8tbW9kYWwtYmFzZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLEtBQUssRUFBRSxZQUFZLEVBQUUsU0FBUyxFQUFFLE1BQU0sZUFBZSxDQUFDO0FBRS9ELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLG9CQUFvQixDQUFDO0FBR3RELE9BQU8sRUFBRSxpQkFBaUIsRUFBRSxNQUFNLGdEQUFnRCxDQUFDO0FBQ25GLE9BQU8sRUFBRSxlQUFlLEVBQUUsTUFBTSxxQkFBcUIsQ0FBQztBQUV0RDs7Ozs7Ozs7Ozs7Ozs7O0dBZUc7QUFFSCxNQUFNLE9BQU8sb0JBQW9CO0lBK0UvQixZQUFZLGlCQUFvQztRQTlEaEQsa0VBQWtFO1FBQ2xFLGFBQVEsR0FBRyxJQUFJLENBQUM7UUFFaEIsd0RBQXdEO1FBQ2pELGNBQVMsR0FBRyxJQUFJLFlBQVksRUFBVyxDQUFDO1FBRXZDLGVBQVUsR0FBYSxLQUFLLENBQUM7UUFDN0IsVUFBSyxHQUFZLElBQUksQ0FBQztRQTBCOUI7OztXQUdHO1FBQ0gsOERBQThEO1FBQzlELGFBQVEsR0FBYSxLQUFLLENBQUM7UUF5QnpCLElBQUksQ0FBQyxRQUFRLEdBQUcsaUJBQWlCLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztRQUVyRCxJQUFJLENBQUMsUUFBUSxxQkFDUixlQUFlLENBQUMsSUFBSSxDQUFDLFFBQVEsQ0FBQyxDQUNsQyxDQUFDO0lBQ0osQ0FBQztJQTNERDs7Ozs7Ozs7Ozs7Ozs7T0FjRztJQUNILElBQXFCLElBQUksQ0FBQyxLQUFhO1FBQ3JDLE1BQU0sS0FBSyxHQUFHLENBQUMsSUFBSSxFQUFFLElBQUksRUFBRSxJQUFJLEVBQUUsSUFBSSxFQUFFLE1BQU0sQ0FBQyxDQUFDO1FBQy9DLElBQUksQ0FBQyxLQUFLLEdBQUcsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsR0FBRyxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUM7SUFDeEQsQ0FBQztJQUVELElBQUksSUFBSTtRQUNOLE9BQU8sSUFBSSxDQUFDLEtBQUssQ0FBQztJQUNwQixDQUFDO0lBUUQsSUFBMEIsV0FBVyxDQUFDLEtBQXVCO1FBQzNELElBQUksQ0FBQyxRQUFRLEdBQUcsS0FBSyxLQUFLLEVBQUUsQ0FBQyxDQUFDLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQyxLQUFLLENBQUMsQ0FBQztJQUNqRSxDQUFDO0lBRUQ7Ozs7Ozs7Ozs7T0FVRztJQUNILElBQTJCLFNBQVMsQ0FBQyxLQUFjO1FBQ2pELElBQUksQ0FBQyxVQUFVLEdBQUcsZ0JBQWdCLENBQUMsS0FBSyxDQUFDLENBQUM7SUFDNUMsQ0FBQztJQUVELElBQUksU0FBUztRQUNYLE9BQU8sSUFBSSxDQUFDLFVBQVUsQ0FBQztJQUN6QixDQUFDO0lBVUQsa0NBQWtDO0lBQ2xDLEtBQUssQ0FBQyxPQUFPLEdBQUcsS0FBSztRQUNuQixJQUFJLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQztRQUNyQixJQUFJLE9BQU8sRUFBRTtZQUNYLElBQUksQ0FBQyxTQUFTLENBQUMsSUFBSSxDQUFDLE9BQU8sQ0FBQyxDQUFDO1NBQzlCO0lBQ0gsQ0FBQztJQUVELGlDQUFpQztJQUNqQyxJQUFJO1FBQ0YsSUFBSSxDQUFDLGtCQUFrQixFQUFFLENBQUM7UUFFMUIsSUFBSSxDQUFDLFFBQVEsR0FBRyxLQUFLLENBQUM7SUFDeEIsQ0FBQztJQUVELGtCQUFrQjtRQUNoQixJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsRUFBRTtZQUN2QixJQUFJLENBQUMsYUFBYSxHQUFHO2dCQUNuQixNQUFNLEVBQUUsR0FBRyxFQUFFLENBQUMsSUFBSSxDQUFDLEtBQUssRUFBRTtnQkFDMUIsS0FBSyxFQUFFLElBQUksQ0FBQyxRQUFRLENBQUMsS0FBSzthQUMzQixDQUFDO1NBQ0g7UUFFRCxJQUFJLENBQUMsSUFBSSxDQUFDLGFBQWEsQ0FBQyxRQUFRLENBQUMsRUFBRTtZQUNqQyxJQUFJLENBQUMsYUFBYSxDQUFDLFFBQVEsQ0FBQyxHQUFHLEdBQUcsRUFBRSxDQUFDLElBQUksQ0FBQyxLQUFLLEVBQUUsQ0FBQztTQUNuRDtRQUNELElBQUksQ0FBQyxJQUFJLENBQUMsYUFBYSxDQUFDLE9BQU8sQ0FBQyxFQUFFO1lBQ2hDLElBQUksQ0FBQyxhQUFhLENBQUMsT0FBTyxDQUFDLEdBQUcsSUFBSSxDQUFDLFFBQVEsQ0FBQyxLQUFLLENBQUM7U0FDbkQ7SUFDSCxDQUFDOzs7WUFySEYsU0FBUzs7O1lBbkJELGlCQUFpQjs7O29CQXNCdkIsS0FBSyxTQUFDLFNBQVM7NEJBT2YsS0FBSyxTQUFDLGtCQUFrQjs4QkFHeEIsS0FBSyxTQUFDLG9CQUFvQjttQkE2QjFCLEtBQUssU0FBQyxRQUFROzBCQWVkLEtBQUssU0FBQyxhQUFhO3dCQWVuQixLQUFLLFNBQUMsY0FBYyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElucHV0LCBFdmVudEVtaXR0ZXIsIERpcmVjdGl2ZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5cclxuaW1wb3J0IHsgY29udmVydFRvQm9vbGVhbiB9IGZyb20gJy4vLi4vLi4vdXRpbHMvdXRpbCc7XHJcbmltcG9ydCB7IFBvTW9kYWxBY3Rpb24gfSBmcm9tICcuL3BvLW1vZGFsLWFjdGlvbi5pbnRlcmZhY2UnO1xyXG5cclxuaW1wb3J0IHsgUG9MYW5ndWFnZVNlcnZpY2UgfSBmcm9tICcuLi8uLi9zZXJ2aWNlcy9wby1sYW5ndWFnZS9wby1sYW5ndWFnZS5zZXJ2aWNlJztcclxuaW1wb3J0IHsgcG9Nb2RhbExpdGVyYWxzIH0gZnJvbSAnLi9wby1tb2RhbC5saXRlcmFscyc7XHJcblxyXG4vKipcclxuICogQGRlc2NyaXB0aW9uXHJcbiAqXHJcbiAqIE8gY29tcG9uZW50ZSBgcG8tbW9kYWxgIMOpIHV0aWxpemFkbyBwYXJhIGluY2x1aXIgY29udGXDumRvcyByw6FwaWRvcyBlIGluZm9ybWF0aXZvcy5cclxuICpcclxuICogTm8gY2FiZcOnYWxobyBkbyBjb21wb25lbnRlIMOpIHBvc3PDrXZlbCBkZWZpbmlyIHVtIHTDrXR1bG8gZSBjb21vIHRhbWLDqW0gcGVybWl0ZSBvY3VsdGFyIG8gw61jb25lIGRlIGZlY2hhbWVudG8gZGEgbW9kYWwuXHJcbiAqXHJcbiAqIEVtIHNldSBjb3JwbyDDqSBwb3Nzw612ZWwgZGVmaW5pciB1bSBjb250ZcO6ZG8gaW5mb3JtYXRpdm8sIHBvZGVuZG8gdXRpbGl6YXIgY29tcG9uZW50ZXMgY29tbyBwb3IgZXhlbXBsbyBgcG8tY2hhcnRgLFxyXG4gKiBgcG8tdGFibGVgIGUgb3MgZGVtYWlzIGNvbXBvbmVudGVzIGRvIFBPLlxyXG4gKlxyXG4gKiBObyByb2RhcMOpIGVuY29udHJhbS1zZSBvcyBib3TDtWVzIGRlIGHDp8OjbyBwcmltw6FyaWEgZSBzZWN1bmTDoXJpYSwgbm8gcXVhbCBwZXJtaXRlbSBkZWZpbmlyIHVtYSBhw6fDo28gZSB1bSByw7N0dWxvLCBiZW0gY29tb1xyXG4gKiBkZWZpbmlyIHVtIGVzdGFkbyBkZSBjYXJyZWdhbmRvIGUgLyBvdSBkZXNhYmlsaXRhZG8gZSAvIG91IGRlZmluaXIgbyBib3TDo28gY29tIG8gdGlwbyAqZGFuZ2VyKi4gVGFtYsOpbSDDqSBwb3Nzw612ZWwgdXRpbGl6YXJcclxuICogbyBjb21wb25lbnRlIFtgUG9Nb2RhbEZvb3RlcmBdKC9kb2N1bWVudGF0aW9uL3BvLW1vZGFsLWZvb3RlcikuXHJcbiAqXHJcbiAqID4gw4kgcG9zc8OtdmVsIGZlY2hhciBhIG1vZGFsIGF0cmF2w6lzIGRhIHRlY2xhICpFU0MqLCBxdWFuZG8gYSBwcm9wcmllZGFkZSBgcC1oaWRlLWNsb3NlYCBuw6NvIGVzdGl2ZXIgaGFiaWxpdGFkYS5cclxuICovXHJcbkBEaXJlY3RpdmUoKVxyXG5leHBvcnQgY2xhc3MgUG9Nb2RhbEJhc2VDb21wb25lbnQge1xyXG4gIC8qKiBUw610dWxvIGRhIG1vZGFsLiAqL1xyXG4gIEBJbnB1dCgncC10aXRsZScpIHRpdGxlOiBzdHJpbmc7XHJcblxyXG4gIC8qKlxyXG4gICAqIERldmUgc2VyIGRlZmluaWRvIHVtIG9iamV0byBxdWUgaW1wbGVtZW50YSBhIGludGVyZmFjZSBgUG9Nb2RhbEFjdGlvbmAgY29udGVuZG8gYSBsYWJlbCBlIGEgZnVuw6fDo28gZGEgcHJpbWVpcmEgYcOnw6NvLlxyXG4gICAqIENhc28gZXN0YSBwcm9wcmllZGFkZSBuw6NvIHNlamEgZGVmaW5pZGEgb3UgZXN0ZWphIGluY29tcGxldGEsIGF1dG9tYXRpY2FtZW50ZSBzZXLDoSBhZGljaW9uYWRvIHVtIGJvdMOjbyBkZSBhw6fDo28gY29tXHJcbiAgICogYSBmdW7Dp8OjbyBkZSBmZWNoYXIgYSBtb2RhbC5cclxuICAgKi9cclxuICBASW5wdXQoJ3AtcHJpbWFyeS1hY3Rpb24nKSBwcmltYXJ5QWN0aW9uPzogUG9Nb2RhbEFjdGlvbjtcclxuXHJcbiAgLyoqIERldmUgc2VyIGRlZmluaWRvIHVtIG9iamV0byBxdWUgaW1wbGVtZW50YSBhIGludGVyZmFjZSBgUG9Nb2RhbEFjdGlvbmAgY29udGVuZG8gYSBsYWJlbCBlIGEgZnVuw6fDo28gZGEgc2VndW5kYSBhw6fDo28uICovXHJcbiAgQElucHV0KCdwLXNlY29uZGFyeS1hY3Rpb24nKSBzZWNvbmRhcnlBY3Rpb24/OiBQb01vZGFsQWN0aW9uO1xyXG5cclxuICBsYW5ndWFnZTtcclxuICBsaXRlcmFscztcclxuXHJcbiAgLy8gQ29udHJvbGEgc2UgYSBtb2RhbCBmaWNhIG9jdWx0byBvdSB2aXPDrXZlbCwgcG9yIHBhZHLDo28gw6kgb2N1bHRvXHJcbiAgaXNIaWRkZW4gPSB0cnVlO1xyXG5cclxuICAvLyBFdmVudCBlbW1pdGVyIHBhcmEgcXVhbmRvIGEgbW9kYWwgw6kgZmVjaGFkYSBwZWxvICdYJy5cclxuICBwdWJsaWMgb25YQ2xvc2VkID0gbmV3IEV2ZW50RW1pdHRlcjxib29sZWFuPigpO1xyXG5cclxuICBwcml2YXRlIF9oaWRlQ2xvc2U/OiBib29sZWFuID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSBfc2l6ZT86IHN0cmluZyA9ICdtZCc7XHJcblxyXG4gIC8qKlxyXG4gICAqIERlZmluZSBvIHRhbWFuaG8gZGEgbW9kYWwuXHJcbiAgICpcclxuICAgKiBWYWxvcmVzIHbDoWxpZG9zOlxyXG4gICAqICAtIGBzbWAgKHBlcXVlbm8pXHJcbiAgICogIC0gYG1kYCAobcOpZGlvKVxyXG4gICAqICAtIGBsZ2AgKGdyYW5kZSlcclxuICAgKiAgLSBgeGxgIChleHRyYSBncmFuZGUpXHJcbiAgICogIC0gYGF1dG9gIChhdXRvbcOhdGljbylcclxuICAgKlxyXG4gICAqID4gUXVhbmRvIGluZm9ybWFkbyBgYXV0b2AgYSBtb2RhbCBjYWxjdWxhcsOhIGF1dG9tYXRpY2FtZW50ZSBzZXUgdGFtYW5obyBiYXNlYWRvIGVtIHNldSBjb250ZcO6ZG8uXHJcbiAgICogQ2FzbyBuw6NvIHNlamEgaW5mb3JtYWRvIHVtIHZhbG9yLCBhIG1vZGFsIHRlcsOhIG8gdGFtYW5obyBkZWZpbmlkbyBjb21vIGBtZGAuXHJcbiAgICpcclxuICAgKiA+IFRvZGFzIGFzIG9ww6fDtWVzIGRlIHRhbWFuaG8gcG9zc3VlbSB1bWEgbGFyZ3VyYSBtw6F4aW1hIGRlICoqNzY4cHgqKi5cclxuICAgKi9cclxuICBASW5wdXQoJ3Atc2l6ZScpIHNldCBzaXplKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IHNpemVzID0gWydzbScsICdtZCcsICdsZycsICd4bCcsICdhdXRvJ107XHJcbiAgICB0aGlzLl9zaXplID0gc2l6ZXMuaW5kZXhPZih2YWx1ZSkgPiAtMSA/IHZhbHVlIDogJ21kJztcclxuICB9XHJcblxyXG4gIGdldCBzaXplKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3NpemU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBEZWZpbmUgbyBmZWNoYW1lbnRvIGRhIG1vZGFsIGFvIGNsaWNhciBmb3JhIGRhIG1lc21hLlxyXG4gICAqIEluZm9ybWUgbyB2YWxvciBgdHJ1ZWAgcGFyYSBhdGl2YXIgbyBmZWNoYW1lbnRvIGFvIGNsaWNhciBmb3JhIGRhIG1vZGFsLlxyXG4gICAqL1xyXG4gIC8vIGVzbGludC1kaXNhYmxlLW5leHQtbGluZSBAdHlwZXNjcmlwdC1lc2xpbnQvbWVtYmVyLW9yZGVyaW5nXHJcbiAgY2xpY2tPdXQ/OiBib29sZWFuID0gZmFsc2U7XHJcbiAgQElucHV0KCdwLWNsaWNrLW91dCcpIHNldCBzZXRDbGlja091dCh2YWx1ZTogYm9vbGVhbiB8IHN0cmluZykge1xyXG4gICAgdGhpcy5jbGlja091dCA9IHZhbHVlID09PSAnJyA/IGZhbHNlIDogY29udmVydFRvQm9vbGVhbih2YWx1ZSk7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAb3B0aW9uYWxcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqXHJcbiAgICogT2N1bHRhIG8gw61jb25lIGRlIGZlY2hhciBkbyBjYWJlw6dhbGhvIGRhIG1vZGFsLlxyXG4gICAqXHJcbiAgICogPiBDYXNvIGEgcHJvcHJpZWRhZGUgZXN0aXZlciBoYWJpbGl0YWRhLCBuw6NvIHNlcsOhIHBvc3PDrXZlbCBmZWNoYXIgYSBtb2RhbCBhdHJhdsOpcyBkYSB0ZWNsYSAqRVNDKi5cclxuICAgKlxyXG4gICAqIEBkZWZhdWx0IGBmYWxzZWBcclxuICAgKi9cclxuICBASW5wdXQoJ3AtaGlkZS1jbG9zZScpIHNldCBoaWRlQ2xvc2UodmFsdWU6IGJvb2xlYW4pIHtcclxuICAgIHRoaXMuX2hpZGVDbG9zZSA9IGNvbnZlcnRUb0Jvb2xlYW4odmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGhpZGVDbG9zZSgpIHtcclxuICAgIHJldHVybiB0aGlzLl9oaWRlQ2xvc2U7XHJcbiAgfVxyXG5cclxuICBjb25zdHJ1Y3Rvcihwb0xhbmd1YWdlU2VydmljZTogUG9MYW5ndWFnZVNlcnZpY2UpIHtcclxuICAgIHRoaXMubGFuZ3VhZ2UgPSBwb0xhbmd1YWdlU2VydmljZS5nZXRTaG9ydExhbmd1YWdlKCk7XHJcblxyXG4gICAgdGhpcy5saXRlcmFscyA9IHtcclxuICAgICAgLi4ucG9Nb2RhbExpdGVyYWxzW3RoaXMubGFuZ3VhZ2VdXHJcbiAgICB9O1xyXG4gIH1cclxuXHJcbiAgLyoqIEZ1bsOnw6NvIHBhcmEgZmVjaGFyIGEgbW9kYWwuICovXHJcbiAgY2xvc2UoeENsb3NlZCA9IGZhbHNlKTogdm9pZCB7XHJcbiAgICB0aGlzLmlzSGlkZGVuID0gdHJ1ZTtcclxuICAgIGlmICh4Q2xvc2VkKSB7XHJcbiAgICAgIHRoaXMub25YQ2xvc2VkLmVtaXQoeENsb3NlZCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKiogRnVuw6fDo28gcGFyYSBhYnJpciBhIG1vZGFsLiAqL1xyXG4gIG9wZW4oKTogdm9pZCB7XHJcbiAgICB0aGlzLnZhbGlkUHJpbWFyeUFjdGlvbigpO1xyXG5cclxuICAgIHRoaXMuaXNIaWRkZW4gPSBmYWxzZTtcclxuICB9XHJcblxyXG4gIHZhbGlkUHJpbWFyeUFjdGlvbigpIHtcclxuICAgIGlmICghdGhpcy5wcmltYXJ5QWN0aW9uKSB7XHJcbiAgICAgIHRoaXMucHJpbWFyeUFjdGlvbiA9IHtcclxuICAgICAgICBhY3Rpb246ICgpID0+IHRoaXMuY2xvc2UoKSxcclxuICAgICAgICBsYWJlbDogdGhpcy5saXRlcmFscy5jbG9zZVxyXG4gICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghdGhpcy5wcmltYXJ5QWN0aW9uWydhY3Rpb24nXSkge1xyXG4gICAgICB0aGlzLnByaW1hcnlBY3Rpb25bJ2FjdGlvbiddID0gKCkgPT4gdGhpcy5jbG9zZSgpO1xyXG4gICAgfVxyXG4gICAgaWYgKCF0aGlzLnByaW1hcnlBY3Rpb25bJ2xhYmVsJ10pIHtcclxuICAgICAgdGhpcy5wcmltYXJ5QWN0aW9uWydsYWJlbCddID0gdGhpcy5saXRlcmFscy5jbG9zZTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl19