import { Component, EventEmitter, Input, Output } from '@angular/core';
import { browserLanguage, convertToBoolean, isTypeof } from './../../../utils/util';
import { poLocaleDefault } from './../../../services/po-language/po-language.constant';
import { PoStepperOrientation } from '../enums/po-stepper-orientation.enum';
import { PoStepperStatus } from '../enums/po-stepper-status.enum';
const poStepperStepSizeDefault = 24;
const poStepperStepSizeMax = 64;
const poStepLiteralsDefault = {
    en: { label: 'Step' },
    es: { label: 'Paso' },
    pt: { label: 'Passo' }
};
/**
 * @docsPrivate
 *
 * @description
 *
 * Componente que representa um *step* contendo as ligações das laterais (`po-stepper-step-bar`) e a label.
 */
export class PoStepperStepComponent {
    constructor() {
        // Evento que será emitido quando o status do *step* estiver ativo (`PoStepperStatus.Active`).
        this.activated = new EventEmitter();
        // Evento que será emitido ao clicar no *step*.
        this.click = new EventEmitter();
        // Evento que será emitido ao focar no *step* e pressionar a tecla *enter*.
        this.enter = new EventEmitter();
        this.literals = Object.assign(Object.assign({}, poStepLiteralsDefault[poLocaleDefault]), poStepLiteralsDefault[browserLanguage()]);
        this._stepIcons = false;
        this._stepSize = poStepperStepSizeDefault;
    }
    // Label do *step*.
    set label(value) {
        this._label = isTypeof(value, 'string') ? value : `${this.literals.label} ${this.circleContent}`;
    }
    get label() {
        return this._label;
    }
    // Define o estado de exibição.
    set status(value) {
        this._status = value ? value : undefined;
        if (this.status === PoStepperStatus.Active) {
            this.activated.emit();
        }
    }
    get status() {
        return this._status;
    }
    set stepIcons(stepIcons) {
        this._stepIcons = convertToBoolean(stepIcons);
    }
    get stepIcons() {
        return this._stepIcons;
    }
    // Tamanho do `step` em *pixels*, possibilitando um maior destaque.
    // O valor informado deve ser entre `24` e `64`.
    set stepSize(value) {
        this._stepSize =
            value >= poStepperStepSizeDefault && value <= poStepperStepSizeMax ? value : poStepperStepSizeDefault;
    }
    get stepSize() {
        return this._stepSize;
    }
    get halfStepSize() {
        return this.stepSize / 2;
    }
    get isVerticalOrientation() {
        return this.orientation === PoStepperOrientation.Vertical;
    }
    get marginHorizontalBar() {
        return this.isVerticalOrientation ? undefined : this.halfStepSize;
    }
    getStatusClass(status) {
        switch (status) {
            case PoStepperStatus.Active:
                return 'po-stepper-step-default';
            case PoStepperStatus.Disabled:
                return 'po-stepper-step-disabled';
            case PoStepperStatus.Done:
                return 'po-stepper-step-default';
            case PoStepperStatus.Error:
                return 'po-stepper-step-error';
            default:
                return 'po-stepper-step-default';
        }
    }
    onClick() {
        if (this.status !== PoStepperStatus.Disabled) {
            this.click.emit();
        }
    }
    onEnter() {
        if (this.status !== PoStepperStatus.Disabled) {
            this.enter.emit();
        }
    }
}
PoStepperStepComponent.decorators = [
    { type: Component, args: [{
                selector: 'po-stepper-step',
                template: "<div class=\"po-stepper-step\" [ngClass]=\"getStatusClass(status)\" (click)=\"onClick()\" (keydown.enter)=\"onEnter()\">\r\n  <div class=\"po-stepper-step-container\" [style.width.px]=\"isVerticalOrientation ? stepSize : undefined\">\r\n    <div\r\n      [class.po-stepper-step-bar-top]=\"isVerticalOrientation\"\r\n      [class.po-stepper-step-bar-left]=\"!isVerticalOrientation\"\r\n      [style.margin-right.px]=\"marginHorizontalBar\"\r\n    ></div>\r\n\r\n    <po-stepper-circle [p-content]=\"circleContent\" [p-icons]=\"stepIcons\" [p-size]=\"stepSize\" [p-status]=\"status\">\r\n    </po-stepper-circle>\r\n\r\n    <div\r\n      [class.po-stepper-step-bar-bottom]=\"isVerticalOrientation\"\r\n      [class.po-stepper-step-bar-right]=\"!isVerticalOrientation\"\r\n      [class.po-stepper-step-dashed-border]=\"nextStatus === 'disabled' && !isVerticalOrientation\"\r\n      [class.po-stepper-step-dashed-border-vertical]=\"nextStatus === 'disabled' && isVerticalOrientation\"\r\n      [style.margin-left.px]=\"marginHorizontalBar\"\r\n    ></div>\r\n  </div>\r\n\r\n  <po-stepper-label class=\"po-stepper-step-label-position\" [p-content]=\"label\"> </po-stepper-label>\r\n</div>\r\n"
            },] }
];
PoStepperStepComponent.propDecorators = {
    circleContent: [{ type: Input, args: ['p-circle-content',] }],
    orientation: [{ type: Input, args: ['p-orientation',] }],
    nextStatus: [{ type: Input, args: ['p-next-status',] }],
    activated: [{ type: Output, args: ['p-activated',] }],
    click: [{ type: Output, args: ['p-click',] }],
    enter: [{ type: Output, args: ['p-enter',] }],
    label: [{ type: Input, args: ['p-label',] }],
    status: [{ type: Input, args: ['p-status',] }],
    stepIcons: [{ type: Input, args: ['p-step-icons',] }],
    stepSize: [{ type: Input, args: ['p-step-size',] }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tc3RlcHBlci1zdGVwLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3VpL3NyYy9saWIvY29tcG9uZW50cy9wby1zdGVwcGVyL3BvLXN0ZXBwZXItc3RlcC9wby1zdGVwcGVyLXN0ZXAuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFdkUsT0FBTyxFQUFFLGVBQWUsRUFBRSxnQkFBZ0IsRUFBRSxRQUFRLEVBQUUsTUFBTSx1QkFBdUIsQ0FBQztBQUNwRixPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sc0RBQXNELENBQUM7QUFDdkYsT0FBTyxFQUFFLG9CQUFvQixFQUFFLE1BQU0sc0NBQXNDLENBQUM7QUFDNUUsT0FBTyxFQUFFLGVBQWUsRUFBRSxNQUFNLGlDQUFpQyxDQUFDO0FBRWxFLE1BQU0sd0JBQXdCLEdBQUcsRUFBRSxDQUFDO0FBQ3BDLE1BQU0sb0JBQW9CLEdBQUcsRUFBRSxDQUFDO0FBQ2hDLE1BQU0scUJBQXFCLEdBQUc7SUFDNUIsRUFBRSxFQUFFLEVBQUUsS0FBSyxFQUFFLE1BQU0sRUFBRTtJQUNyQixFQUFFLEVBQUUsRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFO0lBQ3JCLEVBQUUsRUFBRSxFQUFFLEtBQUssRUFBRSxPQUFPLEVBQUU7Q0FDdkIsQ0FBQztBQUVGOzs7Ozs7R0FNRztBQUtILE1BQU0sT0FBTyxzQkFBc0I7SUFKbkM7UUFjRSw4RkFBOEY7UUFDdkUsY0FBUyxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7UUFFM0QsK0NBQStDO1FBQzVCLFVBQUssR0FBRyxJQUFJLFlBQVksRUFBTyxDQUFDO1FBRW5ELDJFQUEyRTtRQUN4RCxVQUFLLEdBQUcsSUFBSSxZQUFZLEVBQU8sQ0FBQztRQUUxQyxhQUFR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LEVBQUUsQ0FBQztTQUNuQjtJQUNILENBQUM7OztZQS9HRixTQUFTLFNBQUM7Z0JBQ1QsUUFBUSxFQUFFLGlCQUFpQjtnQkFDM0IsZ3JDQUE2QzthQUM5Qzs7OzRCQUdFLEtBQUssU0FBQyxrQkFBa0I7MEJBR3hCLEtBQUssU0FBQyxlQUFlO3lCQUdyQixLQUFLLFNBQUMsZUFBZTt3QkFHckIsTUFBTSxTQUFDLGFBQWE7b0JBR3BCLE1BQU0sU0FBQyxTQUFTO29CQUdoQixNQUFNLFNBQUMsU0FBUztvQkFhaEIsS0FBSyxTQUFDLFNBQVM7cUJBU2YsS0FBSyxTQUFDLFVBQVU7d0JBWWhCLEtBQUssU0FBQyxjQUFjO3VCQVVwQixLQUFLLFNBQUMsYUFBYSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgRXZlbnRFbWl0dGVyLCBJbnB1dCwgT3V0cHV0IH0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5pbXBvcnQgeyBicm93c2VyTGFuZ3VhZ2UsIGNvbnZlcnRUb0Jvb2xlYW4sIGlzVHlwZW9mIH0gZnJvbSAnLi8uLi8uLi8uLi91dGlscy91dGlsJztcclxuaW1wb3J0IHsgcG9Mb2NhbGVEZWZhdWx0IH0gZnJvbSAnLi8uLi8uLi8uLi9zZXJ2aWNlcy9wby1sYW5ndWFnZS9wby1sYW5ndWFnZS5jb25zdGFudCc7XHJcbmltcG9ydCB7IFBvU3RlcHBlck9yaWVudGF0aW9uIH0gZnJvbSAnLi4vZW51bXMvcG8tc3RlcHBlci1vcmllbnRhdGlvbi5lbnVtJztcclxuaW1wb3J0IHsgUG9TdGVwcGVyU3RhdHVzIH0gZnJvbSAnLi4vZW51bXMvcG8tc3RlcHBlci1zdGF0dXMuZW51bSc7XHJcblxyXG5jb25zdCBwb1N0ZXBwZXJTdGVwU2l6ZURlZmF1bHQgPSAyNDtcclxuY29uc3QgcG9TdGVwcGVyU3RlcFNpemVNYXggPSA2NDtcclxuY29uc3QgcG9TdGVwTGl0ZXJhbHNEZWZhdWx0ID0ge1xyXG4gIGVuOiB7IGxhYmVsOiAnU3RlcCcgfSxcclxuICBlczogeyBsYWJlbDogJ1Bhc28nIH0sXHJcbiAgcHQ6IHsgbGFiZWw6ICdQYXNzbycgfVxyXG59O1xyXG5cclxuLyoqXHJcbiAqIEBkb2NzUHJpdmF0ZVxyXG4gKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICogQ29tcG9uZW50ZSBxdWUgcmVwcmVzZW50YSB1bSAqc3RlcCogY29udGVuZG8gYXMgbGlnYcOnw7VlcyBkYXMgbGF0ZXJhaXMgKGBwby1zdGVwcGVyLXN0ZXAtYmFyYCkgZSBhIGxhYmVsLlxyXG4gKi9cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdwby1zdGVwcGVyLXN0ZXAnLFxyXG4gIHRlbXBsYXRlVXJsOiAncG8tc3RlcHBlci1zdGVwLmNvbXBvbmVudC5odG1sJ1xyXG59KVxyXG5leHBvcnQgY2xhc3MgUG9TdGVwcGVyU3RlcENvbXBvbmVudCB7XHJcbiAgLy8gQ29udGXDumRvIHF1ZSBzZXLDoSByZXBhc3NhZG8gcGFyYSBvIGNvbXBvbmVudGUgYHAtY2lyY2xlLWNvbnRlbnRgIGF0cmF2w6lzIGRhIHByb3ByaWVkYWRlIGBwLWNvbnRlbnRgLlxyXG4gIEBJbnB1dCgncC1jaXJjbGUtY29udGVudCcpIGNpcmNsZUNvbnRlbnQ6IGFueTtcclxuXHJcbiAgLy8gRGVmaW5lIGEgb3JpZW50YcOnw6NvIGRlIGV4aWJpw6fDo28uXHJcbiAgQElucHV0KCdwLW9yaWVudGF0aW9uJykgb3JpZW50YXRpb246IFBvU3RlcHBlck9yaWVudGF0aW9uO1xyXG5cclxuICAvLyBJbmZvcm1hIG8gc3RhdHVzIGRhIHByb3hpbWEgZXRhcGEuXHJcbiAgQElucHV0KCdwLW5leHQtc3RhdHVzJykgbmV4dFN0YXR1cztcclxuXHJcbiAgLy8gRXZlbnRvIHF1ZSBzZXLDoSBlbWl0aWRvIHF1YW5kbyBvIHN0YXR1cyBkbyAqc3RlcCogZXN0aXZlciBhdGl2byAoYFBvU3RlcHBlclN0YXR1cy5BY3RpdmVgKS5cclxuICBAT3V0cHV0KCdwLWFjdGl2YXRlZCcpIGFjdGl2YXRlZCA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG5cclxuICAvLyBFdmVudG8gcXVlIHNlcsOhIGVtaXRpZG8gYW8gY2xpY2FyIG5vICpzdGVwKi5cclxuICBAT3V0cHV0KCdwLWNsaWNrJykgY2xpY2sgPSBuZXcgRXZlbnRFbWl0dGVyPGFueT4oKTtcclxuXHJcbiAgLy8gRXZlbnRvIHF1ZSBzZXLDoSBlbWl0aWRvIGFvIGZvY2FyIG5vICpzdGVwKiBlIHByZXNzaW9uYXIgYSB0ZWNsYSAqZW50ZXIqLlxyXG4gIEBPdXRwdXQoJ3AtZW50ZXInKSBlbnRlciA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG5cclxuICByZWFkb25seSBsaXRlcmFscyA9IHtcclxuICAgIC4uLnBvU3RlcExpdGVyYWxzRGVmYXVsdFtwb0xvY2FsZURlZmF1bHRdLFxyXG4gICAgLi4ucG9TdGVwTGl0ZXJhbHNEZWZhdWx0W2Jyb3dzZXJMYW5ndWFnZSgpXVxyXG4gIH07XHJcblxyXG4gIHByaXZhdGUgX2xhYmVsOiBzdHJpbmc7XHJcbiAgcHJpdmF0ZSBfc3RhdHVzOiBQb1N0ZXBwZXJTdGF0dXM7XHJcbiAgcHJpdmF0ZSBfc3RlcEljb25zPzogYm9vbGVhbiA9IGZhbHNlO1xyXG4gIHByaXZhdGUgX3N0ZXBTaXplOiBudW1iZXIgPSBwb1N0ZXBwZXJTdGVwU2l6ZURlZmF1bHQ7XHJcblxyXG4gIC8vIExhYmVsIGRvICpzdGVwKi5cclxuICBASW5wdXQoJ3AtbGFiZWwnKSBzZXQgbGFiZWwodmFsdWU6IHN0cmluZykge1xyXG4gICAgdGhpcy5fbGFiZWwgPSBpc1R5cGVvZih2YWx1ZSwgJ3N0cmluZycpID8gdmFsdWUgOiBgJHt0aGlzLmxpdGVyYWxzLmxhYmVsfSAke3RoaXMuY2lyY2xlQ29udGVudH1gO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGxhYmVsKCk6IHN0cmluZyB7XHJcbiAgICByZXR1cm4gdGhpcy5fbGFiZWw7XHJcbiAgfVxyXG5cclxuICAvLyBEZWZpbmUgbyBlc3RhZG8gZGUgZXhpYmnDp8Ojby5cclxuICBASW5wdXQoJ3Atc3RhdHVzJykgc2V0IHN0YXR1cyh2YWx1ZTogUG9TdGVwcGVyU3RhdHVzKSB7XHJcbiAgICB0aGlzLl9zdGF0dXMgPSAodmFsdWUgYXMgc3RyaW5nKSA/IHZhbHVlIDogdW5kZWZpbmVkO1xyXG5cclxuICAgIGlmICh0aGlzLnN0YXR1cyA9PT0gUG9TdGVwcGVyU3RhdHVzLkFjdGl2ZSkge1xyXG4gICAgICB0aGlzLmFjdGl2YXRlZC5lbWl0KCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXQgc3RhdHVzKCk6IFBvU3RlcHBlclN0YXR1cyB7XHJcbiAgICByZXR1cm4gdGhpcy5fc3RhdHVzO1xyXG4gIH1cclxuXHJcbiAgQElucHV0KCdwLXN0ZXAtaWNvbnMnKSBzZXQgc3RlcEljb25zKHN0ZXBJY29uczogYm9vbGVhbikge1xyXG4gICAgdGhpcy5fc3RlcEljb25zID0gY29udmVydFRvQm9vbGVhbihzdGVwSWNvbnMpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHN0ZXBJY29ucygpOiBib29sZWFuIHtcclxuICAgIHJldHVybiB0aGlzLl9zdGVwSWNvbnM7XHJcbiAgfVxyXG5cclxuICAvLyBUYW1hbmhvIGRvIGBzdGVwYCBlbSAqcGl4ZWxzKiwgcG9zc2liaWxpdGFuZG8gdW0gbWFpb3IgZGVzdGFxdWUuXHJcbiAgLy8gTyB2YWxvciBpbmZvcm1hZG8gZGV2ZSBzZXIgZW50cmUgYDI0YCBlIGA2NGAuXHJcbiAgQElucHV0KCdwLXN0ZXAtc2l6ZScpIHNldCBzdGVwU2l6ZSh2YWx1ZTogbnVtYmVyKSB7XHJcbiAgICB0aGlzLl9zdGVwU2l6ZSA9XHJcbiAgICAgIHZhbHVlID49IHBvU3RlcHBlclN0ZXBTaXplRGVmYXVsdCAmJiB2YWx1ZSA8PSBwb1N0ZXBwZXJTdGVwU2l6ZU1heCA/IHZhbHVlIDogcG9TdGVwcGVyU3RlcFNpemVEZWZhdWx0O1xyXG4gIH1cclxuXHJcbiAgZ2V0IHN0ZXBTaXplKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5fc3RlcFNpemU7XHJcbiAgfVxyXG5cclxuICBnZXQgaGFsZlN0ZXBTaXplKCk6IG51bWJlciB7XHJcbiAgICByZXR1cm4gdGhpcy5zdGVwU2l6ZSAvIDI7XHJcbiAgfVxyXG5cclxuICBnZXQgaXNWZXJ0aWNhbE9yaWVudGF0aW9uKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMub3JpZW50YXRpb24gPT09IFBvU3RlcHBlck9yaWVudGF0aW9uLlZlcnRpY2FsO1xyXG4gIH1cclxuXHJcbiAgZ2V0IG1hcmdpbkhvcml6b250YWxCYXIoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLmlzVmVydGljYWxPcmllbnRhdGlvbiA/IHVuZGVmaW5lZCA6IHRoaXMuaGFsZlN0ZXBTaXplO1xyXG4gIH1cclxuXHJcbiAgZ2V0U3RhdHVzQ2xhc3Moc3RhdHVzOiBzdHJpbmcpOiBzdHJpbmcge1xyXG4gICAgc3dpdGNoIChzdGF0dXMpIHtcclxuICAgICAgY2FzZSBQb1N0ZXBwZXJTdGF0dXMuQWN0aXZlOlxyXG4gICAgICAgIHJldHVybiAncG8tc3RlcHBlci1zdGVwLWRlZmF1bHQnO1xyXG4gICAgICBjYXNlIFBvU3RlcHBlclN0YXR1cy5EaXNhYmxlZDpcclxuICAgICAgICByZXR1cm4gJ3BvLXN0ZXBwZXItc3RlcC1kaXNhYmxlZCc7XHJcbiAgICAgIGNhc2UgUG9TdGVwcGVyU3RhdHVzLkRvbmU6XHJcbiAgICAgICAgcmV0dXJuICdwby1zdGVwcGVyLXN0ZXAtZGVmYXVsdCc7XHJcbiAgICAgIGNhc2UgUG9TdGVwcGVyU3RhdHVzLkVycm9yOlxyXG4gICAgICAgIHJldHVybiAncG8tc3RlcHBlci1zdGVwLWVycm9yJztcclxuICAgICAgZGVmYXVsdDpcclxuICAgICAgICByZXR1cm4gJ3BvLXN0ZXBwZXItc3RlcC1kZWZhdWx0JztcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uQ2xpY2soKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5zdGF0dXMgIT09IFBvU3RlcHBlclN0YXR1cy5EaXNhYmxlZCkge1xyXG4gICAgICB0aGlzLmNsaWNrLmVtaXQoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIG9uRW50ZXIoKTogdm9pZCB7XHJcbiAgICBpZiAodGhpcy5zdGF0dXMgIT09IFBvU3RlcHBlclN0YXR1cy5EaXNhYmxlZCkge1xyXG4gICAgICB0aGlzLmVudGVyLmVtaXQoKTtcclxuICAgIH1cclxuICB9XHJcbn1cclxuIl19