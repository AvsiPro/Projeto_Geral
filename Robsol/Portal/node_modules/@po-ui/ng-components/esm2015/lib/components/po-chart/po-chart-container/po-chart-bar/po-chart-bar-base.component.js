import { Directive, EventEmitter, Input, Output } from '@angular/core';
import { PoChartMathsService } from '../../services/po-chart-maths.service';
export class PoChartBarBaseComponent {
    constructor(mathsService) {
        this.mathsService = mathsService;
        this.barClick = new EventEmitter();
        this.barHover = new EventEmitter();
        this._containerSize = {};
        this._range = {};
        this._series = [];
    }
    set range(value) {
        if (value instanceof Object && !(value instanceof Array)) {
            this._range = value;
            this.calculateSeriesPathsCoordinates(this.containerSize, this._series, this._range);
        }
    }
    get range() {
        return this._range;
    }
    set containerSize(value) {
        this._containerSize = value;
        this.calculateSeriesPathsCoordinates(this._containerSize, this.series, this.range);
    }
    get containerSize() {
        return this._containerSize;
    }
    set series(seriesList) {
        const seriesDataArrayFilter = seriesList.filter(serie => Array.isArray(serie.data));
        if (seriesDataArrayFilter.length) {
            this._series = seriesDataArrayFilter;
            this.seriesGreaterLength = this.mathsService.seriesGreaterLength(this.series);
            this.calculateSeriesPathsCoordinates(this.containerSize, seriesDataArrayFilter, this.range);
        }
        else {
            this._series = [];
        }
    }
    get series() {
        return this._series;
    }
    onSerieBarClick(selectedItem) {
        this.barClick.emit(selectedItem);
    }
    onSerieBarHover(selectedItem) {
        this.barHover.emit(selectedItem);
    }
    trackBy(index) {
        return index;
    }
    calculateSeriesPathsCoordinates(containerSize, series, range) {
        this.seriesPathsCoordinates = series.map((serie, seriesIndex) => {
            if (Array.isArray(serie.data)) {
                let pathCoordinates = [];
                serie.data.forEach((data, serieDataIndex) => {
                    if (this.mathsService.verifyIfFloatOrInteger(data)) {
                        const coordinates = this.barCoordinates(seriesIndex, serieDataIndex, containerSize, range, data);
                        const category = this.serieCategory(serieDataIndex, this.categories);
                        const label = serie['label'];
                        const color = serie['color'];
                        const tooltip = serie['tooltip'];
                        const tooltipLabel = this.getTooltipLabel(data, label, tooltip);
                        pathCoordinates = [...pathCoordinates, { category, color, label, tooltipLabel, data, coordinates }];
                    }
                });
                return pathCoordinates;
            }
        });
    }
    getTooltipLabel(data, label, tooltipLabel) {
        const dataLabel = label ? `${label}: ` : '';
        const dataValue = data.toString();
        return tooltipLabel || `${dataLabel}${dataValue}`;
    }
    serieCategory(index, categories = []) {
        var _a;
        return (_a = categories[index]) !== null && _a !== void 0 ? _a : undefined;
    }
}
PoChartBarBaseComponent.decorators = [
    { type: Directive }
];
PoChartBarBaseComponent.ctorParameters = () => [
    { type: PoChartMathsService }
];
PoChartBarBaseComponent.propDecorators = {
    categories: [{ type: Input, args: ['p-categories',] }],
    barClick: [{ type: Output, args: ['p-bar-click',] }],
    barHover: [{ type: Output, args: ['p-bar-hover',] }],
    range: [{ type: Input, args: ['p-range',] }],
    containerSize: [{ type: Input, args: ['p-container-size',] }],
    series: [{ type: Input, args: ['p-series',] }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tY2hhcnQtYmFyLWJhc2UuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vLi4vLi4vcHJvamVjdHMvdWkvc3JjL2xpYi9jb21wb25lbnRzL3BvLWNoYXJ0L3BvLWNoYXJ0LWNvbnRhaW5lci9wby1jaGFydC1iYXIvcG8tY2hhcnQtYmFyLWJhc2UuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsWUFBWSxFQUFFLEtBQUssRUFBRSxNQUFNLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFdkUsT0FBTyxFQUFFLG1CQUFtQixFQUFFLE1BQU0sdUNBQXVDLENBQUM7QUFRNUUsTUFBTSxPQUFnQix1QkFBdUI7SUFxRDNDLFlBQXNCLFlBQWlDO1FBQWpDLGlCQUFZLEdBQVosWUFBWSxDQUFxQjtRQWxEaEMsYUFBUSxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7UUFFbkMsYUFBUSxHQUFHLElBQUksWUFBWSxFQUFPLENBQUM7UUFNbEQsbUJBQWMsR0FBeUIsRUFBRSxDQUFDO1FBQzFDLFdBQU0sR0FBd0IsRUFBRSxDQUFDO1FBQ2pDLFlBQU8sR0FBd0IsRUFBRSxDQUFDO0lBd0NnQixDQUFDO0lBdEMzRCxJQUFzQixLQUFLLENBQUMsS0FBMEI7UUFDcEQsSUFBSSxLQUFLLFlBQVksTUFBTSxJQUFJLENBQUMsQ0FBQyxLQUFLLFlBQVksS0FBSyxDQUFDLEVBQUU7WUFDeEQsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7WUFFcEIsSUFBSSxDQUFDLCtCQUErQixDQUFDLElBQUksQ0FBQyxhQUFhLEVBQUUsSUFBSSxDQUFDLE9BQU8sRUFBRSxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7U0FDckY7SUFDSCxDQUFDO0lBRUQsSUFBSSxLQUFLO1FBQ1AsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3JCLENBQUM7SUFFRCxJQUErQixhQUFhLENB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T0FBTyxlQUFlLENBQUM7YUFDeEI7UUFDSCxDQUFDLENBQUMsQ0FBQztJQUNMLENBQUM7SUFFTyxlQUFlLENBQUMsSUFBWSxFQUFFLEtBQWEsRUFBRSxZQUFvQjtRQUN2RSxNQUFNLFNBQVMsR0FBRyxLQUFLLENBQUMsQ0FBQyxDQUFDLEdBQUcsS0FBSyxJQUFJLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUM1QyxNQUFNLFNBQVMsR0FBRyxJQUFJLENBQUMsUUFBUSxFQUFFLENBQUM7UUFFbEMsT0FBTyxZQUFZLElBQUksR0FBRyxTQUFTLEdBQUcsU0FBUyxFQUFFLENBQUM7SUFDcEQsQ0FBQztJQUVPLGFBQWEsQ0FBQyxLQUFhLEVBQUUsYUFBNEIsRUFBRTs7UUFDakUsT0FBTyxNQUFBLFVBQVUsQ0FBQyxLQUFLLENBQUMsbUNBQUksU0FBUyxDQUFDO0lBQ3hDLENBQUM7OztZQXpHRixTQUFTOzs7WUFQRCxtQkFBbUI7Ozt5QkFTekIsS0FBSyxTQUFDLGNBQWM7dUJBRXBCLE1BQU0sU0FBQyxhQUFhO3VCQUVwQixNQUFNLFNBQUMsYUFBYTtvQkFVcEIsS0FBSyxTQUFDLFNBQVM7NEJBWWYsS0FBSyxTQUFDLGtCQUFrQjtxQkFVeEIsS0FBSyxTQUFDLFVBQVUiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBEaXJlY3RpdmUsIEV2ZW50RW1pdHRlciwgSW5wdXQsIE91dHB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5cclxuaW1wb3J0IHsgUG9DaGFydE1hdGhzU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL3BvLWNoYXJ0LW1hdGhzLnNlcnZpY2UnO1xyXG5cclxuaW1wb3J0IHsgUG9DaGFydENvbnRhaW5lclNpemUgfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL3BvLWNoYXJ0LWNvbnRhaW5lci1zaXplLmludGVyZmFjZSc7XHJcbmltcG9ydCB7IFBvQ2hhcnRNaW5NYXhWYWx1ZXMgfSBmcm9tICcuLi8uLi9pbnRlcmZhY2VzL3BvLWNoYXJ0LW1pbi1tYXgtdmFsdWVzLmludGVyZmFjZSc7XHJcbmltcG9ydCB7IFBvQ2hhcnRCYXJDb29yZGluYXRlcyB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvcG8tY2hhcnQtYmFyLWNvb3JkaW5hdGVzLmludGVyZmFjZSc7XHJcbmltcG9ydCB7IFBvQ2hhcnRTZXJpZSB9IGZyb20gJy4uLy4uL2ludGVyZmFjZXMvcG8tY2hhcnQtc2VyaWUuaW50ZXJmYWNlJztcclxuXHJcbkBEaXJlY3RpdmUoKVxyXG5leHBvcnQgYWJzdHJhY3QgY2xhc3MgUG9DaGFydEJhckJhc2VDb21wb25lbnQge1xyXG4gIEBJbnB1dCgncC1jYXRlZ29yaWVzJykgY2F0ZWdvcmllczogQXJyYXk8c3RyaW5nPjtcclxuXHJcbiAgQE91dHB1dCgncC1iYXItY2xpY2snKSBiYXJDbGljayA9IG5ldyBFdmVudEVtaXR0ZXI8YW55PigpO1xyXG5cclxuICBAT3V0cHV0KCdwLWJhci1ob3ZlcicpIGJhckhvdmVyID0gbmV3IEV2ZW50RW1pdHRlcjxhbnk+KCk7XHJcblxyXG4gIHNlcmllc1BhdGhzQ29vcmRpbmF0ZXM6IEFycmF5PEFycmF5PFBvQ2hhcnRCYXJDb29yZGluYXRlcz4+O1xyXG5cclxuICBwcm90ZWN0ZWQgc2VyaWVzR3JlYXRlckxlbmd0aDogbnVtYmVyO1xyXG5cclxuICBwcml2YXRlIF9jb250YWluZXJTaXplOiBQb0NoYXJ0Q29udGFpbmVyU2l6ZSA9IHt9O1xyXG4gIHByaXZhdGUgX3JhbmdlOiBQb0NoYXJ0TWluTWF4VmFsdWVzID0ge307XHJcbiAgcHJpdmF0ZSBfc2VyaWVzOiBBcnJheTxQb0NoYXJ0U2VyaWU+ID0gW107XHJcblxyXG4gIEBJbnB1dCgncC1yYW5nZScpIHNldCByYW5nZSh2YWx1ZTogUG9DaGFydE1pbk1heFZhbHVlcykge1xyXG4gICAgaWYgKHZhbHVlIGluc3RhbmNlb2YgT2JqZWN0ICYmICEodmFsdWUgaW5zdGFuY2VvZiBBcnJheSkpIHtcclxuICAgICAgdGhpcy5fcmFuZ2UgPSB2YWx1ZTtcclxuXHJcbiAgICAgIHRoaXMuY2FsY3VsYXRlU2VyaWVzUGF0aHNDb29yZGluYXRlcyh0aGlzLmNvbnRhaW5lclNpemUsIHRoaXMuX3NlcmllcywgdGhpcy5fcmFuZ2UpO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0IHJhbmdlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3JhbmdlO1xyXG4gIH1cclxuXHJcbiAgQElucHV0KCdwLWNvbnRhaW5lci1zaXplJykgc2V0IGNvbnRhaW5lclNpemUodmFsdWU6IFBvQ2hhcnRDb250YWluZXJTaXplKSB7XHJcbiAgICB0aGlzLl9jb250YWluZXJTaXplID0gdmFsdWU7XHJcblxyXG4gICAgdGhpcy5jYWxjdWxhdGVTZXJpZXNQYXRoc0Nvb3JkaW5hdGVzKHRoaXMuX2NvbnRhaW5lclNpemUsIHRoaXMuc2VyaWVzLCB0aGlzLnJhbmdlKTtcclxuICB9XHJcblxyXG4gIGdldCBjb250YWluZXJTaXplKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2NvbnRhaW5lclNpemU7XHJcbiAgfVxyXG5cclxuICBASW5wdXQoJ3Atc2VyaWVzJykgc2V0IHNlcmllcyhzZXJpZXNMaXN0OiBBcnJheTxQb0NoYXJ0U2VyaWU+KSB7XHJcbiAgICBjb25zdCBzZXJpZXNEYXRhQXJyYXlGaWx0ZXIgPSBzZXJpZXNMaXN0LmZpbHRlcihzZXJpZSA9PiBBcnJheS5pc0FycmF5KHNlcmllLmRhdGEpKTtcclxuXHJcbiAgICBpZiAoc2VyaWVzRGF0YUFycmF5RmlsdGVyLmxlbmd0aCkge1xyXG4gICAgICB0aGlzLl9zZXJpZXMgPSBzZXJpZXNEYXRhQXJyYXlGaWx0ZXI7XHJcbiAgICAgIHRoaXMuc2VyaWVzR3JlYXRlckxlbmd0aCA9IHRoaXMubWF0aHNTZXJ2aWNlLnNlcmllc0dyZWF0ZXJMZW5ndGgodGhpcy5zZXJpZXMpO1xyXG4gICAgICB0aGlzLmNhbGN1bGF0ZVNlcmllc1BhdGhzQ29vcmRpbmF0ZXModGhpcy5jb250YWluZXJTaXplLCBzZXJpZXNEYXRhQXJyYXlGaWx0ZXIsIHRoaXMucmFuZ2UpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fc2VyaWVzID0gW107XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXQgc2VyaWVzKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX3NlcmllcztcclxuICB9XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBtYXRoc1NlcnZpY2U6IFBvQ2hhcnRNYXRoc1NlcnZpY2UpIHt9XHJcblxyXG4gIG9uU2VyaWVCYXJDbGljayhzZWxlY3RlZEl0ZW06IGFueSkge1xyXG4gICAgdGhpcy5iYXJDbGljay5lbWl0KHNlbGVjdGVkSXRlbSk7XHJcbiAgfVxyXG5cclxuICBvblNlcmllQmFySG92ZXIoc2VsZWN0ZWRJdGVtOiBhbnkpIHtcclxuICAgIHRoaXMuYmFySG92ZXIuZW1pdChzZWxlY3RlZEl0ZW0pO1xyXG4gIH1cclxuXHJcbiAgdHJhY2tCeShpbmRleCkge1xyXG4gICAgcmV0dXJuIGluZGV4O1xyXG4gIH1cclxuXHJcbiAgcHJpdmF0ZSBjYWxjdWxhdGVTZXJpZXNQYXRoc0Nvb3JkaW5hdGVzKFxyXG4gICAgY29udGFpbmVyU2l6ZTogUG9DaGFydENvbnRhaW5lclNpemUsXHJcbiAgICBzZXJpZXM6IEFycmF5PFBvQ2hhcnRTZXJpZT4sXHJcbiAgICByYW5nZTogUG9DaGFydE1pbk1heFZhbHVlc1xyXG4gICkge1xyXG4gICAgdGhpcy5zZXJpZXNQYXRoc0Nvb3JkaW5hdGVzID0gc2VyaWVzLm1hcCgoc2VyaWU6IFBvQ2hhcnRTZXJpZSwgc2VyaWVzSW5kZXgpID0+IHtcclxuICAgICAgaWYgKEFycmF5LmlzQXJyYXkoc2VyaWUuZGF0YSkpIHtcclxuICAgICAgICBsZXQgcGF0aENvb3JkaW5hdGVzOiBBcnJheTxQb0NoYXJ0QmFyQ29vcmRpbmF0ZXM+ID0gW107XHJcblxyXG4gICAgICAgIHNlcmllLmRhdGEuZm9yRWFjaCgoZGF0YSwgc2VyaWVEYXRhSW5kZXgpID0+IHtcclxuICAgICAgICAgIGlmICh0aGlzLm1hdGhzU2VydmljZS52ZXJpZnlJZkZsb2F0T3JJbnRlZ2VyKGRhdGEpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGNvb3JkaW5hdGVzID0gdGhpcy5iYXJDb29yZGluYXRlcyhzZXJpZXNJbmRleCwgc2VyaWVEYXRhSW5kZXgsIGNvbnRhaW5lclNpemUsIHJhbmdlLCBkYXRhKTtcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGNhdGVnb3J5ID0gdGhpcy5zZXJpZUNhdGVnb3J5KHNlcmllRGF0YUluZGV4LCB0aGlzLmNhdGVnb3JpZXMpO1xyXG4gICAgICAgICAgICBjb25zdCBsYWJlbCA9IHNlcmllWydsYWJlbCddO1xyXG4gICAgICAgICAgICBjb25zdCBjb2xvciA9IHNlcmllWydjb2xvciddO1xyXG4gICAgICAgICAgICBjb25zdCB0b29sdGlwID0gc2VyaWVbJ3Rvb2x0aXAnXTtcclxuICAgICAgICAgICAgY29uc3QgdG9vbHRpcExhYmVsID0gdGhpcy5nZXRUb29sdGlwTGFiZWwoZGF0YSwgbGFiZWwsIHRvb2x0aXApO1xyXG5cclxuICAgICAgICAgICAgcGF0aENvb3JkaW5hdGVzID0gWy4uLnBhdGhDb29yZGluYXRlcywgeyBjYXRlZ29yeSwgY29sb3IsIGxhYmVsLCB0b29sdGlwTGFiZWwsIGRhdGEsIGNvb3JkaW5hdGVzIH1dO1xyXG4gICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICByZXR1cm4gcGF0aENvb3JkaW5hdGVzO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgZ2V0VG9vbHRpcExhYmVsKGRhdGE6IG51bWJlciwgbGFiZWw6IHN0cmluZywgdG9vbHRpcExhYmVsOiBzdHJpbmcpIHtcclxuICAgIGNvbnN0IGRhdGFMYWJlbCA9IGxhYmVsID8gYCR7bGFiZWx9OiBgIDogJyc7XHJcbiAgICBjb25zdCBkYXRhVmFsdWUgPSBkYXRhLnRvU3RyaW5nKCk7XHJcblxyXG4gICAgcmV0dXJuIHRvb2x0aXBMYWJlbCB8fCBgJHtkYXRhTGFiZWx9JHtkYXRhVmFsdWV9YDtcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2VyaWVDYXRlZ29yeShpbmRleDogbnVtYmVyLCBjYXRlZ29yaWVzOiBBcnJheTxzdHJpbmc+ID0gW10pIHtcclxuICAgIHJldHVybiBjYXRlZ29yaWVzW2luZGV4XSA/PyB1bmRlZmluZWQ7XHJcbiAgfVxyXG5cclxuICBwcm90ZWN0ZWQgYWJzdHJhY3QgYmFyQ29vcmRpbmF0ZXMoXHJcbiAgICBzZXJpZXNJbmRleDogbnVtYmVyLFxyXG4gICAgc2VyaWVEYXRhSW5kZXg6IG51bWJlcixcclxuICAgIGNvbnRhaW5lclNpemU6IFBvQ2hhcnRDb250YWluZXJTaXplLFxyXG4gICAgcmFuZ2U6IFBvQ2hhcnRNaW5NYXhWYWx1ZXMsXHJcbiAgICBzZXJpZVZhbHVlOiBudW1iZXJcclxuICApO1xyXG59XHJcbiJdfQ==