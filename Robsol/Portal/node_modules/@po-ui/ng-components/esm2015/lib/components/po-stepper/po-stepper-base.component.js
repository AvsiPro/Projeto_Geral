import { EventEmitter, Input, Output, Directive } from '@angular/core';
import { convertToBoolean } from '../../utils/util';
import { PoStepperOrientation } from './enums/po-stepper-orientation.enum';
import { PoStepperStatus } from './enums/po-stepper-status.enum';
const poStepperOrientationDefault = PoStepperOrientation.Horizontal;
/**
 * @description
 *
 * O `po-stepper` permite que um processo seja dividido em passos para que o usuário o realize
 * mais facilmente.
 *
 * Existem duas formas de utilização:
 *
 * 1 - Usando o componente [**po-step**](/documentation/po-step) para renderizar e descrever os passos.
 *
 * 2 - Através da propriedade `p-steps` para descrever os passos do processo, sendo responsabilidade do desenvolvedor o controle
 * de renderização do que será exibido a cada *step* ativo.
 *
 * Através de suas propriedades, é possível definir se sua orientação será horizontal ou vertical,
 * além da possibilidade de aumentar o tamanho dos *steps*.
 *
 * Também é possível navegar entre os *steps* através do teclado utilizando a tecla *tab* e, para ativar o *step* em foco basta
 * pressionar a tecla *enter*. Além disso, é possível ativar a exibição de ícones no lugar de números nos *steps* através da
 * propriedade [`p-step-icons`](/documentation/po-stepper#stepIconsProperty).
 *
 * #### Utilizando os métodos do componente:
 *
 * Para acessar os métodos do componente é necessário ter a referência do mesmo.
 *
 * Por exemplo, utilizando um [**ViewChild**](https://angular.io/api/core/ViewChild):
 *
 * ```
 * @ViewChild(PoStepperComponent) poStepperComponent: PoStepperComponent;
 * ```
 *
 * E para acessar o método:
 *
 * ```
 * poStepperComponent.next();
 * ```
 *
 * #### Boas práticas
 *
 * - Evite `labels` extensos que quebram o layout do `po-stepper`, use `labels` diretos, curtos e intuitivos.
 * - Utilize apenas um `po-stepper` por página.
 */
export class PoStepperBaseComponent {
    constructor() {
        /** Ação que será executada quando o usuário mudar o passo do `po-stepper`. */
        this.onChangeStep = new EventEmitter();
        this._orientation = poStepperOrientationDefault;
        this._sequential = true;
        this._step = 1;
        this._steps = [];
    }
    /**
     * @optional
     *
     * @description
     *
     * Define a orientação de exibição do `po-stepper`.
     *
     * > Veja os valores válidos no *enum* [PoStepperOrientation](documentation/po-stepper#stepperOrientation).
     *
     * @default `PoStepperOrientation.Horizontal`
     */
    set orientation(value) {
        this._orientation = Object.values(PoStepperOrientation).includes(value)
            ? value
            : poStepperOrientationDefault;
    }
    get orientation() {
        return this._orientation;
    }
    /**
     * @optional
     *
     * @description
     *
     * Controla o passo atual do `po-stepper`.
     *
     * > Ao utilizar esta propriedade e também utilizar o componente [**po-step**](/documentation/po-step),
     * o valor desta propriedade será ignorada permanecendo a definição do [**po-step**](/documentation/po-step).
     *
     * @default `1`
     */
    set step(step) {
        if (step >= 1 && step <= this.steps.length) {
            this._step = step;
            this._steps[this._step - 1].status = PoStepperStatus.Active;
        }
    }
    get step() {
        return this._step;
    }
    /**
     * @optional
     *
     * @description
     *
     * Lista dos itens do stepper. Se o valor estiver indefinido ou inválido, será inicializado como um array vazio.
     *
     * > Ao utilizar esta propriedade e também utilizar o componente [**po-step**](/documentation/po-step),
     * o valor desta propriedade será ignorada permanecendo a definição do [**po-step**](/documentation/po-step).
     */
    set steps(steps) {
        this._steps = Array.isArray(steps) ? steps : [];
        this._steps.forEach(step => (step.status = PoStepperStatus.Default));
        this.step = 1;
    }
    get steps() {
        return this._steps;
    }
    /**
     * @optional
     *
     * @description
     *
     * Define se o `po-stepper` será sequencial ou aleatório.
     *
     * > Ao utilizar o componente [**po-step**](/documentation/po-step), o valor desta propriedade sempre será verdadeiro.
     *
     * @default `true`
     */
    set sequential(sequential) {
        this._sequential = convertToBoolean(sequential);
    }
    get sequential() {
        return this._sequential;
    }
}
PoStepperBaseComponent.decorators = [
    { type: Directive }
];
PoStepperBaseComponent.propDecorators = {
    stepIcons: [{ type: Input, args: ['p-step-icons',] }],
    stepSize: [{ type: Input, args: ['p-step-size',] }],
    onChangeStep: [{ type: Output, args: ['p-change-step',] }],
    orientation: [{ type: Input, args: ['p-orientation',] }],
    step: [{ type: Input, args: ['p-step',] }],
    steps: [{ type: Input, args: ['p-steps',] }],
    sequential: [{ type: Input, args: ['p-sequential',] }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tc3RlcHBlci1iYXNlLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL3Byb2plY3RzL3VpL3NyYy9saWIvY29tcG9uZW50cy9wby1zdGVwcGVyL3BvLXN0ZXBwZXItYmFzZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLFlBQVksRUFBRSxLQUFLLEVBQUUsTUFBTSxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUV2RSxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUlwRCxPQUFPLEVBQUUsb0JBQW9CLEVBQUUsTUFBTSxxQ0FBcUMsQ0FBQztBQUMzRSxPQUFPLEVBQUUsZUFBZSxFQUFFLE1BQU0sZ0NBQWdDLENBQUM7QUFFakUsTUFBTSwyQkFBMkIsR0FBRyxvQkFBb0IsQ0FBQyxVQUFVLENBQUM7QUFFcEU7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7R0F3Q0c7QUFFSCxNQUFNLE9BQU8sc0JBQXNCO0lBRG5DO1FBK0JFLDhFQUE4RTtRQUNyRCxpQkFBWSxHQUFHLElBQUksWUFBWSxFQUE0QixDQUFDO1FBRTdFLGlCQUFZLEdBQTBCLDJCQUEyQixDQUFDO1FBQ2xFLGdCQUFXLEdBQWEsSUFBSSxDQUFDO1FBQzdCLFVBQUssR0FBVyxDQUFDLENBQUM7UUFDbEIsV0FBTSxHQUF5QixFQUFFLENBQUM7SUFvRjVDLENBQUM7SUFsRkM7Ozs7Ozs7Ozs7T0FVRztJQUNILElBQTRCLFdBQVcsQ0FBQyxLQUEyQjtRQUNqRSxJQUFJLENBQUMsWUFBWSxHQUFTLE1BQU8sQ0FBQyxNQUFNLENBQUMsb0JBQW9CLENBQUMsQ0FBQyxRQUFRLENBQUMsS0FBSyxDQUFDO1lBQzVFLENBQUMsQ0FBQyxLQUFLO1lBQ1AsQ0FBQyxDQUFDLDJCQUEyQixDQUFDO0lBQ2xDLENBQUM7SUFFRCxJQUFJLFdBQVc7UUFDYixPQUFPLElBQUksQ0FBQyxZQUFZLENBQUM7SUFDM0IsQ0FBQztJQUVEOzs7Ozs7Ozs7OztPQVdHO0lBQ0gsSUFBcUIsSUFBSSxDQUFDLElBQVk7UUFDcEMsSUFBSSxJQUFJLElBQUksQ0FBQyxJQUFJLElBQUksSUFBSSxJQUFJLENBQUMsS0FBSyxDQUFDLE1BQU0sRUFBRTtZQUMxQyxJQUFJLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQztZQUNsQixJQUFJLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxDQUFDLENBQUMsTUFBTSxHQUFHLGVBQWUsQ0FBQyxNQUFNLENBQUM7U0FDN0Q7SUFDSCxDQUFDO0lBRUQsSUFBSSxJQUFJO1FBQ04sT0FBTyxJQUFJLENBQUMsS0FBSyxDQUFDO0lBQ3BCLENBQUM7SUFFRDs7Ozs7Ozs7O09BU0c7SUFDSCxJQUFzQixLQUFLLENBQUMsS0FBMkI7UUFDckQsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxLQUFLLENBQUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQztRQUNoRCxJQUFJLENBQUMsTUFBTSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsRUFBRSxDQUFDLENBQUMsSUFBSSxDQUFDLE1BQU0sR0FBRyxlQUFlLENBQUMsT0FBTyxDQUFDLENBQUMsQ0FBQztRQUNyRSxJQUFJLENBQUMsSUFBSSxHQUFHLENBQUMsQ0FBQztJQUNoQixDQUFDO0lBRUQsSUFBSSxLQUFLO1FBQ1AsT0FBTyxJQUFJLENBQUMsTUFBTSxDQUFDO0lBQ3JCLENBQUM7SUFFRDs7Ozs7Ozs7OztPQVVHO0lBQ0gsSUFBMkIsVUFBVSxDQUFDLFVBQW1CO1FBQ3ZELElBQUksQ0FBQyxXQUFXLEdBQUcsZ0JBQWdCLENBQUMsVUFBVSxDQUFDLENBQUM7SUFDbEQsQ0FBQztJQUVELElBQUksVUFBVTtRQUNaLE9BQU8sSUFBSSxDQUFDLFdBQVcsQ0FBQztJQUMxQixDQUFDOzs7WUF4SEYsU0FBUzs7O3dCQWNQLEtBQUssU0FBQyxjQUFjO3VCQWVwQixLQUFLLFNBQUMsYUFBYTsyQkFHbkIsTUFBTSxTQUFDLGVBQWU7MEJBa0J0QixLQUFLLFNBQUMsZUFBZTttQkFzQnJCLEtBQUssU0FBQyxRQUFRO29CQXFCZCxLQUFLLFNBQUMsU0FBUzt5QkFxQmYsS0FBSyxTQUFDLGNBQWMiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBFdmVudEVtaXR0ZXIsIElucHV0LCBPdXRwdXQsIERpcmVjdGl2ZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5cclxuaW1wb3J0IHsgY29udmVydFRvQm9vbGVhbiB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWwnO1xyXG5cclxuaW1wb3J0IHsgUG9TdGVwQ29tcG9uZW50IH0gZnJvbSAnLi9wby1zdGVwL3BvLXN0ZXAuY29tcG9uZW50JztcclxuaW1wb3J0IHsgUG9TdGVwcGVySXRlbSB9IGZyb20gJy4vcG8tc3RlcHBlci1pdGVtLmludGVyZmFjZSc7XHJcbmltcG9ydCB7IFBvU3RlcHBlck9yaWVudGF0aW9uIH0gZnJvbSAnLi9lbnVtcy9wby1zdGVwcGVyLW9yaWVudGF0aW9uLmVudW0nO1xyXG5pbXBvcnQgeyBQb1N0ZXBwZXJTdGF0dXMgfSBmcm9tICcuL2VudW1zL3BvLXN0ZXBwZXItc3RhdHVzLmVudW0nO1xyXG5cclxuY29uc3QgcG9TdGVwcGVyT3JpZW50YXRpb25EZWZhdWx0ID0gUG9TdGVwcGVyT3JpZW50YXRpb24uSG9yaXpvbnRhbDtcclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICogTyBgcG8tc3RlcHBlcmAgcGVybWl0ZSBxdWUgdW0gcHJvY2Vzc28gc2VqYSBkaXZpZGlkbyBlbSBwYXNzb3MgcGFyYSBxdWUgbyB1c3XDoXJpbyBvIHJlYWxpemVcclxuICogbWFpcyBmYWNpbG1lbnRlLlxyXG4gKlxyXG4gKiBFeGlzdGVtIGR1YXMgZm9ybWFzIGRlIHV0aWxpemHDp8OjbzpcclxuICpcclxuICogMSAtIFVzYW5kbyBvIGNvbXBvbmVudGUgWyoqcG8tc3RlcCoqXSgvZG9jdW1lbnRhdGlvbi9wby1zdGVwKSBwYXJhIHJlbmRlcml6YXIgZSBkZXNjcmV2ZXIgb3MgcGFzc29zLlxyXG4gKlxyXG4gKiAyIC0gQXRyYXbDqXMgZGEgcHJvcHJpZWRhZGUgYHAtc3RlcHNgIHBhcmEgZGVzY3JldmVyIG9zIHBhc3NvcyBkbyBwcm9jZXNzbywgc2VuZG8gcmVzcG9uc2FiaWxpZGFkZSBkbyBkZXNlbnZvbHZlZG9yIG8gY29udHJvbGVcclxuICogZGUgcmVuZGVyaXphw6fDo28gZG8gcXVlIHNlcsOhIGV4aWJpZG8gYSBjYWRhICpzdGVwKiBhdGl2by5cclxuICpcclxuICogQXRyYXbDqXMgZGUgc3VhcyBwcm9wcmllZGFkZXMsIMOpIHBvc3PDrXZlbCBkZWZpbmlyIHNlIHN1YSBvcmllbnRhw6fDo28gc2Vyw6EgaG9yaXpvbnRhbCBvdSB2ZXJ0aWNhbCxcclxuICogYWzDqW0gZGEgcG9zc2liaWxpZGFkZSBkZSBhdW1lbnRhciBvIHRhbWFuaG8gZG9zICpzdGVwcyouXHJcbiAqXHJcbiAqIFRhbWLDqW0gw6kgcG9zc8OtdmVsIG5hdmVnYXIgZW50cmUgb3MgKnN0ZXBzKiBhdHJhdsOpcyBkbyB0ZWNsYWRvIHV0aWxpemFuZG8gYSB0ZWNsYSAqdGFiKiBlLCBwYXJhIGF0aXZhciBvICpzdGVwKiBlbSBmb2NvIGJhc3RhXHJcbiAqIHByZXNzaW9uYXIgYSB0ZWNsYSAqZW50ZXIqLiBBbMOpbSBkaXNzbywgw6kgcG9zc8OtdmVsIGF0aXZhciBhIGV4aWJpw6fDo28gZGUgw61jb25lcyBubyBsdWdhciBkZSBuw7ptZXJvcyBub3MgKnN0ZXBzKiBhdHJhdsOpcyBkYVxyXG4gKiBwcm9wcmllZGFkZSBbYHAtc3RlcC1pY29uc2BdKC9kb2N1bWVudGF0aW9uL3BvLXN0ZXBwZXIjc3RlcEljb25zUHJvcGVydHkpLlxyXG4gKlxyXG4gKiAjIyMjIFV0aWxpemFuZG8gb3MgbcOpdG9kb3MgZG8gY29tcG9uZW50ZTpcclxuICpcclxuICogUGFyYSBhY2Vzc2FyIG9zIG3DqXRvZG9zIGRvIGNvbXBvbmVudGUgw6kgbmVjZXNzw6FyaW8gdGVyIGEgcmVmZXLDqm5jaWEgZG8gbWVzbW8uXHJcbiAqXHJcbiAqIFBvciBleGVtcGxvLCB1dGlsaXphbmRvIHVtIFsqKlZpZXdDaGlsZCoqXShodHRwczovL2FuZ3VsYXIuaW8vYXBpL2NvcmUvVmlld0NoaWxkKTpcclxuICpcclxuICogYGBgXHJcbiAqIEBWaWV3Q2hpbGQoUG9TdGVwcGVyQ29tcG9uZW50KSBwb1N0ZXBwZXJDb21wb25lbnQ6IFBvU3RlcHBlckNvbXBvbmVudDtcclxuICogYGBgXHJcbiAqXHJcbiAqIEUgcGFyYSBhY2Vzc2FyIG8gbcOpdG9kbzpcclxuICpcclxuICogYGBgXHJcbiAqIHBvU3RlcHBlckNvbXBvbmVudC5uZXh0KCk7XHJcbiAqIGBgYFxyXG4gKlxyXG4gKiAjIyMjIEJvYXMgcHLDoXRpY2FzXHJcbiAqXHJcbiAqIC0gRXZpdGUgYGxhYmVsc2AgZXh0ZW5zb3MgcXVlIHF1ZWJyYW0gbyBsYXlvdXQgZG8gYHBvLXN0ZXBwZXJgLCB1c2UgYGxhYmVsc2AgZGlyZXRvcywgY3VydG9zIGUgaW50dWl0aXZvcy5cclxuICogLSBVdGlsaXplIGFwZW5hcyB1bSBgcG8tc3RlcHBlcmAgcG9yIHDDoWdpbmEuXHJcbiAqL1xyXG5ARGlyZWN0aXZlKClcclxuZXhwb3J0IGNsYXNzIFBvU3RlcHBlckJhc2VDb21wb25lbnQge1xyXG4gIC8qKlxyXG4gICAqXHJcbiAgICogQG9wdGlvbmFsXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKlxyXG4gICAqIDxhIGlkPVwic3RlcEljb25zUHJvcGVydHlcIj48L2E+XHJcbiAgICpcclxuICAgKiBIYWJpbGl0YSBhIGV4aWJpw6fDo28gZGUgw61jb25lIGFvIGludsOpcyBkZSBuw7ptZXJvIG5vIGNlbnRybyBkbyBjw61yY3VsbyBkb3MgKnN0ZXBzKi5cclxuICAgKlxyXG4gICAqIEBkZWZhdWx0IGBmYWxzZWBcclxuICAgKi9cclxuICBASW5wdXQoJ3Atc3RlcC1pY29ucycpIHN0ZXBJY29uczogYm9vbGVhbjtcclxuXHJcbiAgLyoqXHJcbiAgICogQG9wdGlvbmFsXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKlxyXG4gICAqIERlZmluZSBvIHRhbWFuaG8gZG9zICpzdGVwcyogZW0gKnBpeGVscyosIHBvc3NpYmlsaXRhbmRvIHVtIG1haW9yIGRlc3RhcXVlLlxyXG4gICAqXHJcbiAgICogTyB2YWxvciBpbmZvcm1hZG8gZGV2ZSBzZXIgZW50cmUgYDI0YCBlIGA2NGAuXHJcbiAgICpcclxuICAgKiA+IFZhbG9yZXMgcXVlIG7Do28gc2UgZW5xdWFkcmFyZW0gYSBlc3RhIHJlZ3JhIHNlcsOjbyBpZ25vcmFkb3MsIG1hbnRlbmRvLXNlIG8gdmFsb3IgKmRlZmF1bHQqLlxyXG4gICAqXHJcbiAgICogQGRlZmF1bHQgYDI0YFxyXG4gICAqL1xyXG4gIEBJbnB1dCgncC1zdGVwLXNpemUnKSBzdGVwU2l6ZTogbnVtYmVyO1xyXG5cclxuICAvKiogQcOnw6NvIHF1ZSBzZXLDoSBleGVjdXRhZGEgcXVhbmRvIG8gdXN1w6FyaW8gbXVkYXIgbyBwYXNzbyBkbyBgcG8tc3RlcHBlcmAuICovXHJcbiAgQE91dHB1dCgncC1jaGFuZ2Utc3RlcCcpIG9uQ2hhbmdlU3RlcCA9IG5ldyBFdmVudEVtaXR0ZXI8bnVtYmVyIHwgUG9TdGVwQ29tcG9uZW50PigpO1xyXG5cclxuICBwcml2YXRlIF9vcmllbnRhdGlvbj86IFBvU3RlcHBlck9yaWVudGF0aW9uID0gcG9TdGVwcGVyT3JpZW50YXRpb25EZWZhdWx0O1xyXG4gIHByaXZhdGUgX3NlcXVlbnRpYWw/OiBib29sZWFuID0gdHJ1ZTtcclxuICBwcml2YXRlIF9zdGVwOiBudW1iZXIgPSAxO1xyXG4gIHByaXZhdGUgX3N0ZXBzOiBBcnJheTxQb1N0ZXBwZXJJdGVtPiA9IFtdO1xyXG5cclxuICAvKipcclxuICAgKiBAb3B0aW9uYWxcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqXHJcbiAgICogRGVmaW5lIGEgb3JpZW50YcOnw6NvIGRlIGV4aWJpw6fDo28gZG8gYHBvLXN0ZXBwZXJgLlxyXG4gICAqXHJcbiAgICogPiBWZWphIG9zIHZhbG9yZXMgdsOhbGlkb3Mgbm8gKmVudW0qIFtQb1N0ZXBwZXJPcmllbnRhdGlvbl0oZG9jdW1lbnRhdGlvbi9wby1zdGVwcGVyI3N0ZXBwZXJPcmllbnRhdGlvbikuXHJcbiAgICpcclxuICAgKiBAZGVmYXVsdCBgUG9TdGVwcGVyT3JpZW50YXRpb24uSG9yaXpvbnRhbGBcclxuICAgKi9cclxuICBASW5wdXQoJ3Atb3JpZW50YXRpb24nKSBzZXQgb3JpZW50YXRpb24odmFsdWU6IFBvU3RlcHBlck9yaWVudGF0aW9uKSB7XHJcbiAgICB0aGlzLl9vcmllbnRhdGlvbiA9ICg8YW55Pk9iamVjdCkudmFsdWVzKFBvU3RlcHBlck9yaWVudGF0aW9uKS5pbmNsdWRlcyh2YWx1ZSlcclxuICAgICAgPyB2YWx1ZVxyXG4gICAgICA6IHBvU3RlcHBlck9yaWVudGF0aW9uRGVmYXVsdDtcclxuICB9XHJcblxyXG4gIGdldCBvcmllbnRhdGlvbigpOiBQb1N0ZXBwZXJPcmllbnRhdGlvbiB7XHJcbiAgICByZXR1cm4gdGhpcy5fb3JpZW50YXRpb247XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAb3B0aW9uYWxcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqXHJcbiAgICogQ29udHJvbGEgbyBwYXNzbyBhdHVhbCBkbyBgcG8tc3RlcHBlcmAuXHJcbiAgICpcclxuICAgKiA+IEFvIHV0aWxpemFyIGVzdGEgcHJvcHJpZWRhZGUgZSB0YW1iw6ltIHV0aWxpemFyIG8gY29tcG9uZW50ZSBbKipwby1zdGVwKipdKC9kb2N1bWVudGF0aW9uL3BvLXN0ZXApLFxyXG4gICAqIG8gdmFsb3IgZGVzdGEgcHJvcHJpZWRhZGUgc2Vyw6EgaWdub3JhZGEgcGVybWFuZWNlbmRvIGEgZGVmaW5pw6fDo28gZG8gWyoqcG8tc3RlcCoqXSgvZG9jdW1lbnRhdGlvbi9wby1zdGVwKS5cclxuICAgKlxyXG4gICAqIEBkZWZhdWx0IGAxYFxyXG4gICAqL1xyXG4gIEBJbnB1dCgncC1zdGVwJykgc2V0IHN0ZXAoc3RlcDogbnVtYmVyKSB7XHJcbiAgICBpZiAoc3RlcCA+PSAxICYmIHN0ZXAgPD0gdGhpcy5zdGVwcy5sZW5ndGgpIHtcclxuICAgICAgdGhpcy5fc3RlcCA9IHN0ZXA7XHJcbiAgICAgIHRoaXMuX3N0ZXBzW3RoaXMuX3N0ZXAgLSAxXS5zdGF0dXMgPSBQb1N0ZXBwZXJTdGF0dXMuQWN0aXZlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgZ2V0IHN0ZXAoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLl9zdGVwO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQG9wdGlvbmFsXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKlxyXG4gICAqIExpc3RhIGRvcyBpdGVucyBkbyBzdGVwcGVyLiBTZSBvIHZhbG9yIGVzdGl2ZXIgaW5kZWZpbmlkbyBvdSBpbnbDoWxpZG8sIHNlcsOhIGluaWNpYWxpemFkbyBjb21vIHVtIGFycmF5IHZhemlvLlxyXG4gICAqXHJcbiAgICogPiBBbyB1dGlsaXphciBlc3RhIHByb3ByaWVkYWRlIGUgdGFtYsOpbSB1dGlsaXphciBvIGNvbXBvbmVudGUgWyoqcG8tc3RlcCoqXSgvZG9jdW1lbnRhdGlvbi9wby1zdGVwKSxcclxuICAgKiBvIHZhbG9yIGRlc3RhIHByb3ByaWVkYWRlIHNlcsOhIGlnbm9yYWRhIHBlcm1hbmVjZW5kbyBhIGRlZmluacOnw6NvIGRvIFsqKnBvLXN0ZXAqKl0oL2RvY3VtZW50YXRpb24vcG8tc3RlcCkuXHJcbiAgICovXHJcbiAgQElucHV0KCdwLXN0ZXBzJykgc2V0IHN0ZXBzKHN0ZXBzOiBBcnJheTxQb1N0ZXBwZXJJdGVtPikge1xyXG4gICAgdGhpcy5fc3RlcHMgPSBBcnJheS5pc0FycmF5KHN0ZXBzKSA/IHN0ZXBzIDogW107XHJcbiAgICB0aGlzLl9zdGVwcy5mb3JFYWNoKHN0ZXAgPT4gKHN0ZXAuc3RhdHVzID0gUG9TdGVwcGVyU3RhdHVzLkRlZmF1bHQpKTtcclxuICAgIHRoaXMuc3RlcCA9IDE7XHJcbiAgfVxyXG5cclxuICBnZXQgc3RlcHMoKTogQXJyYXk8UG9TdGVwcGVySXRlbT4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX3N0ZXBzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQG9wdGlvbmFsXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKlxyXG4gICAqIERlZmluZSBzZSBvIGBwby1zdGVwcGVyYCBzZXLDoSBzZXF1ZW5jaWFsIG91IGFsZWF0w7NyaW8uXHJcbiAgICpcclxuICAgKiA+IEFvIHV0aWxpemFyIG8gY29tcG9uZW50ZSBbKipwby1zdGVwKipdKC9kb2N1bWVudGF0aW9uL3BvLXN0ZXApLCBvIHZhbG9yIGRlc3RhIHByb3ByaWVkYWRlIHNlbXByZSBzZXLDoSB2ZXJkYWRlaXJvLlxyXG4gICAqXHJcbiAgICogQGRlZmF1bHQgYHRydWVgXHJcbiAgICovXHJcbiAgQElucHV0KCdwLXNlcXVlbnRpYWwnKSBzZXQgc2VxdWVudGlhbChzZXF1ZW50aWFsOiBib29sZWFuKSB7XHJcbiAgICB0aGlzLl9zZXF1ZW50aWFsID0gY29udmVydFRvQm9vbGVhbihzZXF1ZW50aWFsKTtcclxuICB9XHJcblxyXG4gIGdldCBzZXF1ZW50aWFsKCk6IGJvb2xlYW4ge1xyXG4gICAgcmV0dXJuIHRoaXMuX3NlcXVlbnRpYWw7XHJcbiAgfVxyXG59XHJcbiJdfQ==