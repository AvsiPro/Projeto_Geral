import { Input, Directive } from '@angular/core';
import { convertToInt } from '../../utils/util';
import { poGaugeMinHeight } from './po-gauge-default-values.constant';
import { PoColorService } from '../../services/po-color/po-color.service';
/**
 * @description
 *
 * O componente `po-gauge` provê a representação de um valor através de um arco. É muito comum, por exemplo, para demonstrar o desempenho ou progresso de algo.
 * O `po-gauge` possui dois tipos de tratamentos:
 * - É possível demonstrar um dado percentual simples em conjunto com uma descrição resumida em seu interior;
 * - Para um demonstrativo mais elaborado, consegue-se definir alcances em cores, um breve texto descritivo e um ponteiro indicando o valor desejado.
 *
 * #### Guia de uso para Gráficos
 *
 * > Veja nosso [guia de uso para gráficos](/guides/guide-charts) para auxiliar na construção do seu gráfico,
 * informando em qual caso utilizar, o que devemos evitar e boas práticas relacionada a cores.
 */
export class PoGaugeBaseComponent {
    constructor(colorService) {
        this.colorService = colorService;
        this._height = poGaugeMinHeight;
        this._ranges = [];
    }
    /**
     * @optional
     *
     * @description
     *
     * Define o texto que será exibido no gauge.
     * Há dois posicionamentos para ele:
     * - Se houver definição para `p-ranges`, o descritivo será exibido no topo do container, ficando acima do gauge;
     * - Na ausência de `p-ranges`, será incorporado dentro do arco do gauge, e abaixo de `p-value`.
     *
     * Para ambos os casos, se o conteúdo ultrapassar a área designada, serão geradas automaticamente reticências.
     * No entanto, será possível visualizar a mensagem através de um tooltip no passar do mouse sobre o texto.
     *
     * > Para uma melhor experiência do usuário, é recomendado um descritivo breve e com poucas palavras.
     * Desta forma evita-se o *overflow* do texto.
     */
    set description(value) {
        this._description = value;
        this.svgContainerSize();
    }
    get description() {
        return this._description;
    }
    /**
     * @optional
     *
     * @description
     *
     * Define a altura do gauge.
     *
     * O valor mínimo aceito é 300px.
     *
     * @default `300px`
     */
    set height(value) {
        this._height = this.setGaugeHeight(value);
        this.svgContainerSize();
    }
    get height() {
        return this._height;
    }
    /**
     * @optional
     *
     * @description
     *
     * Definição para o alcance de cores. Ao adicionar pelo menos um item na lista,
     * incorpora-se o ponteiro que assinala o valor passado em `p-value`.
     * Se o valor de `p-value` for inferior ao mínimo valor definido em `PoGaugeRanges.from`, o domínio mínimo do gauge será `p-value`.
     * A mesma regra prevalece para valores máximos.
     */
    set ranges(value) {
        this._ranges = Array.isArray(value) ? this.verifyColors(value) : [];
        this.svgContainerSize();
    }
    get ranges() {
        return this._ranges;
    }
    /**
     * @optional
     *
     * @description
     *
     * Define o título do gauge.
     */
    set title(value) {
        this._title = value;
        this.svgContainerSize();
    }
    get title() {
        return this._title;
    }
    /**
     * @optional
     *
     * @description
     *
     * Valor referente ao valor da série. Seu comportamento segue a seguintes regras:
     *
     * - Sem `p-ranges`: Os valores passados para `p-value` e `p-description` serão centralizados no interior do arco.
     * A base do valor será percentual tendo como base os alcances entre zero e 100%. Se passado um valor superior a 100,
     * A colorização do gauge será completa e o valor passado será exibido no interior do arco.
     * - Com `p-ranges`: A descrição será exibida acima do gauge e haverá um ponteiro marcando o valor passado em `p-value`.
     * Considerando que o alcance em `ranges` é aberto, então a escala de `p-value` será em relação ao menor/maior alcance
     * absoluto definido em `p-ranges`.
     * Se passado um `p-value` inferior em relação ao mínimo valor definido em `p-ranges`, o domínio mínimo do gauge partirá de `p-value`.
     * A mesma regra prevalece para valores máximos.
     *
     */
    set value(gaugeValue) {
        if (typeof gaugeValue === 'number' || (typeof gaugeValue === 'string' && gaugeValue.trim())) {
            const value = !isNaN(gaugeValue) ? Number(gaugeValue) : undefined;
            this._value = value;
        }
        else {
            this._value = undefined;
        }
    }
    get value() {
        return this._value;
    }
    verifyColors(ranges) {
        return this.colorService.getColors(ranges);
    }
    setGaugeHeight(height) {
        const gaugeHeight = convertToInt(height);
        return gaugeHeight && gaugeHeight > poGaugeMinHeight ? gaugeHeight : poGaugeMinHeight;
    }
}
PoGaugeBaseComponent.decorators = [
    { type: Directive }
];
PoGaugeBaseComponent.ctorParameters = () => [
    { type: PoColorService }
];
PoGaugeBaseComponent.propDecorators = {
    description: [{ type: Input, args: ['p-description',] }],
    height: [{ type: Input, args: ['p-height',] }],
    ranges: [{ type: Input, args: ['p-ranges',] }],
    title: [{ type: Input, args: ['p-title',] }],
    value: [{ type: Input, args: ['p-value',] }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tZ2F1Z2UtYmFzZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy91aS9zcmMvbGliL2NvbXBvbmVudHMvcG8tZ2F1Z2UvcG8tZ2F1Z2UtYmFzZS5jb21wb25lbnQudHMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUFFLEtBQUssRUFBRSxTQUFTLEVBQUUsTUFBTSxlQUFlLENBQUM7QUFFakQsT0FBTyxFQUFFLFlBQVksRUFBRSxNQUFNLGtCQUFrQixDQUFDO0FBQ2hELE9BQU8sRUFBRSxnQkFBZ0IsRUFBRSxNQUFNLG9DQUFvQyxDQUFDO0FBRXRFLE9BQU8sRUFBRSxjQUFjLEVBQUUsTUFBTSwwQ0FBMEMsQ0FBQztBQUkxRTs7Ozs7Ozs7Ozs7O0dBWUc7QUFFSCxNQUFNLE9BQWdCLG9CQUFvQjtJQXdIeEMsWUFBc0IsWUFBNEI7UUFBNUIsaUJBQVksR0FBWixZQUFZLENBQWdCO1FBdEgxQyxZQUFPLEdBQVcsZ0JBQWdCLENBQUM7UUFDbkMsWUFBTyxHQUF5QixFQUFFLENBQUM7SUFxSFUsQ0FBQztJQWpIdEQ7Ozs7Ozs7Ozs7Ozs7OztPQWVHO0lBQ0gsSUFBNEIsV0FBVyxDQUFDLEtBQWE7UUFDbkQsSUFBSSxDQUFDLFlBQVksR0FBRyxLQUFLLENBQUM7UUFFMUIsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7SUFDMUIsQ0FBQztJQUVELElBQUksV0FBVztRQUNiLE9BQU8sSUFBSSxDQUFDLFlBQVksQ0FBQztJQUMzQixDQUFDO0lBRUQ7Ozs7Ozs7Ozs7T0FVRztJQUNILElBQXVCLE1BQU0sQ0FBQyxLQUFhO1FBQ3pDLElBQUksQ0FBQyxPQUFPLEdBQUcsSUFBSSxDQUFDLGNBQWMsQ0FBQyxLQUFLLENBQUMsQ0FBQztRQUMxQyxJQUFJLENBQUMsZ0JBQWdCLEVBQUUsQ0FBQztJQUMxQixDQUFDO0lBRUQsSUFBSSxNQUFNO1FBQ1IsT0FBTyxJQUFJLENBQUMsT0FBTyxDQUFDO0lBQ3RCLENBQUM7SUFFRDs7Ozs7Ozs7O09BU0c7SUFDSCxJQUF1QixNQUFNLENBQUMsS0FBMkI7UUFDdkQsSUFBSSxDQUFDLE9BQU8sR0FBRyxLQUFLLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsWUFBWSxDQUFDLEtBQUssQ0FBQyxDQUFDLENBQUMsQ0FBQyxFQUFFLENBQUM7UUFDcEUsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7SUFDMUIsQ0FBQztJQUVELElBQUksTUFBTTtRQUNSLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQztJQUN0QixDQUFDO0lBRUQ7Ozs7OztPQU1HO0lBQ0gsSUFBc0IsS0FBSyxDQUFDLEtBQWE7UUFDdkMsSUFBSSxDQUFDLE1BQU0sR0FBRyxLQUFLLENBQUM7UUFFcEIsSUFBSSxDQUFDLGdCQUFnQixFQUFFLENBQUM7SUFDMUIsQ0FBQztJQUVELElBQUksS0FBSztRQUNQLE9BQU8sSUFBSSxDQUFDLE1BQU0sQ0FBQztJQUNyQixDQUFDO0lBRUQ7Ozs7Ozs7Ozs7Ozs7Ozs7T0FnQkc7SUFDSCxJQUFzQixLQUFLLENBQUMsVUFBa0I7UUFDNUMsSUFBSSxPQUFPLFVBQVUsS0FBSyxRQUFRLElBQUksQ0FBQyxPQUFPLFVBQVUsS0FBSyxRQUFRLElBQWEsVUFBVyxDQUFDLElBQUksRUFBRSxDQUFDLEVBQUU7WUFDckcsTUFBTSxLQUFLLEdBQUcsQ0FBQyxLQUFLLENBQUMsVUFBVSxDQUFDLENBQUMsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxVQUFVLENBQUMsQ0FBQyxDQUFDLENBQUMsU0FBUyxDQUFDO1lBRWxFLElBQUksQ0FBQyxNQUFNLEdBQUcsS0FBSyxDQUFDO1NBQ3JCO2FBQU07WUFDTCxJQUFJLENBQUMsTUFBTSxHQUFHLFNBQVMsQ0FBQztTQUN6QjtJQUNILENBQUM7SUFFRCxJQUFJLEtBQUs7UUFDUCxPQUFPLElBQUksQ0FBQyxNQUFNLENBQUM7SUFDckIsQ0FBQztJQUlPLFlBQVksQ0FBQyxNQUE0QjtRQUMvQyxPQUFPLElBQUksQ0FBQyxZQUFZLENBQUMsU0FBUyxDQUFnQixNQUFNLENBQUMsQ0FBQztJQUM1RCxDQUFDO0lBRU8sY0FBYyxDQUFDLE1BQWM7UUFDbkMsTUFBTSxXQUFXLEdBQUcsWUFBWSxDQUFDLE1BQU0sQ0FBQyxDQUFDO1FBRXpDLE9BQU8sV0FBVyxJQUFJLFdBQVcsR0FBRyxnQkFBZ0IsQ0FBQyxDQUFDLENBQUMsV0FBVyxDQUFDLENBQUMsQ0FBQyxnQkFBZ0IsQ0FBQztJQUN4RixDQUFDOzs7WUFuSUYsU0FBUzs7O1lBakJELGNBQWM7OzswQkF5Q3BCLEtBQUssU0FBQyxlQUFlO3FCQXFCckIsS0FBSyxTQUFDLFVBQVU7cUJBbUJoQixLQUFLLFNBQUMsVUFBVTtvQkFnQmhCLEtBQUssU0FBQyxTQUFTO29CQTJCZixLQUFLLFNBQUMsU0FBUyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IElucHV0LCBEaXJlY3RpdmUgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcclxuXHJcbmltcG9ydCB7IGNvbnZlcnRUb0ludCB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWwnO1xyXG5pbXBvcnQgeyBwb0dhdWdlTWluSGVpZ2h0IH0gZnJvbSAnLi9wby1nYXVnZS1kZWZhdWx0LXZhbHVlcy5jb25zdGFudCc7XHJcblxyXG5pbXBvcnQgeyBQb0NvbG9yU2VydmljZSB9IGZyb20gJy4uLy4uL3NlcnZpY2VzL3BvLWNvbG9yL3BvLWNvbG9yLnNlcnZpY2UnO1xyXG5cclxuaW1wb3J0IHsgUG9HYXVnZVJhbmdlcyB9IGZyb20gJy4vaW50ZXJmYWNlcy9wby1nYXVnZS1yYW5nZXMuaW50ZXJmYWNlJztcclxuXHJcbi8qKlxyXG4gKiBAZGVzY3JpcHRpb25cclxuICpcclxuICogTyBjb21wb25lbnRlIGBwby1nYXVnZWAgcHJvdsOqIGEgcmVwcmVzZW50YcOnw6NvIGRlIHVtIHZhbG9yIGF0cmF2w6lzIGRlIHVtIGFyY28uIMOJIG11aXRvIGNvbXVtLCBwb3IgZXhlbXBsbywgcGFyYSBkZW1vbnN0cmFyIG8gZGVzZW1wZW5obyBvdSBwcm9ncmVzc28gZGUgYWxnby5cclxuICogTyBgcG8tZ2F1Z2VgIHBvc3N1aSBkb2lzIHRpcG9zIGRlIHRyYXRhbWVudG9zOlxyXG4gKiAtIMOJIHBvc3PDrXZlbCBkZW1vbnN0cmFyIHVtIGRhZG8gcGVyY2VudHVhbCBzaW1wbGVzIGVtIGNvbmp1bnRvIGNvbSB1bWEgZGVzY3Jpw6fDo28gcmVzdW1pZGEgZW0gc2V1IGludGVyaW9yO1xyXG4gKiAtIFBhcmEgdW0gZGVtb25zdHJhdGl2byBtYWlzIGVsYWJvcmFkbywgY29uc2VndWUtc2UgZGVmaW5pciBhbGNhbmNlcyBlbSBjb3JlcywgdW0gYnJldmUgdGV4dG8gZGVzY3JpdGl2byBlIHVtIHBvbnRlaXJvIGluZGljYW5kbyBvIHZhbG9yIGRlc2VqYWRvLlxyXG4gKlxyXG4gKiAjIyMjIEd1aWEgZGUgdXNvIHBhcmEgR3LDoWZpY29zXHJcbiAqXHJcbiAqID4gVmVqYSBub3NzbyBbZ3VpYSBkZSB1c28gcGFyYSBncsOhZmljb3NdKC9ndWlkZXMvZ3VpZGUtY2hhcnRzKSBwYXJhIGF1eGlsaWFyIG5hIGNvbnN0cnXDp8OjbyBkbyBzZXUgZ3LDoWZpY28sXHJcbiAqIGluZm9ybWFuZG8gZW0gcXVhbCBjYXNvIHV0aWxpemFyLCBvIHF1ZSBkZXZlbW9zIGV2aXRhciBlIGJvYXMgcHLDoXRpY2FzIHJlbGFjaW9uYWRhIGEgY29yZXMuXHJcbiAqL1xyXG5ARGlyZWN0aXZlKClcclxuZXhwb3J0IGFic3RyYWN0IGNsYXNzIFBvR2F1Z2VCYXNlQ29tcG9uZW50IHtcclxuICBwcml2YXRlIF9kZXNjcmlwdGlvbjogc3RyaW5nO1xyXG4gIHByaXZhdGUgX2hlaWdodDogbnVtYmVyID0gcG9HYXVnZU1pbkhlaWdodDtcclxuICBwcml2YXRlIF9yYW5nZXM6IEFycmF5PFBvR2F1Z2VSYW5nZXM+ID0gW107XHJcbiAgcHJpdmF0ZSBfdGl0bGU6IHN0cmluZztcclxuICBwcml2YXRlIF92YWx1ZTogbnVtYmVyO1xyXG5cclxuICAvKipcclxuICAgKiBAb3B0aW9uYWxcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqXHJcbiAgICogRGVmaW5lIG8gdGV4dG8gcXVlIHNlcsOhIGV4aWJpZG8gbm8gZ2F1Z2UuXHJcbiAgICogSMOhIGRvaXMgcG9zaWNpb25hbWVudG9zIHBhcmEgZWxlOlxyXG4gICAqIC0gU2UgaG91dmVyIGRlZmluacOnw6NvIHBhcmEgYHAtcmFuZ2VzYCwgbyBkZXNjcml0aXZvIHNlcsOhIGV4aWJpZG8gbm8gdG9wbyBkbyBjb250YWluZXIsIGZpY2FuZG8gYWNpbWEgZG8gZ2F1Z2U7XHJcbiAgICogLSBOYSBhdXPDqm5jaWEgZGUgYHAtcmFuZ2VzYCwgc2Vyw6EgaW5jb3Jwb3JhZG8gZGVudHJvIGRvIGFyY28gZG8gZ2F1Z2UsIGUgYWJhaXhvIGRlIGBwLXZhbHVlYC5cclxuICAgKlxyXG4gICAqIFBhcmEgYW1ib3Mgb3MgY2Fzb3MsIHNlIG8gY29udGXDumRvIHVsdHJhcGFzc2FyIGEgw6FyZWEgZGVzaWduYWRhLCBzZXLDo28gZ2VyYWRhcyBhdXRvbWF0aWNhbWVudGUgcmV0aWPDqm5jaWFzLlxyXG4gICAqIE5vIGVudGFudG8sIHNlcsOhIHBvc3PDrXZlbCB2aXN1YWxpemFyIGEgbWVuc2FnZW0gYXRyYXbDqXMgZGUgdW0gdG9vbHRpcCBubyBwYXNzYXIgZG8gbW91c2Ugc29icmUgbyB0ZXh0by5cclxuICAgKlxyXG4gICAqID4gUGFyYSB1bWEgbWVsaG9yIGV4cGVyacOqbmNpYSBkbyB1c3XDoXJpbywgw6kgcmVjb21lbmRhZG8gdW0gZGVzY3JpdGl2byBicmV2ZSBlIGNvbSBwb3VjYXMgcGFsYXZyYXMuXHJcbiAgICogRGVzdGEgZm9ybWEgZXZpdGEtc2UgbyAqb3ZlcmZsb3cqIGRvIHRleHRvLlxyXG4gICAqL1xyXG4gIEBJbnB1dCgncC1kZXNjcmlwdGlvbicpIHNldCBkZXNjcmlwdGlvbih2YWx1ZTogc3RyaW5nKSB7XHJcbiAgICB0aGlzLl9kZXNjcmlwdGlvbiA9IHZhbHVlO1xyXG5cclxuICAgIHRoaXMuc3ZnQ29udGFpbmVyU2l6ZSgpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGRlc2NyaXB0aW9uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuX2Rlc2NyaXB0aW9uO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQG9wdGlvbmFsXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKlxyXG4gICAqIERlZmluZSBhIGFsdHVyYSBkbyBnYXVnZS5cclxuICAgKlxyXG4gICAqIE8gdmFsb3IgbcOtbmltbyBhY2VpdG8gw6kgMzAwcHguXHJcbiAgICpcclxuICAgKiBAZGVmYXVsdCBgMzAwcHhgXHJcbiAgICovXHJcbiAgQElucHV0KCdwLWhlaWdodCcpIHNldCBoZWlnaHQodmFsdWU6IG51bWJlcikge1xyXG4gICAgdGhpcy5faGVpZ2h0ID0gdGhpcy5zZXRHYXVnZUhlaWdodCh2YWx1ZSk7XHJcbiAgICB0aGlzLnN2Z0NvbnRhaW5lclNpemUoKTtcclxuICB9XHJcblxyXG4gIGdldCBoZWlnaHQoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLl9oZWlnaHQ7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAb3B0aW9uYWxcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqXHJcbiAgICogRGVmaW5pw6fDo28gcGFyYSBvIGFsY2FuY2UgZGUgY29yZXMuIEFvIGFkaWNpb25hciBwZWxvIG1lbm9zIHVtIGl0ZW0gbmEgbGlzdGEsXHJcbiAgICogaW5jb3Jwb3JhLXNlIG8gcG9udGVpcm8gcXVlIGFzc2luYWxhIG8gdmFsb3IgcGFzc2FkbyBlbSBgcC12YWx1ZWAuXHJcbiAgICogU2UgbyB2YWxvciBkZSBgcC12YWx1ZWAgZm9yIGluZmVyaW9yIGFvIG3DrW5pbW8gdmFsb3IgZGVmaW5pZG8gZW0gYFBvR2F1Z2VSYW5nZXMuZnJvbWAsIG8gZG9tw61uaW8gbcOtbmltbyBkbyBnYXVnZSBzZXLDoSBgcC12YWx1ZWAuXHJcbiAgICogQSBtZXNtYSByZWdyYSBwcmV2YWxlY2UgcGFyYSB2YWxvcmVzIG3DoXhpbW9zLlxyXG4gICAqL1xyXG4gIEBJbnB1dCgncC1yYW5nZXMnKSBzZXQgcmFuZ2VzKHZhbHVlOiBBcnJheTxQb0dhdWdlUmFuZ2VzPikge1xyXG4gICAgdGhpcy5fcmFuZ2VzID0gQXJyYXkuaXNBcnJheSh2YWx1ZSkgPyB0aGlzLnZlcmlmeUNvbG9ycyh2YWx1ZSkgOiBbXTtcclxuICAgIHRoaXMuc3ZnQ29udGFpbmVyU2l6ZSgpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IHJhbmdlcygpOiBBcnJheTxQb0dhdWdlUmFuZ2VzPiB7XHJcbiAgICByZXR1cm4gdGhpcy5fcmFuZ2VzO1xyXG4gIH1cclxuXHJcbiAgLyoqXHJcbiAgICogQG9wdGlvbmFsXHJcbiAgICpcclxuICAgKiBAZGVzY3JpcHRpb25cclxuICAgKlxyXG4gICAqIERlZmluZSBvIHTDrXR1bG8gZG8gZ2F1Z2UuXHJcbiAgICovXHJcbiAgQElucHV0KCdwLXRpdGxlJykgc2V0IHRpdGxlKHZhbHVlOiBzdHJpbmcpIHtcclxuICAgIHRoaXMuX3RpdGxlID0gdmFsdWU7XHJcblxyXG4gICAgdGhpcy5zdmdDb250YWluZXJTaXplKCk7XHJcbiAgfVxyXG5cclxuICBnZXQgdGl0bGUoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fdGl0bGU7XHJcbiAgfVxyXG5cclxuICAvKipcclxuICAgKiBAb3B0aW9uYWxcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqXHJcbiAgICogVmFsb3IgcmVmZXJlbnRlIGFvIHZhbG9yIGRhIHPDqXJpZS4gU2V1IGNvbXBvcnRhbWVudG8gc2VndWUgYSBzZWd1aW50ZXMgcmVncmFzOlxyXG4gICAqXHJcbiAgICogLSBTZW0gYHAtcmFuZ2VzYDogT3MgdmFsb3JlcyBwYXNzYWRvcyBwYXJhIGBwLXZhbHVlYCBlIGBwLWRlc2NyaXB0aW9uYCBzZXLDo28gY2VudHJhbGl6YWRvcyBubyBpbnRlcmlvciBkbyBhcmNvLlxyXG4gICAqIEEgYmFzZSBkbyB2YWxvciBzZXLDoSBwZXJjZW50dWFsIHRlbmRvIGNvbW8gYmFzZSBvcyBhbGNhbmNlcyBlbnRyZSB6ZXJvIGUgMTAwJS4gU2UgcGFzc2FkbyB1bSB2YWxvciBzdXBlcmlvciBhIDEwMCxcclxuICAgKiBBIGNvbG9yaXphw6fDo28gZG8gZ2F1Z2Ugc2Vyw6EgY29tcGxldGEgZSBvIHZhbG9yIHBhc3NhZG8gc2Vyw6EgZXhpYmlkbyBubyBpbnRlcmlvciBkbyBhcmNvLlxyXG4gICAqIC0gQ29tIGBwLXJhbmdlc2A6IEEgZGVzY3Jpw6fDo28gc2Vyw6EgZXhpYmlkYSBhY2ltYSBkbyBnYXVnZSBlIGhhdmVyw6EgdW0gcG9udGVpcm8gbWFyY2FuZG8gbyB2YWxvciBwYXNzYWRvIGVtIGBwLXZhbHVlYC5cclxuICAgKiBDb25zaWRlcmFuZG8gcXVlIG8gYWxjYW5jZSBlbSBgcmFuZ2VzYCDDqSBhYmVydG8sIGVudMOjbyBhIGVzY2FsYSBkZSBgcC12YWx1ZWAgc2Vyw6EgZW0gcmVsYcOnw6NvIGFvIG1lbm9yL21haW9yIGFsY2FuY2VcclxuICAgKiBhYnNvbHV0byBkZWZpbmlkbyBlbSBgcC1yYW5nZXNgLlxyXG4gICAqIFNlIHBhc3NhZG8gdW0gYHAtdmFsdWVgIGluZmVyaW9yIGVtIHJlbGHDp8OjbyBhbyBtw61uaW1vIHZhbG9yIGRlZmluaWRvIGVtIGBwLXJhbmdlc2AsIG8gZG9tw61uaW8gbcOtbmltbyBkbyBnYXVnZSBwYXJ0aXLDoSBkZSBgcC12YWx1ZWAuXHJcbiAgICogQSBtZXNtYSByZWdyYSBwcmV2YWxlY2UgcGFyYSB2YWxvcmVzIG3DoXhpbW9zLlxyXG4gICAqXHJcbiAgICovXHJcbiAgQElucHV0KCdwLXZhbHVlJykgc2V0IHZhbHVlKGdhdWdlVmFsdWU6IG51bWJlcikge1xyXG4gICAgaWYgKHR5cGVvZiBnYXVnZVZhbHVlID09PSAnbnVtYmVyJyB8fCAodHlwZW9mIGdhdWdlVmFsdWUgPT09ICdzdHJpbmcnICYmICg8c3RyaW5nPmdhdWdlVmFsdWUpLnRyaW0oKSkpIHtcclxuICAgICAgY29uc3QgdmFsdWUgPSAhaXNOYU4oZ2F1Z2VWYWx1ZSkgPyBOdW1iZXIoZ2F1Z2VWYWx1ZSkgOiB1bmRlZmluZWQ7XHJcblxyXG4gICAgICB0aGlzLl92YWx1ZSA9IHZhbHVlO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgdGhpcy5fdmFsdWUgPSB1bmRlZmluZWQ7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBnZXQgdmFsdWUoKTogbnVtYmVyIHtcclxuICAgIHJldHVybiB0aGlzLl92YWx1ZTtcclxuICB9XHJcblxyXG4gIGNvbnN0cnVjdG9yKHByb3RlY3RlZCBjb2xvclNlcnZpY2U6IFBvQ29sb3JTZXJ2aWNlKSB7fVxyXG5cclxuICBwcml2YXRlIHZlcmlmeUNvbG9ycyhyYW5nZXM6IEFycmF5PFBvR2F1Z2VSYW5nZXM+KSB7XHJcbiAgICByZXR1cm4gdGhpcy5jb2xvclNlcnZpY2UuZ2V0Q29sb3JzPFBvR2F1Z2VSYW5nZXM+KHJhbmdlcyk7XHJcbiAgfVxyXG5cclxuICBwcml2YXRlIHNldEdhdWdlSGVpZ2h0KGhlaWdodDogbnVtYmVyKTogbnVtYmVyIHtcclxuICAgIGNvbnN0IGdhdWdlSGVpZ2h0ID0gY29udmVydFRvSW50KGhlaWdodCk7XHJcblxyXG4gICAgcmV0dXJuIGdhdWdlSGVpZ2h0ICYmIGdhdWdlSGVpZ2h0ID4gcG9HYXVnZU1pbkhlaWdodCA/IGdhdWdlSGVpZ2h0IDogcG9HYXVnZU1pbkhlaWdodDtcclxuICB9XHJcblxyXG4gIHByb3RlY3RlZCBhYnN0cmFjdCBzdmdDb250YWluZXJTaXplKCk6IHZvaWQ7XHJcbn1cclxuIl19