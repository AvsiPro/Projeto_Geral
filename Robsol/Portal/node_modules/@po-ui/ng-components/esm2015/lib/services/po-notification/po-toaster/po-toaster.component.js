import { ChangeDetectorRef, Component, ElementRef, Renderer2, ViewChild } from '@angular/core';
import { Subject } from 'rxjs';
import { PoLanguageService } from '../../po-language/po-language.service';
import { PoToasterBaseComponent } from './po-toaster-base.component';
import { PoToasterType } from './po-toaster-type.enum';
import { PoToasterOrientation } from './po-toaster-orientation.enum';
/**
 * @docsPrivate
 *
 * @docsExtends PoToasterBaseComponent
 */
export class PoToasterComponent extends PoToasterBaseComponent {
    constructor(languageService, changeDetector, elementeRef, renderer) {
        super();
        this.changeDetector = changeDetector;
        this.elementeRef = elementeRef;
        this.renderer = renderer;
        this.alive = true;
        /* Margem do Toaster referênte à sua orientação e posição*/
        this.margin = 20;
        /* Observable para monitorar o Close to Toaster */
        this.observableOnClose = new Subject();
        /* Posição do Toaster*/
        this.toasterPosition = 'po-toaster-bottom';
    }
    ngOnDestroy() {
        this.alive = false;
    }
    ngAfterViewInit() {
        setTimeout(() => this.renderer.addClass(this.toaster.nativeElement, 'po-toaster-visible'));
    }
    /* Muda a posição do Toaster na tela*/
    changePosition(position) {
        this.elementeRef.nativeElement.style.display = 'table';
        this.margin = 6 + 44 * position + position * 6;
        if (this.orientation === PoToasterOrientation.Top) {
            this.toaster.nativeElement.style.top = this.margin + 'px';
        }
        else {
            this.toaster.nativeElement.style.bottom = this.margin + 'px';
        }
    }
    /* Fecha o componente Toaster */
    close() {
        this.observableOnClose.next(true);
    }
    setFadeOut() {
        this.renderer.removeClass(this.toaster.nativeElement, 'po-toaster-visible');
        this.renderer.addClass(this.toaster.nativeElement, 'po-toaster-invisible');
    }
    /* Configura o Toaster com os atributos passados para ele */
    configToaster(poToaster) {
        this.type = poToaster.type;
        this.message = poToaster.message;
        this.orientation = poToaster.orientation;
        this.position = poToaster.position;
        this.action = poToaster.action;
        this.actionLabel = poToaster.actionLabel;
        this.componentRef = poToaster.componentRef;
        /* Muda a orientação do Toaster */
        if (this.orientation === PoToasterOrientation.Top) {
            this.toasterPosition = 'po-toaster-top';
        }
        /* Muda a posição do Toaster */
        this.changePosition(this.position);
        /* Switch para o tipo de Toaster */
        switch (this.type) {
            case PoToasterType.Error: {
                this.toasterType = 'po-toaster-error';
                this.icon = 'po-icon-warning';
                break;
            }
            case PoToasterType.Information: {
                this.toasterType = 'po-toaster-info';
                this.icon = 'po-icon-info';
                break;
            }
            case PoToasterType.Success: {
                this.toasterType = 'po-toaster-success';
                this.icon = 'po-icon-ok';
                break;
            }
            case PoToasterType.Warning: {
                this.toasterType = 'po-toaster-warning';
                this.icon = 'po-icon-warning';
                break;
            }
        }
        this.changeDetector.detectChanges();
    }
    getIcon() {
        return this.icon;
    }
    getToasterPosition() {
        return this.toasterPosition;
    }
    getToasterType() {
        return this.toasterType;
    }
    onButtonClose(event) {
        event.preventDefault();
        event.stopPropagation();
        if (this.action && !this.actionLabel) {
            this.poToasterAction(event);
        }
        else {
            this.close();
        }
    }
    /* Chama a função passada pelo atributo `action` */
    poToasterAction(event) {
        event.preventDefault();
        event.stopPropagation();
        this.action(this);
    }
}
PoToasterComponent.decorators = [
    { type: Component, args: [{
                selector: 'po-toaster',
                template: "<div #toaster class=\"po-toaster {{ getToasterType() }} {{ getToasterPosition() }} po-clickable\" (click)=\"close()\">\r\n  <div class=\"po-toaster-icon\">\r\n    <span class=\"po-icon {{ getIcon() }}\"></span>\r\n  </div>\r\n\r\n  <div class=\"po-toaster-message\">{{ message }}</div>\r\n\r\n  <div *ngIf=\"action && actionLabel\" (click)=\"poToasterAction($event)\" class=\"po-toaster-action\">\r\n    {{ actionLabel }}\r\n  </div>\r\n\r\n  <button class=\"po-toaster-close\" (click)=\"onButtonClose($event)\">\r\n    <span class=\"po-icon po-icon-close\"></span>\r\n  </button>\r\n</div>\r\n"
            },] }
];
PoToasterComponent.ctorParameters = () => [
    { type: PoLanguageService },
    { type: ChangeDetectorRef },
    { type: ElementRef },
    { type: Renderer2 }
];
PoToasterComponent.propDecorators = {
    toaster: [{ type: ViewChild, args: ['toaster',] }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tdG9hc3Rlci5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy91aS9zcmMvbGliL3NlcnZpY2VzL3BvLW5vdGlmaWNhdGlvbi9wby10b2FzdGVyL3BvLXRvYXN0ZXIuY29tcG9uZW50LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFFTCxpQkFBaUIsRUFDakIsU0FBUyxFQUNULFVBQVUsRUFFVixTQUFTLEVBQ1QsU0FBUyxFQUNWLE1BQU0sZUFBZSxDQUFDO0FBRXZCLE9BQU8sRUFBRSxPQUFPLEVBQUUsTUFBTSxNQUFNLENBQUM7QUFJL0IsT0FBTyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sdUNBQXVDLENBQUM7QUFFMUUsT0FBTyxFQUFFLHNCQUFzQixFQUFFLE1BQU0sNkJBQTZCLENBQUM7QUFFckUsT0FBTyxFQUFFLGFBQWEsRUFBRSxNQUFNLHdCQUF3QixDQUFDO0FBQ3ZELE9BQU8sRUFBRSxvQkFBb0IsRUFBRSxNQUFNLCtCQUErQixDQUFDO0FBRXJFOzs7O0dBSUc7QUFLSCxNQUFNLE9BQU8sa0JBQW1CLFNBQVEsc0JBQXNCO0lBZTVELFlBQ0UsZUFBa0MsRUFDM0IsY0FBaUMsRUFDaEMsV0FBd0IsRUFDeEIsUUFBb0I7UUFFNUIsS0FBSyxFQUFFLENBQUM7UUFKRCxtQkFBYyxHQUFkLGNBQWMsQ0FBbUI7UUFDaEMsZ0JBQVcsR0FBWCxXQUFXLENBQWE7UUFDeEIsYUFBUSxHQUFSLFFBQVEsQ0FBWTtRQWhCOUIsVUFBSyxHQUFZLElBQUksQ0FBQztRQUd0QiwyREFBMkQ7UUFDbkQsV0FBTSxHQUFXLEVBQUUsQ0FBQztRQUM1QixrREFBa0Q7UUFDMUMsc0JBQWlCLEdBQUcsSUFBSSxPQUFPLEVBQU8sQ0FBQztRQUMvQyx1QkFBdUI7UUFDZixvQkFBZSxHQUFXLG1CQUFtQixDQUFDO0lBV3RELENBQUM7SUFFRCxXQUFXO1FBQ1QsSUFBSSxDQUFDLEtB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b3J0IHtcclxuICBBZnRlclZpZXdJbml0LFxyXG4gIENoYW5nZURldGVjdG9yUmVmLFxyXG4gIENvbXBvbmVudCxcclxuICBFbGVtZW50UmVmLFxyXG4gIE9uRGVzdHJveSxcclxuICBSZW5kZXJlcjIsXHJcbiAgVmlld0NoaWxkXHJcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XHJcblxyXG5pbXBvcnQgeyBTdWJqZWN0IH0gZnJvbSAncnhqcyc7XHJcblxyXG5pbXBvcnQgeyBwb0xvY2FsZURlZmF1bHQgfSBmcm9tICcuLi8uLi9wby1sYW5ndWFnZS9wby1sYW5ndWFnZS5jb25zdGFudCc7XHJcblxyXG5pbXBvcnQgeyBQb0xhbmd1YWdlU2VydmljZSB9IGZyb20gJy4uLy4uL3BvLWxhbmd1YWdlL3BvLWxhbmd1YWdlLnNlcnZpY2UnO1xyXG5cclxuaW1wb3J0IHsgUG9Ub2FzdGVyQmFzZUNvbXBvbmVudCB9IGZyb20gJy4vcG8tdG9hc3Rlci1iYXNlLmNvbXBvbmVudCc7XHJcbmltcG9ydCB7IFBvVG9hc3RlciB9IGZyb20gJy4vcG8tdG9hc3Rlci5pbnRlcmZhY2UnO1xyXG5pbXBvcnQgeyBQb1RvYXN0ZXJUeXBlIH0gZnJvbSAnLi9wby10b2FzdGVyLXR5cGUuZW51bSc7XHJcbmltcG9ydCB7IFBvVG9hc3Rlck9yaWVudGF0aW9uIH0gZnJvbSAnLi9wby10b2FzdGVyLW9yaWVudGF0aW9uLmVudW0nO1xyXG5cclxuLyoqXHJcbiAqIEBkb2NzUHJpdmF0ZVxyXG4gKlxyXG4gKiBAZG9jc0V4dGVuZHMgUG9Ub2FzdGVyQmFzZUNvbXBvbmVudFxyXG4gKi9cclxuQENvbXBvbmVudCh7XHJcbiAgc2VsZWN0b3I6ICdwby10b2FzdGVyJyxcclxuICB0ZW1wbGF0ZVVybDogJy4vcG8tdG9hc3Rlci5jb21wb25lbnQuaHRtbCdcclxufSlcclxuZXhwb3J0IGNsYXNzIFBvVG9hc3RlckNvbXBvbmVudCBleHRlbmRzIFBvVG9hc3RlckJhc2VDb21wb25lbnQgaW1wbGVtZW50cyBBZnRlclZpZXdJbml0LCBPbkRlc3Ryb3kge1xyXG4gIC8qIENvbXBvbmVudGUgdG9hc3RlciAqL1xyXG4gIEBWaWV3Q2hpbGQoJ3RvYXN0ZXInKSB0b2FzdGVyOiBFbGVtZW50UmVmO1xyXG4gIGFsaXZlOiBib29sZWFuID0gdHJ1ZTtcclxuICAvKiDDjWNvbmUgZG8gVG9hc3RlciAqL1xyXG4gIHByaXZhdGUgaWNvbjogc3RyaW5nO1xyXG4gIC8qIE1hcmdlbSBkbyBUb2FzdGVyIHJlZmVyw6pudGUgw6Agc3VhIG9yaWVudGHDp8OjbyBlIHBvc2nDp8OjbyovXHJcbiAgcHJpdmF0ZSBtYXJnaW46IG51bWJlciA9IDIwO1xyXG4gIC8qIE9ic2VydmFibGUgcGFyYSBtb25pdG9yYXIgbyBDbG9zZSB0byBUb2FzdGVyICovXHJcbiAgcHJpdmF0ZSBvYnNlcnZhYmxlT25DbG9zZSA9IG5ldyBTdWJqZWN0PGFueT4oKTtcclxuICAvKiBQb3Npw6fDo28gZG8gVG9hc3RlciovXHJcbiAgcHJpdmF0ZSB0b2FzdGVyUG9zaXRpb246IHN0cmluZyA9ICdwby10b2FzdGVyLWJvdHRvbSc7XHJcbiAgLyogVGlwbyBkbyBUb2FzdGVyICovXHJcbiAgcHJpdmF0ZSB0b2FzdGVyVHlwZTogc3RyaW5nO1xyXG5cclxuICBjb25zdHJ1Y3RvcihcclxuICAgIGxhbmd1YWdlU2VydmljZTogUG9MYW5ndWFnZVNlcnZpY2UsXHJcbiAgICBwdWJsaWMgY2hhbmdlRGV0ZWN0b3I6IENoYW5nZURldGVjdG9yUmVmLFxyXG4gICAgcHJpdmF0ZSBlbGVtZW50ZVJlZj86IEVsZW1lbnRSZWYsXHJcbiAgICBwcml2YXRlIHJlbmRlcmVyPzogUmVuZGVyZXIyXHJcbiAgKSB7XHJcbiAgICBzdXBlcigpO1xyXG4gIH1cclxuXHJcbiAgbmdPbkRlc3Ryb3koKTogdm9pZCB7XHJcbiAgICB0aGlzLmFsaXZlID0gZmFsc2U7XHJcbiAgfVxyXG5cclxuICBuZ0FmdGVyVmlld0luaXQoKSB7XHJcbiAgICBzZXRUaW1lb3V0KCgpID0+IHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy50b2FzdGVyLm5hdGl2ZUVsZW1lbnQsICdwby10b2FzdGVyLXZpc2libGUnKSk7XHJcbiAgfVxyXG5cclxuICAvKiBNdWRhIGEgcG9zacOnw6NvIGRvIFRvYXN0ZXIgbmEgdGVsYSovXHJcbiAgY2hhbmdlUG9zaXRpb24ocG9zaXRpb246IG51bWJlcik6IHZvaWQge1xyXG4gICAgdGhpcy5lbGVtZW50ZVJlZi5uYXRpdmVFbGVtZW50LnN0eWxlLmRpc3BsYXkgPSAndGFibGUnO1xyXG5cclxuICAgIHRoaXMubWFyZ2luID0gNiArIDQ0ICogcG9zaXRpb24gKyBwb3NpdGlvbiAqIDY7XHJcblxyXG4gICAgaWYgKHRoaXMub3JpZW50YXRpb24gPT09IFBvVG9hc3Rlck9yaWVudGF0aW9uLlRvcCkge1xyXG4gICAgICB0aGlzLnRvYXN0ZXIubmF0aXZlRWxlbWVudC5zdHlsZS50b3AgPSB0aGlzLm1hcmdpbiArICdweCc7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICB0aGlzLnRvYXN0ZXIubmF0aXZlRWxlbWVudC5zdHlsZS5ib3R0b20gPSB0aGlzLm1hcmdpbiArICdweCc7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICAvKiBGZWNoYSBvIGNvbXBvbmVudGUgVG9hc3RlciAqL1xyXG4gIGNsb3NlKCk6IHZvaWQge1xyXG4gICAgdGhpcy5vYnNlcnZhYmxlT25DbG9zZS5uZXh0KHRydWUpO1xyXG4gIH1cclxuXHJcbiAgc2V0RmFkZU91dCgpIHtcclxuICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3ModGhpcy50b2FzdGVyLm5hdGl2ZUVsZW1lbnQsICdwby10b2FzdGVyLXZpc2libGUnKTtcclxuICAgIHRoaXMucmVuZGVyZXIuYWRkQ2xhc3ModGhpcy50b2FzdGVyLm5hdGl2ZUVsZW1lbnQsICdwby10b2FzdGVyLWludmlzaWJsZScpO1xyXG4gIH1cclxuXHJcbiAgLyogQ29uZmlndXJhIG8gVG9hc3RlciBjb20gb3MgYXRyaWJ1dG9zIHBhc3NhZG9zIHBhcmEgZWxlICovXHJcbiAgY29uZmlnVG9hc3Rlcihwb1RvYXN0ZXI6IFBvVG9hc3Rlcikge1xyXG4gICAgdGhpcy50eXBlID0gcG9Ub2FzdGVyLnR5cGU7XHJcbiAgICB0aGlzLm1lc3NhZ2UgPSBwb1RvYXN0ZXIubWVzc2FnZTtcclxuICAgIHRoaXMub3JpZW50YXRpb24gPSBwb1RvYXN0ZXIub3JpZW50YXRpb247XHJcbiAgICB0aGlzLnBvc2l0aW9uID0gcG9Ub2FzdGVyLnBvc2l0aW9uO1xyXG4gICAgdGhpcy5hY3Rpb24gPSBwb1RvYXN0ZXIuYWN0aW9uO1xyXG4gICAgdGhpcy5hY3Rpb25MYWJlbCA9IHBvVG9hc3Rlci5hY3Rpb25MYWJlbDtcclxuICAgIHRoaXMuY29tcG9uZW50UmVmID0gcG9Ub2FzdGVyLmNvbXBvbmVudFJlZjtcclxuXHJcbiAgICAvKiBNdWRhIGEgb3JpZW50YcOnw6NvIGRvIFRvYXN0ZXIgKi9cclxuICAgIGlmICh0aGlzLm9yaWVudGF0aW9uID09PSBQb1RvYXN0ZXJPcmllbnRhdGlvbi5Ub3ApIHtcclxuICAgICAgdGhpcy50b2FzdGVyUG9zaXRpb24gPSAncG8tdG9hc3Rlci10b3AnO1xyXG4gICAgfVxyXG5cclxuICAgIC8qIE11ZGEgYSBwb3Npw6fDo28gZG8gVG9hc3RlciAqL1xyXG4gICAgdGhpcy5jaGFuZ2VQb3NpdGlvbih0aGlzLnBvc2l0aW9uKTtcclxuXHJcbiAgICAvKiBTd2l0Y2ggcGFyYSBvIHRpcG8gZGUgVG9hc3RlciAqL1xyXG4gICAgc3dpdGNoICh0aGlzLnR5cGUpIHtcclxuICAgICAgY2FzZSBQb1RvYXN0ZXJUeXBlLkVycm9yOiB7XHJcbiAgICAgICAgdGhpcy50b2FzdGVyVHlwZSA9ICdwby10b2FzdGVyLWVycm9yJztcclxuICAgICAgICB0aGlzLmljb24gPSAncG8taWNvbi13YXJuaW5nJztcclxuICAgICAgICBicmVhaztcclxuICAgICAgfVxyXG4gICAgICBjYXNlIFBvVG9hc3RlclR5cGUuSW5mb3JtYXRpb246IHtcclxuICAgICAgICB0aGlzLnRvYXN0ZXJUeXBlID0gJ3BvLXRvYXN0ZXItaW5mbyc7XHJcbiAgICAgICAgdGhpcy5pY29uID0gJ3BvLWljb24taW5mbyc7XHJcbiAgICAgICAgYnJlYWs7XHJcbiAgICAgIH1cclxuICAgICAgY2FzZSBQb1RvYXN0ZXJUeXBlLlN1Y2Nlc3M6IHtcclxuICAgICAgICB0aGlzLnRvYXN0ZXJUeXBlID0gJ3BvLXRvYXN0ZXItc3VjY2Vzcyc7XHJcbiAgICAgICAgdGhpcy5pY29uID0gJ3BvLWljb24tb2snO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICAgIGNhc2UgUG9Ub2FzdGVyVHlwZS5XYXJuaW5nOiB7XHJcbiAgICAgICAgdGhpcy50b2FzdGVyVHlwZSA9ICdwby10b2FzdGVyLXdhcm5pbmcnO1xyXG4gICAgICAgIHRoaXMuaWNvbiA9ICdwby1pY29uLXdhcm5pbmcnO1xyXG4gICAgICAgIGJyZWFrO1xyXG4gICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5jaGFuZ2VEZXRlY3Rvci5kZXRlY3RDaGFuZ2VzKCk7XHJcbiAgfVxyXG5cclxuICBnZXRJY29uKCkge1xyXG4gICAgcmV0dXJuIHRoaXMuaWNvbjtcclxuICB9XHJcblxyXG4gIGdldFRvYXN0ZXJQb3NpdGlvbigpIHtcclxuICAgIHJldHVybiB0aGlzLnRvYXN0ZXJQb3NpdGlvbjtcclxuICB9XHJcblxyXG4gIGdldFRvYXN0ZXJUeXBlKCkge1xyXG4gICAgcmV0dXJuIHRoaXMudG9hc3RlclR5cGU7XHJcbiAgfVxyXG5cclxuICBvbkJ1dHRvbkNsb3NlKGV2ZW50KSB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgaWYgKHRoaXMuYWN0aW9uICYmICF0aGlzLmFjdGlvbkxhYmVsKSB7XHJcbiAgICAgIHRoaXMucG9Ub2FzdGVyQWN0aW9uKGV2ZW50KTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIC8qIENoYW1hIGEgZnVuw6fDo28gcGFzc2FkYSBwZWxvIGF0cmlidXRvIGBhY3Rpb25gICovXHJcbiAgcG9Ub2FzdGVyQWN0aW9uKGV2ZW50KTogdm9pZCB7XHJcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgZXZlbnQuc3RvcFByb3BhZ2F0aW9uKCk7XHJcblxyXG4gICAgdGhpcy5hY3Rpb24odGhpcyk7XHJcbiAgfVxyXG59XHJcbiJdfQ==