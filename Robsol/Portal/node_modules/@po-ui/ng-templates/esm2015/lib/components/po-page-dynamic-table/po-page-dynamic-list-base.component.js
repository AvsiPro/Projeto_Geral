import { Input, Directive } from '@angular/core';
import { convertToBoolean } from '../../utils/util';
export class PoPageDynamicListBaseComponent {
    constructor() {
        /** Objeto com propriedades do breadcrumb. */
        this.breadcrumb = { items: [] };
        this._autoRouter = false;
        this._columns = [];
        this._duplicates = [];
        this._fields = [];
        this._filters = [];
        this._keys = [];
    }
    /**
     * @optional
     *
     * @description
     *
     * Cria automaticamente as rotas de edição (novo/duplicate) e detalhes caso sejam definidas ações na propriedade `p-actions`
     *
     * As rotas criadas serão baseadas na propriedade `p-actions`.
     *
     * > Para o correto funcionamento não pode haver nenhuma rota coringa (`**`) especificada.
     *
     * @default false
     */
    set autoRouter(value) {
        this._autoRouter = convertToBoolean(value);
    }
    get autoRouter() {
        return this._autoRouter;
    }
    /**
     * @optional
     *
     * @description
     *
     * Lista dos campos usados na tabela e busca avançada.
     *
     *
     * > Caso não seja definido fields a tabela assumirá o comportamento padrão.
     */
    set fields(fields) {
        this._fields = Array.isArray(fields) ? [...fields] : [];
        this.setFieldsProperties(this.fields);
    }
    get fields() {
        return this._fields;
    }
    set columns(value) {
        this._columns = [...value];
    }
    get columns() {
        return this._columns;
    }
    set duplicates(value) {
        this._duplicates = [...value];
    }
    get duplicates() {
        return this._duplicates;
    }
    set filters(value) {
        this._filters = [...value];
    }
    get filters() {
        return this._filters;
    }
    set keys(value) {
        this._keys = [...value];
    }
    get keys() {
        return this._keys;
    }
    setFieldsProperties(fields) {
        this.filters = fields
            .filter(field => field.filter === true)
            .map(filterField => (Object.assign(Object.assign({}, filterField), { visible: true })));
        this.columns = fields.filter(field => field.visible === undefined || field.visible === true || field.allowColumnsManager === true);
        this.keys = fields.filter(field => field.key === true).map(field => field.property);
        this.duplicates = fields.filter(field => field.duplicate === true).map(field => field.property);
    }
}
PoPageDynamicListBaseComponent.decorators = [
    { type: Directive }
];
PoPageDynamicListBaseComponent.propDecorators = {
    breadcrumb: [{ type: Input, args: ['p-breadcrumb',] }],
    serviceApi: [{ type: Input, args: ['p-service-api',] }],
    title: [{ type: Input, args: ['p-title',] }],
    autoRouter: [{ type: Input, args: ['p-auto-router',] }],
    fields: [{ type: Input, args: ['p-fields',] }]
};
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoicG8tcGFnZS1keW5hbWljLWxpc3QtYmFzZS5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9wcm9qZWN0cy90ZW1wbGF0ZXMvc3JjL2xpYi9jb21wb25lbnRzL3BvLXBhZ2UtZHluYW1pYy10YWJsZS9wby1wYWdlLWR5bmFtaWMtbGlzdC1iYXNlLmNvbXBvbmVudC50cyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBQUUsS0FBSyxFQUFFLFNBQVMsRUFBRSxNQUFNLGVBQWUsQ0FBQztBQUlqRCxPQUFPLEVBQUUsZ0JBQWdCLEVBQUUsTUFBTSxrQkFBa0IsQ0FBQztBQUtwRCxNQUFNLE9BQU8sOEJBQThCO0lBRDNDO1FBRUUsNkNBQTZDO1FBQ3RCLGVBQVUsR0FBa0IsRUFBRSxLQUFLLEVBQUUsRUFBRSxFQUFFLENBQUM7UUFtRnpELGdCQUFXLEdBQVksS0FBSyxDQUFDO1FBQzdCLGFBQVEsR0FBZSxFQUFFLENBQUM7UUFDMUIsZ0JBQVcsR0FBa0IsRUFBRSxDQUFDO1FBQ2hDLFlBQU8sR0FBZSxFQUFFLENBQUM7UUFDekIsYUFBUSxHQUFlLEVBQUUsQ0FBQztRQUMxQixVQUFLLEdBQWtCLEVBQUUsQ0FBQztJQXFGcEMsQ0FBQztJQW5GQzs7Ozs7Ozs7Ozs7O09BWUc7SUFDSCxJQUE0QixVQUFVLENBQUMsS0FBYztRQUNuRCxJQUFJLENBQUMsV0FBVyxHQUFHLGdCQUFnQixDQUFDLEtBQUssQ0FBQyxDQUFDO0lBQzdDLENBQUM7SUFFRCxJQUFJLFVBQVU7UUFDWixPQUFPLElBQUksQ0FBQyxXQUFXLENBQUM7SUFDMUIsQ0FBQztJQUVEOzs7Ozs7Ozs7T0FTRztJQUNILElBQXVCLE1BQU0sQ0FBQyxNQUF3QztRQUNwRSxJQUFJLENBQUMsT0FBTyxHQUFHLEtBQUssQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLENBQUMsQ0FBQyxDQUFDLENBQUMsR0FBRyxNQUFNLENBQUMsQ0FBQyxDQUFDLENBQUMsRUFBRSxDQUFDO1FBRXhELElBQUksQ0FBQyxtQkFBbUIsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUM7SUFDeEMsQ0FBQztJQUVELElBQUksTUFBTTtRQUNSLE9BQU8sSUFBSSxDQUFDLE9BQU8sQ0FBQztJQUN0QixDQUFDO0lBRUQsSUFBSSxPQUFPLENBQUMsS0FBSztRQUNmLElBQUksQ0FBQyxRQUFRLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDO0lBQzdCLENBQUM7SUFFRCxJQUFJLE9BQU87UUFDVCxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUM7SUFDdkIsQ0FBQztJQUVELElBQUksVUFBVSxDQUFDLEtBQW9CO1FBQ2pDLElBQUksQ0FBQyxXQUFXLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDO0lBQ2hDLENBQUM7SUFFRCxJQUFJLFVBQVU7UUFDWixPQUFPLElBQUksQ0FBQyxXQUFXLENBQUM7SUFDMUIsQ0FBQztJQUVELElBQUksT0FBTyxDQUFDLEtBQXVDO1FBQ2pELElBQUksQ0FBQyxRQUFRLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDO0lBQzdCLENBQUM7SUFFRCxJQUFJLE9BQU87UUFDVCxPQUFPLElBQUksQ0FBQyxRQUFRLENBQUM7SUFDdkIsQ0FBQztJQUVELElBQUksSUFBSSxDQUFDLEtBQW9CO1FBQzNCLElBQUksQ0FBQyxLQUFLLEdBQUcsQ0FBQyxHQUFHLEtBQUssQ0FBQyxDQUFDO0lBQzFCLENBQUM7SUFFRCxJQUFJLElBQUk7UUFDTixPQUFPLElBQUksQ0FBQyxLQUFLLENBQUM7SUFDcEIsQ0FBQztJQUVPLG1CQUFtQixDQUFDLE1BQWtCO1FBQzVDLElBQUksQ0FBQyxPQUFPLEdBQUcsTUFBTTthQUNsQixNQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsTUFBTSxLQUFLLElBQUksQ0FBQzthQUN0QyxHQUFHLENBQUMsV0FBVyxDQUFDLEVBQUUsQ0FBQyxpQ0FBTSxXQUFXLEtBQUUsT0FBTyxFQUFFLElBQUksSUFBRyxDQUFDLENBQUM7UUFDM0QsSUFBSSxDQUFDLE9BQU8sR0FBRyxNQUFNLENBQUMsTUFBTSxDQUMxQixLQUFLLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxPQUFPLEtBQUssU0FBUyxJQUFJLEtBQUssQ0FBQyxPQUFPLEtBQUssSUFBSSxJQUFJLEtBQUssQ0FBQyxtQkFBbUIsS0FBSyxJQUFJLENBQ3JHLENBQUM7UUFDRixJQUFJLENBQUMsSUFBSSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsR0FBRyxLQUFLLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztRQUNwRixJQUFJLENBQUMsVUFBVSxHQUFHLE1BQU0sQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLEVBQUUsQ0FBQyxLQUFLLENBQUMsU0FBUyxLQUFLLElBQUksQ0FBQyxDQUFDLEdBQUcsQ0FBQyxLQUFLLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxRQUFRLENBQUMsQ0FBQztJQUNsRyxDQUFDOzs7WUEvS0YsU0FBUzs7O3lCQUdQLEtBQUssU0FBQyxjQUFjO3lCQThFcEIsS0FBSyxTQUFDLGVBQWU7b0JBR3JCLEtBQUssU0FBQyxTQUFTO3lCQXNCZixLQUFLLFNBQUMsZUFBZTtxQkFrQnJCLEtBQUssU0FBQyxVQUFVIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgSW5wdXQsIERpcmVjdGl2ZSB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xyXG5cclxuaW1wb3J0IHsgUG9CcmVhZGNydW1iIH0gZnJvbSAnQHBvLXVpL25nLWNvbXBvbmVudHMnO1xyXG5cclxuaW1wb3J0IHsgY29udmVydFRvQm9vbGVhbiB9IGZyb20gJy4uLy4uL3V0aWxzL3V0aWwnO1xyXG5cclxuaW1wb3J0IHsgUG9QYWdlRHluYW1pY1RhYmxlRmlsdGVycyB9IGZyb20gJy4vaW50ZXJmYWNlcy9wby1wYWdlLWR5bmFtaWMtdGFibGUtZmlsdGVycy5pbnRlcmZhY2UnO1xyXG5cclxuQERpcmVjdGl2ZSgpXHJcbmV4cG9ydCBjbGFzcyBQb1BhZ2VEeW5hbWljTGlzdEJhc2VDb21wb25lbnQge1xyXG4gIC8qKiBPYmpldG8gY29tIHByb3ByaWVkYWRlcyBkbyBicmVhZGNydW1iLiAqL1xyXG4gIEBJbnB1dCgncC1icmVhZGNydW1iJykgYnJlYWRjcnVtYj86IFBvQnJlYWRjcnVtYiA9IHsgaXRlbXM6IFtdIH07XHJcblxyXG4gIC8qKiBFbmRwb2ludCBkYSBBUEkgZG9zIHJlY3Vyc29zIHF1ZSBzZXLDo28gZXhpYmlkb3MuICovXHJcbiAgLyoqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICpcclxuICAgKiBFbmRwb2ludCB1c2FkbyBwZWxvIHRlbXBsYXRlIHBhcmEgcmVxdWlzacOnw6NvIGRvcyByZWN1cnNvcyBxdWUgc2Vyw6NvIGV4aWJpZG9zLlxyXG4gICAqXHJcbiAgICogQW8gcmVhbGl6YXIgcmVxdWlzacOnw7VlcyBkZSBidXNjYSwgcG9kZW0gc2VyIGVudmlhZG9zIG9zIHBhcsOibWV0cm9zIChjYXNvIHBvc3N1YW0gdmFsb3IpOiBgcGFnZWAsIGBwYWdlU2l6ZWAsIGBzZWFyY2hgIGUgYG9yZGVyYC5cclxuICAgKlxyXG4gICAqIENhc28gYSBjb2x1bmEgZXN0aXZlciBvcmRlbmFkYSBkZXNjZW5kZW50ZW1lbnRlIHNlcsOhIGVudmlhZGEgZGEgc2VndWludGUgZm9ybWE6IGAtbmFtZWAsIHNlIGZvciBvcmRlbmFkYVxyXG4gICAqIGFzY2VuZGVudGVtZW50ZSBzZXLDoSBlbnZpYWRhIGFwZW5hcyBjb20gbyBub21lIGRhIGNvbHVuYSwgcG9yIGV4ZW1wbG86IGBuYW1lYC5cclxuICAgKlxyXG4gICAqIEV4ZW1wbG8gZGUgdW1hIHJlcXVpc2nDp8OjbyBkZSBidXNjYTpcclxuICAgKlxyXG4gICAqID4gYEdFVCB7ZW5kLXBvaW50fS97cmVzb3VyY2V9P3BhZ2U9MSZwYWdlU2l6ZT0xMCZzZWFyY2g9Y29tcG9uZW50cyZvcmRlcj0tbmFtZWBcclxuICAgKlxyXG4gICAqIENhc28gYSBhw6fDo28gYHJlbW92ZWAgZXN0aXZlciBjb25maWd1cmFkYSwgc2Vyw6EgZmVpdG8gdW1hIHJlcXVpc2nDp8OjbyBkZSBleGNsdXPDo28gbmVzc2UgbWVzbW8gZW5kcG9pbnQgcGFzc2FuZG8gb3MgY2FtcG9zXHJcbiAgICogc2V0YWRvcyBjb21vIGBrZXk6IHRydWVgLlxyXG4gICAqXHJcbiAgICogPiBgREVMRVRFIHtlbmQtcG9pbnR9L3trZXlzfWBcclxuICAgKlxyXG4gICAqIGBgYFxyXG4gICAqICA8cG8tcGFnZS1keW5hbWljLXRhYmxlXHJcbiAgICogICAgW3AtYWN0aW9uc109XCJ7IHJlbW92ZTogdHJ1ZSB9XCJcclxuICAgKiAgICBbcC1maWVsZHNdPVwiWyB7IHByb3BlcnR5OiAnaWQnLCBrZXk6IHRydWUgfSBdXCJcclxuICAgKiAgICBwLXNlcnZpY2U9XCIvYXBpL3BvLXNhbXBsZXMvdjEvcGVvcGxlXCJcclxuICAgKiAgICAuLi4+XHJcbiAgICogIDwvcG8tcGFnZS1keW5hbWljLXRhYmxlPlxyXG4gICAqIGBgYFxyXG4gICAqXHJcbiAgICogUmVzcXVpc2nDp8OjbyBkaXNwYXJhZGEsIG9uZGUgYSBwcm9wcmllZGFkZSBgaWRgIMOpIGlndWFsIGEgMjpcclxuICAgKlxyXG4gICAqIGBgYFxyXG4gICAqICBERUxFVEUgL2FwaS9wby1zYW1wbGVzL3YxL3Blb3BsZS8yIEhUVFAvMS4xXHJcbiAgICogIEhvc3Q6IGxvY2FsaG9zdDo0MDAwXHJcbiAgICogIENvbm5lY3Rpb246IGtlZXAtYWxpdmVcclxuICAgKiAgQWNjZXB0OiBhcHBsaWNhdGlvbi9qc29uLCB0ZXh0L3BsYWluXHJcbiAgICogIC4uLlxyXG4gICAqIGBgYFxyXG4gICAqXHJcbiAgICogUGFyYSBhIGHDp8OjbyBgcmVtb3ZlQWxsYCwgc2Vyw6EgZmVpdG8gdW1hIHJlcXVpc2nDp8OjbyBkZSBleGNsdXPDo28gZW0gbG90ZSBwYXJhIGVzc2UgbWVzbW8gZW5kcG9pbnQgcGFzc2FuZG8sIHVtYSBsaXN0YVxyXG4gICAqIGRlIG9iamV0b3MgY29tIG9zIGNhbXBvcyBzZXRhZG9zIGNvbW8gYGtleTogdHJ1ZWAgdmlhIGBwYXlsb2FkYC5cclxuICAgKlxyXG4gICAqID4gYERFTEVURSB7ZW5kLXBvaW50fWBcclxuICAgKlxyXG4gICAqID4gYFBheWxvYWQ6IFsge2tleX0sIHtrZXl9IC4uLiB7a2V5fSBdYFxyXG4gICAqXHJcbiAgICogYGBgXHJcbiAgICogIDxwby1wYWdlLWR5bmFtaWMtdGFibGVcclxuICAgKiAgICBbcC1hY3Rpb25zXT1cInsgcmVtb3ZlQWxsOiB0cnVlIH1cIlxyXG4gICAqICAgIFtwLWZpZWxkc109XCJbIHsgcHJvcGVydHk6ICdpZCcsIGtleTogdHJ1ZSB9IF1cIlxyXG4gICAqICAgIHAtc2VydmljZT1cIi9hcGkvcG8tc2FtcGxlcy92MS9wZW9wbGVcIlxyXG4gICAqICAgIC4uLj5cclxuICAgKiAgPC9wby1wYWdlLWR5bmFtaWMtdGFibGU+XHJcbiAgICogYGBgXHJcbiAgICpcclxuICAgKiBSZXNxdWlzacOnw6NvIGRpc3BhcmFkYSwgb25kZSBmb3JhbSBzZWxlY2lvbmFkb3MgMyBpdGVucyBwYXJhIHNlcmVtIHJlbW92aWRvczpcclxuICAgKlxyXG4gICAqIGBgYFxyXG4gICAqICBERUxFVEUgL2FwaS9wby1zYW1wbGVzL3YxL3Blb3BsZSBIVFRQLzEuMVxyXG4gICAqICBIb3N0OiBsb2NhbGhvc3Q6NDAwMFxyXG4gICAqICBDb25uZWN0aW9uOiBrZWVwLWFsaXZlXHJcbiAgICogIEFjY2VwdDogYXBwbGljYXRpb24vanNvbiwgdGV4dC9wbGFpblxyXG4gICAqICAuLi5cclxuICAgKiBgYGBcclxuICAgKlxyXG4gICAqIFJlcXVlc3QgcGF5bG9hZDpcclxuICAgKlxyXG4gICAqIGBgYFxyXG4gICAqIFt7XCJpZFwiOjJ9LHtcImlkXCI6NH0se1wiaWRcIjo1fV1cclxuICAgKiBgYGBcclxuICAgKlxyXG4gICAqID4gQ2FzbyBlc3RlamEgdXNhbmRvIG1ldGFkYWRvcyBjb20gbyB0ZW1wbGF0ZSwgc2Vyw6EgZGlzcGFyYWRvIHVtYSByZXF1aXNpw6fDo28gbmEgaW5pY2lhbGl6YcOnw6NvIGRvIHRlbXBsYXRlIHBhcmEgYnVzY2FyXHJcbiAgICogPiBvcyBtZXRhZGFkb3MgZGEgcMOhZ2luYSBwYXNzYW5kbyBvIHRpcG8gZG8gbWV0YWRhZG8gZXNwZXJhZG8gZSBhIHZlcnPDo28gY2FjaGVhZGEgcGVsbyBicm93c2VyLlxyXG4gICAqID5cclxuICAgKiA+IGBHRVQge2VuZC1wb2ludH0vbWV0YWRhdGE/dHlwZT1saXN0JnZlcnNpb249e3ZlcnNpb259YFxyXG4gICAqL1xyXG4gIEBJbnB1dCgncC1zZXJ2aWNlLWFwaScpIHNlcnZpY2VBcGk6IHN0cmluZztcclxuXHJcbiAgLyoqIFTDrXR1bG8gZGEgcMOhZ2luYS4gKi9cclxuICBASW5wdXQoJ3AtdGl0bGUnKSB0aXRsZTogc3RyaW5nO1xyXG5cclxuICBwcml2YXRlIF9hdXRvUm91dGVyOiBib29sZWFuID0gZmFsc2U7XHJcbiAgcHJpdmF0ZSBfY29sdW1uczogQXJyYXk8YW55PiA9IFtdO1xyXG4gIHByaXZhdGUgX2R1cGxpY2F0ZXM6IEFycmF5PHN0cmluZz4gPSBbXTtcclxuICBwcml2YXRlIF9maWVsZHM6IEFycmF5PGFueT4gPSBbXTtcclxuICBwcml2YXRlIF9maWx0ZXJzOiBBcnJheTxhbnk+ID0gW107XHJcbiAgcHJpdmF0ZSBfa2V5czogQXJyYXk8c3RyaW5nPiA9IFtdO1xyXG5cclxuICAvKipcclxuICAgKiBAb3B0aW9uYWxcclxuICAgKlxyXG4gICAqIEBkZXNjcmlwdGlvblxyXG4gICAqXHJcbiAgICogQ3JpYSBhdXRvbWF0aWNhbWVudGUgYXMgcm90YXMgZGUgZWRpw6fDo28gKG5vdm8vZHVwbGljYXRlKSBlIGRldGFsaGVzIGNhc28gc2VqYW0gZGVmaW5pZGFzIGHDp8O1ZXMgbmEgcHJvcHJpZWRhZGUgYHAtYWN0aW9uc2BcclxuICAgKlxyXG4gICAqIEFzIHJvdGFzIGNyaWFkYXMgc2Vyw6NvIGJhc2VhZGFzIG5hIHByb3ByaWVkYWRlIGBwLWFjdGlvbnNgLlxyXG4gICAqXHJcbiAgICogPiBQYXJhIG8gY29ycmV0byBmdW5jaW9uYW1lbnRvIG7Do28gcG9kZSBoYXZlciBuZW5odW1hIHJvdGEgY29yaW5nYSAoYCoqYCkgZXNwZWNpZmljYWRhLlxyXG4gICAqXHJcbiAgICogQGRlZmF1bHQgZmFsc2VcclxuICAgKi9cclxuICBASW5wdXQoJ3AtYXV0by1yb3V0ZXInKSBzZXQgYXV0b1JvdXRlcih2YWx1ZTogYm9vbGVhbikge1xyXG4gICAgdGhpcy5fYXV0b1JvdXRlciA9IGNvbnZlcnRUb0Jvb2xlYW4odmFsdWUpO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGF1dG9Sb3V0ZXIoKTogYm9vbGVhbiB7XHJcbiAgICByZXR1cm4gdGhpcy5fYXV0b1JvdXRlcjtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIEBvcHRpb25hbFxyXG4gICAqXHJcbiAgICogQGRlc2NyaXB0aW9uXHJcbiAgICpcclxuICAgKiBMaXN0YSBkb3MgY2FtcG9zIHVzYWRvcyBuYSB0YWJlbGEgZSBidXNjYSBhdmFuw6dhZGEuXHJcbiAgICpcclxuICAgKlxyXG4gICAqID4gQ2FzbyBuw6NvIHNlamEgZGVmaW5pZG8gZmllbGRzIGEgdGFiZWxhIGFzc3VtaXLDoSBvIGNvbXBvcnRhbWVudG8gcGFkcsOjby5cclxuICAgKi9cclxuICBASW5wdXQoJ3AtZmllbGRzJykgc2V0IGZpZWxkcyhmaWVsZHM6IEFycmF5PFBvUGFnZUR5bmFtaWNUYWJsZUZpbHRlcnM+KSB7XHJcbiAgICB0aGlzLl9maWVsZHMgPSBBcnJheS5pc0FycmF5KGZpZWxkcykgPyBbLi4uZmllbGRzXSA6IFtdO1xyXG5cclxuICAgIHRoaXMuc2V0RmllbGRzUHJvcGVydGllcyh0aGlzLmZpZWxkcyk7XHJcbiAgfVxyXG5cclxuICBnZXQgZmllbGRzKCk6IEFycmF5PFBvUGFnZUR5bmFtaWNUYWJsZUZpbHRlcnM+IHtcclxuICAgIHJldHVybiB0aGlzLl9maWVsZHM7XHJcbiAgfVxyXG5cclxuICBzZXQgY29sdW1ucyh2YWx1ZSkge1xyXG4gICAgdGhpcy5fY29sdW1ucyA9IFsuLi52YWx1ZV07XHJcbiAgfVxyXG5cclxuICBnZXQgY29sdW1ucygpIHtcclxuICAgIHJldHVybiB0aGlzLl9jb2x1bW5zO1xyXG4gIH1cclxuXHJcbiAgc2V0IGR1cGxpY2F0ZXModmFsdWU6IEFycmF5PHN0cmluZz4pIHtcclxuICAgIHRoaXMuX2R1cGxpY2F0ZXMgPSBbLi4udmFsdWVdO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGR1cGxpY2F0ZXMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fZHVwbGljYXRlcztcclxuICB9XHJcblxyXG4gIHNldCBmaWx0ZXJzKHZhbHVlOiBBcnJheTxQb1BhZ2VEeW5hbWljVGFibGVGaWx0ZXJzPikge1xyXG4gICAgdGhpcy5fZmlsdGVycyA9IFsuLi52YWx1ZV07XHJcbiAgfVxyXG5cclxuICBnZXQgZmlsdGVycygpIHtcclxuICAgIHJldHVybiB0aGlzLl9maWx0ZXJzO1xyXG4gIH1cclxuXHJcbiAgc2V0IGtleXModmFsdWU6IEFycmF5PHN0cmluZz4pIHtcclxuICAgIHRoaXMuX2tleXMgPSBbLi4udmFsdWVdO1xyXG4gIH1cclxuXHJcbiAgZ2V0IGtleXMoKSB7XHJcbiAgICByZXR1cm4gdGhpcy5fa2V5cztcclxuICB9XHJcblxyXG4gIHByaXZhdGUgc2V0RmllbGRzUHJvcGVydGllcyhmaWVsZHM6IEFycmF5PGFueT4pIHtcclxuICAgIHRoaXMuZmlsdGVycyA9IGZpZWxkc1xyXG4gICAgICAuZmlsdGVyKGZpZWxkID0+IGZpZWxkLmZpbHRlciA9PT0gdHJ1ZSlcclxuICAgICAgLm1hcChmaWx0ZXJGaWVsZCA9PiAoeyAuLi5maWx0ZXJGaWVsZCwgdmlzaWJsZTogdHJ1ZSB9KSk7XHJcbiAgICB0aGlzLmNvbHVtbnMgPSBmaWVsZHMuZmlsdGVyKFxyXG4gICAgICBmaWVsZCA9PiBmaWVsZC52aXNpYmxlID09PSB1bmRlZmluZWQgfHwgZmllbGQudmlzaWJsZSA9PT0gdHJ1ZSB8fCBmaWVsZC5hbGxvd0NvbHVtbnNNYW5hZ2VyID09PSB0cnVlXHJcbiAgICApO1xyXG4gICAgdGhpcy5rZXlzID0gZmllbGRzLmZpbHRlcihmaWVsZCA9PiBmaWVsZC5rZXkgPT09IHRydWUpLm1hcChmaWVsZCA9PiBmaWVsZC5wcm9wZXJ0eSk7XHJcbiAgICB0aGlzLmR1cGxpY2F0ZXMgPSBmaWVsZHMuZmlsdGVyKGZpZWxkID0+IGZpZWxkLmR1cGxpY2F0ZSA9PT0gdHJ1ZSkubWFwKGZpZWxkID0+IGZpZWxkLnByb3BlcnR5KTtcclxuICB9XHJcbn1cclxuIl19