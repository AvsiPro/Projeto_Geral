{"version":3,"file":"po-page-dynamic-edit.component.d.ts","sources":["po-page-dynamic-edit.component.d.ts"],"names":[],"mappings":"AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;AACA","sourcesContent":["import { OnInit, OnDestroy } from '@angular/core';\r\nimport { ActivatedRoute, Router } from '@angular/router';\r\nimport { PoBreadcrumb, PoDialogService, PoDynamicFormComponent, PoGridComponent, PoGridRowActions, PoLanguageService, PoNotificationService, PoPageAction } from '@po-ui/ng-components';\r\nimport { PoPageDynamicEditActions } from './interfaces/po-page-dynamic-edit-actions.interface';\r\nimport { PoPageDynamicEditField } from './interfaces/po-page-dynamic-edit-field.interface';\r\nimport { PoPageDynamicService } from '../../services/po-page-dynamic/po-page-dynamic.service';\r\nimport { PoPageDynamicEditOptions } from './interfaces/po-page-dynamic-edit-options.interface';\r\nimport { PoPageCustomizationService } from '../../services/po-page-customization/po-page-customization.service';\r\nimport { PoPageDynamicEditActionsService } from './po-page-dynamic-edit-actions.service';\r\nexport declare const poPageDynamicEditLiteralsDefault: {\r\n    en: {\r\n        cancelConfirmMessage: string;\r\n        detailActionNew: string;\r\n        pageActionCancel: string;\r\n        pageActionSave: string;\r\n        pageActionSaveNew: string;\r\n        registerNotFound: string;\r\n        saveNotificationSuccessSave: string;\r\n        saveNotificationSuccessUpdate: string;\r\n        saveNotificationWarning: string;\r\n    };\r\n    es: {\r\n        cancelConfirmMessage: string;\r\n        detailActionNew: string;\r\n        pageActionCancel: string;\r\n        pageActionSave: string;\r\n        pageActionSaveNew: string;\r\n        registerNotFound: string;\r\n        saveNotificationSuccessSave: string;\r\n        saveNotificationSuccessUpdate: string;\r\n        saveNotificationWarning: string;\r\n    };\r\n    pt: {\r\n        cancelConfirmMessage: string;\r\n        detailActionNew: string;\r\n        pageActionCancel: string;\r\n        pageActionSave: string;\r\n        pageActionSaveNew: string;\r\n        registerNotFound: string;\r\n        saveNotificationSuccessSave: string;\r\n        saveNotificationSuccessUpdate: string;\r\n        saveNotificationWarning: string;\r\n    };\r\n    ru: {\r\n        cancelConfirmMessage: string;\r\n        detailActionNew: string;\r\n        pageActionCancel: string;\r\n        pageActionSave: string;\r\n        pageActionSaveNew: string;\r\n        registerNotFound: string;\r\n        saveNotificationSuccessSave: string;\r\n        saveNotificationSuccessUpdate: string;\r\n        saveNotificationWarning: string;\r\n    };\r\n};\r\n/**\r\n * @description\r\n *\r\n * O `po-page-dynamic-edit` é uma página que pode servir para editar ou criar novos registros,\r\n * o mesmo também suporta metadados conforme especificado na documentação.\r\n *\r\n * ### Utilização via rota\r\n *\r\n * Ao utilizar as rotas para carregar o template, o `page-dynamic-edit` disponibiliza propriedades para\r\n * poder especificar o endpoint dos dados e dos metadados. Exemplo de utilização:\r\n *\r\n * O componente primeiro irá carregar o metadado da rota definida na propriedade serviceMetadataApi\r\n * e depois irá buscar da rota definida na propriedade serviceLoadApi\r\n *\r\n * > Caso o servidor retornar um erro ao recuperar o metadados, será repassado o metadados salvo em cache,\r\n * se o cache não existe será disparado uma notificação.\r\n *\r\n * ```\r\n * {\r\n *   path: 'people',\r\n *   component: PoPageDynamicEditComponent,\r\n *   data: {\r\n *     serviceApi: 'http://localhost:3000/v1/people', // endpoint dos dados\r\n *     serviceMetadataApi: 'http://localhost:3000/v1/metadata', // endpoint dos metadados utilizando o método HTTP Get\r\n *     serviceLoadApi: 'http://localhost:3000/load-metadata' // endpoint de customizações dos metadados utilizando o método HTTP Post\r\n *   }\r\n * }\r\n *\r\n * ```\r\n *\r\n * Para carregar com um recurso já existente, deve-se ser incluído um parâmetro na rota chamado `id`:\r\n *\r\n * ```\r\n * {\r\n *   path: 'people/:id',\r\n *   component: PoPageDynamicEditComponent,\r\n *   data: {\r\n *     serviceApi: 'http://localhost:3000/v1/people', // endpoint dos dados\r\n *     serviceMetadataApi: 'http://localhost:3000/v1/metadata', // endpoint dos metadados\r\n *     serviceLoadApi: 'http://localhost:3000/load-metadata' // endpoint de customizações dos metadados\r\n *   }\r\n * }\r\n * ```\r\n *\r\n * A requisição dos metadados é feita na inicialização do template para buscar os metadados da página passando o\r\n * tipo do metadado esperado e a versão cacheada pelo browser.\r\n *\r\n * O formato esperado na resposta da requisição está especificado na interface\r\n * [PoPageDynamicEditMetadata](/documentation/po-page-dynamic-edit#po-page-dynamic-edit-metadata). Por exemplo:\r\n *\r\n * ```\r\n *  {\r\n *   version: 1,\r\n *   title: 'Person edit',\r\n *   fields: [\r\n *     { property: 'id', key: true, disabled: true },\r\n *     { property: 'status' },\r\n *     { property: 'name' },\r\n *     { property: 'nickname' },\r\n *     { property: 'birthdate', label: 'Birth date' },\r\n *     { property: 'genre' },\r\n *     { property: 'city' },\r\n *     { property: 'country' }\r\n *   ]\r\n * }\r\n * ```\r\n *\r\n * > Caso o endpoint dos metadados não seja especificado, será feito uma requisição utilizando o `serviceApi` da seguinte forma:\r\n * ```\r\n * GET {end-point}/metadata?type=edit&version={version}\r\n * ```\r\n *\r\n * @example\r\n *\r\n * <example name=\"po-page-dynamic-edit-basic\" title=\"PO Page Dynamic Edit Basic\">\r\n *  <file name=\"sample-po-page-dynamic-edit-basic/sample-po-page-dynamic-edit-basic.component.html\"> </file>\r\n *  <file name=\"sample-po-page-dynamic-edit-basic/sample-po-page-dynamic-edit-basic.component.ts\"> </file>\r\n * </example>\r\n *\r\n * <example name=\"po-page-dynamic-edit-user\" title=\"PO Page Dynamic Edit - User\">\r\n *  <file name=\"sample-po-page-dynamic-edit-user/sample-po-page-dynamic-edit-user.component.html\"> </file>\r\n *  <file name=\"sample-po-page-dynamic-edit-user/sample-po-page-dynamic-edit-user.component.ts\"> </file>\r\n * </example>\r\n */\r\nexport declare class PoPageDynamicEditComponent implements OnInit, OnDestroy {\r\n    private router;\r\n    private activatedRoute;\r\n    private poNotification;\r\n    private poDialogService;\r\n    private poPageDynamicService;\r\n    private poPageCustomizationService;\r\n    private poPageDynamicEditActionsService;\r\n    dynamicForm: PoDynamicFormComponent;\r\n    gridDetail: PoGridComponent;\r\n    /** Objeto com propriedades do breadcrumb. */\r\n    breadcrumb?: PoBreadcrumb;\r\n    /**\r\n     * @description\r\n     *\r\n     * Endpoint usado pelo template para requisição do recurso que será exibido para edição.\r\n     *\r\n     * Para as ações de `save` e `saveNew`, será feito uma requisição de criação nesse mesmo endpoint passando os valores\r\n     * preenchidos pelo usuário via payload.\r\n     *\r\n     * > `POST {end-point}`\r\n     *\r\n     * ```\r\n     *  <po-page-dynamic-edit\r\n     *    [p-actions]=\"{ save: '/', saveNew: 'new' }\"\r\n     *    [p-fields]=\"[ { property: 'name' }, { property: 'city' } ]\"\r\n     *    p-service=\"/api/po-samples/v1/people\"\r\n     *    ...>\r\n     *  </po-page-dynamic-edit>\r\n     * ```\r\n     *\r\n     * Resquisição disparada, onde a propriedade `name` e `city` foram preenchidas:\r\n     *\r\n     * ```\r\n     *  POST /api/po-samples/v1/people HTTP/1.1\r\n     *  Host: localhost:4000\r\n     *  Connection: keep-alive\r\n     *  Accept: application/json, text/plain\r\n     *  ...\r\n     * ```\r\n     *\r\n     * Request payload:\r\n     *\r\n     * ```\r\n     * { \"name\": \"Fulano\", \"city\": \"Smallville\" }\r\n     * ```\r\n     *\r\n     * Caso queira que o template carregue um recurso já existente, deve-se ser incluído um parametro na rota chamado `id`.\r\n     *\r\n     * Exemplo de configuração de rota:\r\n     *\r\n     * ```\r\n     *  RouterModule.forRoot([\r\n     *    ...\r\n     *    { path: 'edit/:id', component: PersonEditComponent },\r\n     *    ...\r\n     *  ],\r\n     * ```\r\n     *\r\n     * Baseado nisso, na inicialização do template, será disparado uma requisição para buscar o recurso que será editado.\r\n     *\r\n     * > `GET {end-point}/{id}`\r\n     *\r\n     * Nos métodos de `save` e `saveNew`, ao invés de um `POST`, será disparado um `PUT`.\r\n     *\r\n     * Resquisição disparada, onde a propriedade `name` e `city` foram preenchidas / atualizadas, e o `id` da url é 2:\r\n     *\r\n     * ```\r\n     *  PUT /api/po-samples/v1/people/2 HTTP/1.1\r\n     *  Host: localhost:4000\r\n     *  Connection: keep-alive\r\n     *  Accept: application/json, text/plain\r\n     *  ...\r\n     * ```\r\n     *\r\n     * Request payload:\r\n     *\r\n     * ```\r\n     * { \"name\": \"Fulano\", \"city\": \"Metropolis\" }\r\n     * ```\r\n     */\r\n    serviceApi: string;\r\n    /** Título da página. */\r\n    title: string;\r\n    /**\r\n     * Função ou serviço que será executado na inicialização do componente.\r\n     *\r\n     * A propriedade aceita os seguintes tipos:\r\n     * - `string`: *Endpoint* usado pelo componente para requisição via `POST`.\r\n     * - `function`: Método que será executado.\r\n     *\r\n     * O retorno desta função deve ser do tipo `PoPageDynamicEditOptions`,\r\n     * onde o usuário poderá customizar novos campos, breadcrumb, title e actions\r\n     *\r\n     * Por exemplo:\r\n     *\r\n     * ```\r\n     * getPageOptions(): PoPageDynamicEditOptions {\r\n     * return {\r\n     *   actions:\r\n     *     { cancel: false, save: 'save/:id', saveNew: 'saveNew' },\r\n     *   fields: [\r\n     *     { property: 'idCard', gridColumns: 6 }\r\n     *   ]\r\n     * };\r\n     * }\r\n     *\r\n     * ```\r\n     * Para referenciar a sua função utilize a propriedade `bind`, por exemplo:\r\n     * ```\r\n     *  [p-load]=\"onLoadOptions.bind(this)\"\r\n     * ```\r\n     */\r\n    onLoad: string | (() => PoPageDynamicEditOptions);\r\n    literals: any;\r\n    model: any;\r\n    readonly detailActions: PoGridRowActions;\r\n    private subscriptions;\r\n    private _actions;\r\n    private _autoRouter;\r\n    private _controlFields;\r\n    private _detailFields;\r\n    private _duplicates;\r\n    private _fields;\r\n    private _keys;\r\n    private _pageActions;\r\n    /**\r\n     * @optional\r\n     *\r\n     * @description\r\n     *\r\n     * Ações da página.\r\n     */\r\n    set actions(value: PoPageDynamicEditActions);\r\n    get actions(): PoPageDynamicEditActions;\r\n    /**\r\n     * @todo Validar rotas na mão pois se existir uma rota '**' o catch do navigation não funciona.\r\n     *\r\n     * @optional\r\n     *\r\n     * @description\r\n     *\r\n     * Cria automaticamente as rotas de edição (novo/duplicate) e detalhes caso as ações\r\n     * estejam definidas nas ações.\r\n     *\r\n     * > Para o correto funcionamento não pode haver nenhum rota coringa (`**`) especificada.\r\n     *\r\n     * @default false\r\n     */\r\n    set autoRouter(value: boolean);\r\n    get autoRouter(): boolean;\r\n    /** Lista dos campos usados na tabela e busca avançada. */\r\n    set fields(value: Array<PoPageDynamicEditField>);\r\n    get fields(): Array<PoPageDynamicEditField>;\r\n    constructor(router: Router, activatedRoute: ActivatedRoute, poNotification: PoNotificationService, poDialogService: PoDialogService, poPageDynamicService: PoPageDynamicService, poPageCustomizationService: PoPageCustomizationService, poPageDynamicEditActionsService: PoPageDynamicEditActionsService, languageService: PoLanguageService);\r\n    ngOnInit(): void;\r\n    ngOnDestroy(): void;\r\n    detailActionNew(): void;\r\n    get duplicates(): any[];\r\n    get keys(): any[];\r\n    get pageActions(): PoPageAction[];\r\n    get controlFields(): any[];\r\n    get detailFields(): any[];\r\n    private loadDataFromAPI;\r\n    private cancel;\r\n    private formatUniqueKey;\r\n    private goBack;\r\n    private executeBackAction;\r\n    private loadData;\r\n    private loadOptionsOnInitialize;\r\n    private getPoDynamicPageOptions;\r\n    private getMetadata;\r\n    private navigateTo;\r\n    private resolveUniqueKey;\r\n    private resolveUrl;\r\n    private executeSave;\r\n    private updateModel;\r\n    private saveOperation;\r\n    private save;\r\n    private executeSaveNew;\r\n    private getKeysByFields;\r\n    private getControlFields;\r\n    private getDetailFields;\r\n    private getDuplicatesByFields;\r\n    private getPageActions;\r\n    private isObject;\r\n}\r\n"]}